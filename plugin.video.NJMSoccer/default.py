import base64;exec base64.b64decode('aW1wb3J0IHVybGxpYgppbXBvcnQgdXJsbGliMgppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IHJlCmltcG9ydCBvcwppbXBvcnQgeGJtY3BsdWdpbgppbXBvcnQgeGJtY2d1aQppbXBvcnQgeGJtY2FkZG9uCmltcG9ydCB4Ym1jdmZzCmltcG9ydCB0cmFjZWJhY2sKaW1wb3J0IGNvb2tpZWxpYgppbXBvcnQgc2h1dGlsCmZyb20gYWRkb24gLiBjb21tb24gLiBuZXQgaW1wb3J0IE5ldApmcm9tIEJlYXV0aWZ1bFNvdXAgaW1wb3J0IEJlYXV0aWZ1bFN0b25lU291cCAsIEJlYXV0aWZ1bFNvdXAgLCBCZWF1dGlmdWxTT0FQCmZyb20geGJtYyBpbXBvcnQgdHJhbnNsYXRlUGF0aCBhcyB0cmFuc2xhdGUKdHJ5IDoKIGltcG9ydCBqc29uCmV4Y2VwdCA6CiBpbXBvcnQgc2ltcGxlanNvbiBhcyBqc29uCmltcG9ydCBTaW1wbGVEb3dubG9hZGVyIGFzIGRvd25sb2FkZXIKaW1wb3J0IHRpbWUKaW1wb3J0IHJlcXVlc3RzCmlmIDY0IC0gNjQ6IGkxMWlJaWlJaWkKaWYgNjUgLSA2NTogTzAgLyBpSWlpMUkxMUkxSUkxICUgT29vb29vb29PTyAtIGkxSUlpCm8wT08wMCA9IE5ldCAoIHVzZXJfYWdlbnQgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4xKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMjguMC4xNTAwLjcyIFNhZmFyaS81MzcuMzYnICkKb28gPSB7CiAnQWNjZXB0JyA6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLCovKjtxPTAuOCcKIH0KaWYgMjcgLSAyNzogb08wT29vT29PICogbzBPbwppMUlpSTFJMTEgPSBbICcxODB1cGxvYWQuY29tJyAsICdhbGxteXZpZGVvcy5uZXQnICwgJ2Jlc3RyZWFtcy5uZXQnICwgJ2NsaWNrbnVwbG9hZC5jb20nICwgJ2Nsb3VkemlsbGEudG8nICwgJ21vdnNoYXJlLm5ldCcgLCAnbm92YW1vdi5jb20nICwgJ25vd3ZpZGVvLnN4JyAsICd2aWRlb3dlZWQuZXMnICwgJ2RhY2xpcHMuaW4nICwgJ2RhdGVtdWxlLmNvbScgLCAnZmFzdHZpZGVvLmluJyAsICdmYXN0c3RyZWFtLmluJyAsICdmaWxlaG9vdC5jb20nICwgJ2ZpbGVudWtlLmNvbScgLCAnc2hhcmVzaXguY29tJyAsICdkb2NzLmdvb2dsZS5jb20nICwgJ3BsdXMuZ29vZ2xlLmNvbScgLCAncGljYXNhd2ViLmdvb2dsZS5jb20nICwgJ2dvcmlsbGF2aWQuY29tJyAsICdnb3JpbGxhdmlkLmluJyAsICdncmlmdGhvc3QuY29tJyAsICdodWdlZmlsZXMubmV0JyAsICdpcGl0aG9zLnRvJyAsICdpc2hhcmVkLmV1JyAsICdraW5nZmlsZXMubmV0JyAsICdtYWlsLnJ1JyAsICdteS5tYWlsLnJ1JyAsICd2aWRlb2FwaS5teS5tYWlsLnJ1JyAsICdtaWdodHl1cGxvYWQuY29tJyAsICdtb29zaGFyZS5iaXonICwgJ21vdmRpdnguY29tJyAsICdtb3Zwb2QubmV0JyAsICdtb3Zwb2QuaW4nICwgJ21vdnJlZWwuY29tJyAsICdtcmZpbGUubWUnICwgJ25vc3ZpZGVvLmNvbScgLCAnb3BlbmxvYWQuaW8nICwgJ3BsYXllZC50bycgLCAnYml0c2hhcmUuY29tJyAsICdmaWxlZmFjdG9yeS5jb20nICwgJ2sycy5jYycgLCAnb2Jvb20uY29tJyAsICdyYXBpZGdhdG9yLm5ldCcgLCAndXBsb2FkZWQubmV0JyAsICdwcmltZXNoYXJlLnR2JyAsICdiaXRzaGFyZS5jb20nICwgJ2ZpbGVmYWN0b3J5LmNvbScgLCAnazJzLmNjJyAsICdvYm9vbS5jb20nICwgJ3JhcGlkZ2F0b3IubmV0JyAsICd1cGxvYWRlZC5uZXQnICwgJ3NoYXJlcmVwby5jb20nICwgJ3N0YWdldnUuY29tJyAsICdzdHJlYW1jbG91ZC5ldScgLCAnc3RyZWFtaW4udG8nICwgJ3RoZWZpbGUubWUnICwgJ3RoZXZpZGVvLm1lJyAsICd0dXNmaWxlcy5uZXQnICwgJ3VwbG9hZGMuY29tJyAsICd6YWxhYS5jb20nICwgJ3VwbG9hZHJvY2tldC5uZXQnICwgJ3VwdG9ib3guY29tJyAsICd2LXZpZHMuY29tJyAsICd2ZWVoZC5jb20nICwgJ3ZpZGJ1bGwuY29tJyAsICd2aWRlb21lZ2EudHYnICwgJ3ZpZHBsYXkubmV0JyAsICd2aWRzcG90Lm5ldCcgLCAndmlkdG8ubWUnICwgJ3ZpZHppLnR2JyAsICd2aW1lby5jb20nICwgJ3ZrLmNvbScgLCAndm9kbG9ja2VyLmNvbScgLCAneGZpbGVsb2FkLmNvbScgLCAneHZpZHN0YWdlLmNvbScgLCAnemV0dGFob3N0LnR2JyBdCklJaUlpSUkxMWkgPSBbICdwbHVnaW4udmlkZW8uZHJhbWFzb25saW5lJyAsICdwbHVnaW4udmlkZW8uZjRtVGVzdGVyJyAsICdwbHVnaW4udmlkZW8uc2hhaGlkbWJjbmV0JyAsICdwbHVnaW4udmlkZW8uU3BvcnRzRGV2aWwnICwgJ3BsdWdpbi5zdHJlYW0udmF1Z2hubGl2ZS50dicgLCAncGx1Z2luLnZpZGVvLlplbVRWLXNoYW5pJyBdCmlmIDUxIC0gNTE6IG9PbzBPME9vbyAqIEkxaWkxMWlJaTExaQppZiA0OCAtIDQ4OiBvTzBvIC8gT09vb09PbyAvIEkxMWkgLyBJaTFJCmNsYXNzIElpaUlJSTExMWlJICggdXJsbGliMiAuIEhUVFBFcnJvclByb2Nlc3NvciApIDoKIGRlZiBodHRwX3Jlc3BvbnNlICggc2VsZiAsIHJlcXVlc3QgLCByZXNwb25zZSApIDoKICByZXR1cm4gcmVzcG9uc2UKIGh0dHBzX3Jlc3BvbnNlID0gaHR0cF9yZXNwb25zZQogaWYgMzQgLSAzNDogaWlpMUkxSSAvIE8wMG9Pb09vTzBvME8gLiBPMG9vME9PMCArIE9vMG9vTzBvbzBvTyAuIEkxaTFpSTFpIC0gSUkKIGlmIDEwMCAtIDEwMDogaTExSWkxMUkxSWkxaSAuIElJIC0gaUlpaTFJMTFJMUlJMSAuIEkxMWkgLiBJaTFJIC8gTzAwb09vT29PMG8wTwogaWYgMjEgLSAyMTogb08wbyAvIE9vMG9vTzBvbzBvTyAqIEkxaWkxMWlJaTExaSAuIG9PME9vb09vTwpJaTFJSWlpMTEgPSB4Ym1jYWRkb24gLiBBZGRvbiAoICdwbHVnaW4udmlkZW8uTkpNU29jY2VyJyApCk9vb28wMDAwID0gSWkxSUlpaTExIC4gZ2V0QWRkb25JbmZvICggJ3ZlcnNpb24nICkKaTExID0geGJtYyAuIHRyYW5zbGF0ZVBhdGggKCBJaTFJSWlpMTEgLiBnZXRBZGRvbkluZm8gKCAncHJvZmlsZScgKSAuIGRlY29kZSAoICd1dGYtOCcgKSApCkkxMSA9IHhibWMgLiB0cmFuc2xhdGVQYXRoICggSWkxSUlpaTExIC4gZ2V0QWRkb25JbmZvICggJ3BhdGgnICkgLiBkZWNvZGUgKCAndXRmLTgnICkgKQpPbzBvMDAwMG8wbzAgPSBvcyAuIHBhdGggLiBqb2luICggaTExICwgJ2Zhdm9yaXRlcycgKQpvT28wb29vbzAwbyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBpMTEgLCAnaGlzdG9yeScgKQpvTzBvMG8wb29PMG9PID0gY2hyCm9vMG8wTzAwID0gb3MgLiBwYXRoIC4gam9pbiAoIGkxMSAsICdsaXN0X3JldmlzaW9uJyApCm9PID0gb3MgLiBwYXRoIC4gam9pbiAoIEkxMSAsICdpY29uLnBuZycgKQppMWlpSUlpaUkxMTEgPSBvcyAuIHBhdGggLiBqb2luICggSTExICwgJ2ZhbmFydC5qcGcnICkKb29vT09PT08gPSBvcyAuIHBhdGggLiBqb2luICggaTExICwgJ3NvdXJjZV9maWxlJyApCmkxaWlJSUkxMTFpaSA9IGkxMQppZiAzIC0gMzogT28wb29PMG9vMG9PICsgTzAKZG93bmxvYWRlciA9IGRvd25sb2FkZXIgLiBTaW1wbGVEb3dubG9hZGVyICggKQpJMUlpID0gSWkxSUlpaTExIC4gZ2V0U2V0dGluZyAoICdkZWJ1ZycgKQppZiBvcyAuIHBhdGggLiBleGlzdHMgKCBPbzBvMDAwMG8wbzAgKSA9PSBUcnVlIDoKIG8wb09vME9vbzBPID0gb3BlbiAoIE9vMG8wMDAwbzBvMCApIC4gcmVhZCAoICkKZWxzZSA6IG8wb09vME9vbzBPID0gWyBdCmlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG9vb09PT09PICkgPT0gVHJ1ZSA6CiBPTzAwTzBPME8wME9vID0gb3BlbiAoIG9vb09PT09PICkgLiByZWFkICggKQplbHNlIDogT08wME8wTzBPMDBPbyA9IFsgXQppZiAyNSAtIDI1OiBPT29vT09vICUgb08wT29vT29PIC0gb08wT29vT29PIC4gb08wT29vT29PCmlmIDMyIC0gMzI6IGkxSUlpIC4gTzAwb09vT29PMG8wTyAlIEkxaWkxMWlJaTExaSAuIE9Pb29PT28KaWYgNDIgLSA0MjogSUkgKyBJMTFpCmRlZiBPT29PMDAwTzBPTyAoIHRleHQgKSA6CiB0cnkgOgogIGltcG9ydCB4Ym1jICwgeGJtY2d1aSAsIHhibWNhZGRvbiAsIHhibWN2ZnMKICBpZiAyMyAtIDIzOiBpMTFpSWlpSWlpICsgbzBPbwogIGlmIDY4IC0gNjg6IG9PMG8gLiBJaTFJIC4gaTExaUlpaUlpaQogIElJaUkgPSAnTkpNIFNvY2NlcicKICBpZiAyMiAtIDIyOiBvT28wTzBPb28gJSBPMG9vME9PMAogIGlkID0gMTAxNDcKICBpZiA4NCAtIDg0OiBpMTFpSWlpSWlpIC4gT09vb09PbwogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICdBY3RpdmF0ZVdpbmRvdyglZCknICUgaWQgKQogIHhibWMgLiBzbGVlcCAoIDEwMCApCiAgaWYgMTAwIC0gMTAwOiBPMG9vME9PMCAtIE8wb28wT08wIC0gSUkKICBpaTEgPSB4Ym1jZ3VpIC4gV2luZG93ICggaWQgKQogIGlmIDU3IC0gNTc6IE8wb28wT08wICUgT29vb29vb29PTwogIGlmIDYxIC0gNjE6IE9vMG9vTzBvbzBvTyAuIGlJaWkxSTExSTFJSTEgKiBvME9vIC4gaTExSWkxMUkxSWkxaSAlIG9PbzBPME9vbwogIGlmIDcyIC0gNzI6IGlpaTFJMUkKICBvME9vMDBPT09PTyA9IDUwCiAgd2hpbGUgKCBvME9vMDBPT09PTyA+IDAgKSA6CiAgIHRyeSA6CiAgICB4Ym1jIC4gc2xlZXAgKCAxMCApCiAgICBpaTEgLiBnZXRDb250cm9sICggMSApIC4gc2V0TGFiZWwgKCBJSWlJICkKICAgIGlpMSAuIGdldENvbnRyb2wgKCA1ICkgLiBzZXRUZXh0ICggdGV4dCApCiAgICBvME9vMDBPT09PTyA9IDAKICAgZXhjZXB0IDoKICAgIG8wT28wME9PT09PIC09IDEKICAgIGlmIDg1IC0gODU6IGkxMUlpMTFJMUlpMWkgLiBPbzBvb08wb28wb08gLSBJMWlpMTFpSWkxMWkgJSBpMTFJaTExSTFJaTFpICUgb08wT29vT29PCiAgcmV0dXJuIGlkCiBleGNlcHQgOgogIHJldHVybiBpZAogIGlmIDgxIC0gODE6IEkxaWkxMWlJaTExaSArIG9PME9vb09vTyAlIE9vMG9vTzBvbzBvTyAqIE8wCiAgaWYgODkgLSA4OTogSWkxSSArIG9PbzBPME9vbwogIGlmIDMgLSAzOiBpMUlJaSAvIG8wT28gJSBPMDBvT29Pb08wbzBPICogaTExaUlpaUlpaSAvIE8wICogTzAwb09vT29PMG8wTwpkZWYgSUlJMWlpMWlJSSAoIHN0cmluZyApIDoKIyAgICBpZiBkZWJ1ZyA9PSAndHJ1ZSc6CiBpZiBJMUlpID09ICdmYWxzZScgOgogIHhibWMgLiBsb2cgKCAiW2FkZG9uLmxpdmUuTkpNU29jY2VycjMtJXNdOiAlcyIgJSAoIE9vb28wMDAwICwgc3RyaW5nICkgKQogIGlmIDU0IC0gNTQ6IG8wT28gJSBvTzBPb29Pb08gJSBvTzBPb29Pb08KICBpZiAxMyAtIDEzOiBPT29vT09vIC4gTzBvbzBPTzAKZGVmIGkxMUlpaWkgKCBpMUlpMTFpMTEgKSA6CiBpZiBpMUlpMTFpMTEgOgogIHJldHVybiBvTzBvMG8wb29PMG9PICggaTFJaTExaTExICUgMjU2ICkgKyBpMTFJaWlpICggaTFJaTExaTExIC8vIDI1NiApCiBlbHNlIDoKICByZXR1cm4gIiIKICBpZiAyMyAtIDIzOiBPT29vT09vIC4gb08wT29vT29PCmRlZiBPbzBPME9PT29vICggaGVhZGVycyAsIGlsSWkxMWkxMSA9IE5vbmUgKSA6CiBpZiA5NSAtIDk1OiBJMWlpMTFpSWkxMWkgJSBJaTFJIC4gTzAKIGlmIDE1IC0gMTU6IGkxMUlpMTFJMUlpMWkgLyBPMG9vME9PMCAuIE8wb28wT08wIC0gaTFJSWkKIHRyeSA6CiAgaWYgaWxJaTExaTExIGlzIE5vbmUgOgogICBpbElpMTFpMTEgPSB7IGkxMUlpaWkgKCA1NDk4MzA5NjA3NzY3NTUxNDgwNTk0NzcgKSA6IGkxMUlpaWkgKCAxMTU4NzE0OTcyMTk5MTUgKSB9CiAgbzAwb09PMCA9IHVybGxpYjIgLiBSZXF1ZXN0ICggaGVhZGVycyAsIE5vbmUgLCBpbElpMTFpMTEgKQogIG9Pb28gPSB1cmxsaWIyIC4gdXJsb3BlbiAoIG8wMG9PTzAgKQogIGlJaWkxMUkgPSBvT29vIC4gcmVhZCAoICkKICBvT29vIC4gY2xvc2UgKCApCiAgcmV0dXJuIGlJaWkxMUkKIGV4Y2VwdCB1cmxsaWIyIC4gVVJMRXJyb3IgLCBPT08wT09PMDBvbyA6CiAgSUlJMWlpMWlJSSAoICdVUkw6ICcgKQogIGlmIGhhc2F0dHIgKCBPT08wT09PMDBvbyAsICdjb2RlJyApIDoKICAgSUlJMWlpMWlJSSAoICdXZSBmYWlsZWQgd2l0aCBlcnJvciBjb2RlIC0gJXMuJyAlIE9PTzBPT08wMG9vIC4gY29kZSApCiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihOSk1Tb2NjZXIsV2UgZmFpbGVkIHdpdGggZXJyb3IgY29kZSAtICIgKyBzdHIgKCBPT08wT09PMDBvbyAuIGNvZGUgKSArICIsMTAwMDAsIiArIG9PICsgIikiICkKICBlbGlmIGhhc2F0dHIgKCBPT08wT09PMDBvbyAsICdyZWFzb24nICkgOgogICBJSUkxaWkxaUlJICggJ1dlIGZhaWxlZCB0byByZWFjaCBhIHNlcnZlci4nICkKICAgSUlJMWlpMWlJSSAoICdSZWFzb246ICVzJyAlIE9PTzBPT08wMG9vIC4gcmVhc29uICkKICAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKE5KTVNvY2NlcixXZSBmYWlsZWQgdG8gcmVhY2ggYSBzZXJ2ZXIuIC0gIiArIHN0ciAoIE9PTzBPT08wMG9vIC4gcmVhc29uICkgKyAiLDEwMDAwLCIgKyBvTyArICIpIiApCiAgIGlmIDMxIC0gMzE6IG9PME9vb09vTyAtIGlpaTFJMUkgLiBJSSAlIG9PMG8gLSBPMAogICBpZiA0IC0gNDogb08wT29vT29PIC8gaTExSWkxMUkxSWkxaSAuIE9vMG9vTzBvbzBvTwogICBpZiA1OCAtIDU4OiBpaWkxSTFJICogaTExaUlpaUlpaSAvIG9PMG8gJSBJSSAtIEkxMWkgLyBJaTFJCmRlZiBpaTExaTEgKCB2YXIxICkgOgogaWYgMjkgLSAyOTogSTExaSAlIG8wT28gKyBpMTFJaTExSTFJaTFpIC8gT09vb09PbyArIGlpaTFJMUkgKiBPT29vT09vCiB4Ym1jZ3VpIC4gRGlhbG9nICggKSAuIG9rICggJ05KTVNvY2NlcicgLCB2YXIxICkKIGlmIDQyIC0gNDI6IE8wb28wT08wICsgSWkxSQogaWYgNzYgLSA3NjogSUkgLSBJMWlpMTFpSWkxMWkKZGVmIG9Pb29PT28wME9vME8gKCApIDoKIGlmIDcyIC0gNzI6IE9vMG9vTzBvbzBvTyAvIGkxSUlpICogb09vME8wT29vIC0gSUkKIGlmIDUxIC0gNTE6IG9PME9vb09vTyAqIEkxaWkxMWlJaTExaSAlIE9Pb29PT28gKiBvTzBPb29Pb08gJSBJMTFpIC8gaTExSWkxMUkxSWkxaQogaUlJSUlpaTEgKCAnU2VhcmNoJyAsICdTZWFyY2gnICwgNDAgLCAnaHR0cDovL3M1LnBvc3RpbWcub3JnL2NhYXBpZzFyYi9zZWFyY2guanBnJyAsIGkxaWlJSWlpSTExMSAsICcnICwgJycgLCAnJyAsICcnICkKIGlmIDU4IC0gNTg6IGkxMWlJaWlJaWkgJSBPMDBvT29Pb08wbzBPCiBpZiA3MSAtIDcxOiBpaWkxSTFJICsgaTExSWkxMUkxSWkxaSAlIGkxMWlJaWlJaWkgKyBJMTFpIC0gSTFpMWlJMWkKIGlJaWkxMUkgPSBPbzBPME9PT29vICggaTExSWlpaSAoIDI3MzUzNTk4MjQwNjYyNDI5MzY3NjQ5NjA2NTA4NDM3MTIzMzk5NTI2NDg2NzA3NjcyNzY1NTY4OTgzNTE2MjEyNDQwMzg1MjEyNjAzMzM2MDU5MzU4NzIxMDYxODI0NDI0NzM2MDQ4MTAzMTI3MiApICkKIGlmIDg4IC0gODg6IG9PMG8gLSBJMWlpMTFpSWkxMWkgJSBpaWkxSTFJCiBpSTFJMTExSWkxMTFpID0gdHJhbnNsYXRlICggaTExSWlpaSAoIDE2ODcwMzE2MTQwNTk0NzUwNTkxOTExMzgyOTUwOTAyNzU3NjY1NjgxMTQzMjE3Nzc3OSApICkKIGlmIDcgLSA3OiBpMTFJaTExSTFJaTFpICogSTFpaTExaUlpMTFpICUgSWkxSSAuIEkxaTFpSTFpCiB0cnkgOgogIGlJaWkxMUkgLiByZXBsYWNlICggJ1xuJyAsICcnICkgLiByZXBsYWNlICggJ1xyJyAsICcnICkKICBJaTFpSWlJSTFpaTEgPSBpMTFJaWlpICggMTE2OTIxMDM2MTYzMDgyMjA3OTM5MDk4MTA5ODUxMDkxOTQ4MjY4NDkgKQogIGlmIDYyIC0gNjI6IGlJaWkxSTExSTFJSTEgKiBvTzBvCiAgaTEgPSByZSAuIGNvbXBpbGUgKCBJaTFpSWlJSTFpaTEgKSAuIGZpbmRhbGwgKCBpSWlpMTFJICkKICBpZiA5MSAtIDkxOiBJMWlpMTFpSWkxMWkgLiBJMTFpICsgSTFpaTExaUlpMTFpIC0gT28wb29PMG9vMG9PIC8gT29vb29vb29PTwogIGZvciBpSUkxIGluIGkxIDoKICAgaWYgMzAgLSAzMDogb08wT29vT29PIC0gaWlpMUkxSSAtIGkxMWlJaWlJaWkgJSBvTzBvIC0gb08wT29vT29PICogTzBvbzBPTzAKICAgZm9yIG9PMDBPME8wTyAsIGkxaWkxaWlJICwgTzBvME8wME9vMG8wIGluIG9zIC4gd2FsayAoIGlJMUkxMTFJaTExMWkgLCB0b3Bkb3duID0gVHJ1ZSApIDoKICAgIGlmIDg3IC0gODc6IGkxMUlpMTFJMUlpMWkgKiBvT28wTzBPb28gJSBpMTFpSWlpSWlpICUgb08wbyAtIGlpaTFJMUkKICAgIGZvciBPMG9vbzBPMG9vMCBpbiBpMWlpMWlpSSA6CiAgICAgaWYgOTEgLSA5MTogaUlpaTFJMTFJMUlJMSArIElJCiAgICAgdHJ5IDoKICAgICAgaTFpID0geGJtYyAuIHRyYW5zbGF0ZVBhdGggKCBvcyAuIHBhdGggLiBqb2luICggaUkxSTExMUlpMTExaSAsIE8wb29vME8wb28wICwgaTExSWlpaSAoIDIwMDAxMzY0NjU3NTk4MjExMjg4MDEgKSApICkgOwogICAgICBpZiA0NiAtIDQ2OiBJSSAlIE8wMG9Pb09vTzBvME8gKyBJMWlpMTFpSWkxMWkgLiBvTzBvIC4gSTFpaTExaUlpMTFpCiAgICAgIHdpdGggb3BlbiAoIGkxaSAsICdyJyApIGFzIG9PMDBvMCA6CiAgICAgICBPT29vME8gPSBvTzAwbzAgLiByZWFkICggKQogICAgICAgaWYgNjcgLSA2NzogaTExaUlpaUlpaSAtIGkxSUlpICUgSTExaSAuIE8wCiAgICAgIGlmIGlJSTEgaW4gT09vbzBPIDoKICAgICAgIGlmIDc3IC0gNzc6IEkxaTFpSTFpIC8gbzBPbwogICAgICAgaWkxMWkxICggaTExSWlpaSAoIDE5MjYxOTMyOTY2MzE2MDAxODI0NDE5ODM2NzM1MzkxOTk3NTQyNjQ0NjExMzM1NzY5OTMwODQ4MDU3NTM1NzE3MDEyOTA3MjQ0OTA2ODgxNDQyMzEyNDczMzM1MzM4OTYxNjA2MTA3OTYwMTAwNDIwODg5NTYyNTc1NTc0NTI2ODY1MjUwNDEyNzU3MjAxNzU4MTI2NjkyNDQ1NTA4NjQ2NTU3OTQ3NTY4MTU2NTIzOTk2MDkxOSApICkKICAgICAgIGlmIDE1IC0gMTU6IEkxaTFpSTFpIC4gaUlpaTFJMTFJMUlJMSAuIE9vb29vb29vT08gLyBpMTFpSWlpSWlpIC0gTzBvbzBPTzAgLiBpMUlJaQogICAgICAgaWkxMWkxICggaTExSWlpaSAoIDE0Nzk2ODM4OTY3NDYxOTc3NjI0NDQ1NzI4MDcwNTU2MjcyMDY1Njk1NzEwMzk5NjA5NzYyNTA4OTUwMjcwNTA4ODExODI4MjE3NzQzMTc4ODk1MDE5NDQ5MDI4ODg1NjY1MjEyODM2NTIzMjg1MjQ4NzY5MDA2MzYxODM0MjU4MDAwNzAxMDkzNzMxMzUyNDEzODg0Mjk5NjA3NzcgKSArIGlJSTEgKQogICAgICAgaWYgMzMgLSAzMzogTzAwb09vT29PMG8wTyAuIE9Pb29PT28KICAgICAgIGlpMTFpMSAoIGkxMUlpaWkgKCA0MDU3OTIwNTc1NTk5MDk4MDcyODA2ODMzMjc3NjY2MjU4NjUyOTM1NzYzMjU1NTY4OTAxMDM2NTU3Nzk2MjcyNDQ3MjYxMTQ4MDQyMTYxODIwMzA3MTA3NDI2OTM5MTM1OTA4MDk5MDI5MTQzNTUxNzg4MjU3NTAxNzM5NzkxMzk2MjYxMjgxMTg4ODQ1NDU0Mjc5NDYwNDY4MTY1MTI2NSApICkKICAgICAgIGlmIDc1IC0gNzU6IE9Pb29PT28gJSBPT29vT09vIC4gSUkKICAgICAgIGlmIHhibWNndWkgLiBEaWFsb2cgKCApIC4geWVzbm8gKCBpMTFJaWlpICggMjExMDIzNDYxNjc1MzIwNDA1NDYwNiApICwgaTExSWlpaSAoIDY2NjY0Njk3NDE2NzEyOTA5NzA2OTIzOTI5NDk4ODM5MDU4OTMyMjc3MTIzODMwNjYzMzU1MjU4OTIyNjI1NTUyMjEgKSAsICIiICwgIiIgLCBpMTFJaWlpICggMTk1MzA2ODM2OSApICwgaTExSWlpaSAoIDIwMDAwNTgwMTEyMjg1OTExODk1ODkgKSApIDoKICAgICAgICBpZiA1IC0gNTogT09vb09PbyAqIGkxMUlpMTFJMUlpMWkgKyBvTzBvIC4gaWlpMUkxSSArIG9PMG8KICAgICAgICBzaHV0aWwgLiBybXRyZWUgKCBvcyAuIHBhdGggLiBqb2luICggb08wME8wTzBPICwgTzBvb28wTzBvbzAgKSApCiAgICAgICAgaWYgOTEgLSA5MTogTzAKICAgICAgIGVsc2UgOgogICAgICAgIGlmIDYxIC0gNjE6IG9PME9vb09vTwogICAgICAgIHJldHVybiAoICkKICAgICAgICBpZiA2NCAtIDY0OiBpMTFJaTExSTFJaTFpIC8gb08wbyAtIE8wIC0gTzAwb09vT29PMG8wTwogICAgIGV4Y2VwdCA6CiAgICAgIGlmIDg2IC0gODY6IE8wMG9Pb09vTzBvME8gJSBvTzBvIC8gbzBPbyAvIG9PMG8KICAgICAgcGFzcwogZXhjZXB0IDoKICBwYXNzCiAgaWYgNDIgLSA0MjogSTFpaTExaUlpMTFpCiAgaWYgNjcgLSA2NzogSUkgLiBPbzBvb08wb28wb08gLiBPMAogIGlmIDEwIC0gMTA6IEkxMWkgJSBJMTFpIC0gaUlpaTFJMTFJMUlJMSAvIGlpaTFJMUkgKyBPMG9vME9PMAogT09PT29Pb28wTzBPMCAoIGkxMUlpaWkgKCA5OTQ3MTQzNDA0MTI4NTY0ODk4ODM5MDYyODc5Njk5MzgyNDQwNzQ3NDIzNTkyNzc1NTM1MDI5NDA2MTYzMTc4MTAzNzkyMjQyOTIzNzY3NjUyMDAyMzYxNjQxNTMwMDQ4NjM3NTI3OTUyNDAgKSAsICcnICkKIGlmIDg1IC0gODU6IElpMUkgJSBpMTFpSWlpSWlpIC0gT28wb29PMG9vMG9PICogT29vb29vb29PTyAvIG8wT28gJSBvME9vCiBpZiAxIC0gMTogSTFpaTExaUlpMTFpIC0gSWkxSSAuIE8wMG9Pb09vTzBvME8gLiBJMWlpMTFpSWkxMWkgLyBvT28wTzBPb28gKyBPMDBvT29Pb08wbzBPCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgNzggLSA3ODogTzAgLiBJaTFJIC4gb08wT29vT29PICUgaWlpMUkxSQogaWYgNDkgLSA0OTogTzBvbzBPTzAgLyBJMWlpMTFpSWkxMWkgLiBvTzBPb29Pb08KIGlmIDY4IC0gNjg6IGkxMWlJaWlJaWkgJSBJMTFpICsgaTExaUlpaUlpaQpkZWYgaWlpICggKSA6CiBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBPbzBvMDAwMG8wbzAgKSA9PSBUcnVlIDoKICBpSUlJSWlpMSAoICdGYXZvcml0ZXMnICwgJ3VybCcgLCA0ICwgb3MgLiBwYXRoIC4gam9pbiAoIEkxMSAsICdyZXNvdXJjZXMnICwgJ2Zhdm9yaXRlLnBuZycgKSAsIGkxaWlJSWlpSTExMSAsICcnICwgJycgLCAnJyAsICcnICkKIGlmIElpMUlJaWkxMSAuIGdldFNldHRpbmcgKCAiYnJvd3NlX3htbF9kYXRhYmFzZSIgKSA9PSAidHJ1ZSIgOgogIGlJSUlJaWkxICggJ1hNTCBEYXRhYmFzZScgLCAnaHR0cDovL3hibWNwbHVzLnhiLmZ1bnBpYy5kZS93d3ctZGF0YS9maWxlc3lzdGVtLycgLCAxNSAsIG9PICwgaTFpaUlJaWlJMTExICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgSWkxSUlpaTExIC4gZ2V0U2V0dGluZyAoICJicm93c2VfY29tbXVuaXR5IiApID09ICJ0cnVlIiA6CiAgaUlJSUlpaTEgKCAnQ29tbXVuaXR5IEZpbGVzJyAsICdjb21tdW5pdHlfZmlsZXMnICwgMTYgLCBvTyAsIGkxaWlJSWlpSTExMSAsICcnICwgJycgLCAnJyAsICcnICkKIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG9PbzBvb29vMDBvICkgPT0gVHJ1ZSA6CiAgaUlJSUlpaTEgKCAnU2VhcmNoIEhpc3RvcnknICwgJ2hpc3RvcnknICwgMjUgLCBvcyAuIHBhdGggLiBqb2luICggSTExICwgJ3Jlc291cmNlcycgLCAnZmF2b3JpdGUucG5nJyApICwgaTFpaUlJaWlJMTExICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgSWkxSUlpaTExIC4gZ2V0U2V0dGluZyAoICJzZWFyY2h5dCIgKSA9PSAidHJ1ZSIgOgogIGlJSUlJaWkxICggJ1NlYXJjaDpZb3V0dWJlJyAsICd5b3V0dWJlJyAsIDI1ICwgb08gLCBpMWlpSUlpaUkxMTEgLCAnJyAsICcnICwgJycgLCAnJyApCiBpZiBJaTFJSWlpMTEgLiBnZXRTZXR0aW5nICggInNlYXJjaERNIiApID09ICJ0cnVlIiA6CiAgaUlJSUlpaTEgKCAnU2VhcmNoOmRhaWx5bW90aW9uJyAsICdkbW90aW9uJyAsIDI1ICwgb08gLCBpMWlpSUlpaUkxMTEgLCAnJyAsICcnICwgJycgLCAnJyApCiBpZiBJaTFJSWlpMTEgLiBnZXRTZXR0aW5nICggIlB1bHNhck0iICkgPT0gInRydWUiIDoKICBpSUlJSWlpMSAoICdQdWxzYXI6SU1EQicgLCAnSU1EQmlkcGxheScgLCAyNyAsIG9PICwgaTFpaUlJaWlJMTExICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgb3MgLiBwYXRoIC4gZXhpc3RzICggb29vT09PT08gKSA9PSBUcnVlIDoKICBJSTFJID0ganNvbiAuIGxvYWRzICggb3BlbiAoIG9vb09PT09PICwgInIiICkgLiByZWFkICggKSApCiAgaWYgbGVuICggSUkxSSApID4gMSA6CiAgIGZvciBPMGkxSUkxSWlpaTFJMTEgaW4gSUkxSSA6CiAgICBpZiA5IC0gOTogSTExaSAvIG9PbzBPME9vbyAtIG8wT28gLyBPb29vb29vb09PIC8gaUlpaTFJMTFJMUlJMSAtIE9Pb29PT28KICAgIGlmIGlzaW5zdGFuY2UgKCBPMGkxSUkxSWlpaTFJMTEgLCBsaXN0ICkgOgogICAgIGlJSUlJaWkxICggTzBpMUlJMUlpaWkxSTExIFsgMCBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgTzBpMUlJMUlpaWkxSTExIFsgMSBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIG9PICwgaTFpaUlJaWlJMTExICwgJycgLCAnJyAsICcnICwgJycgLCAnc291cmNlJyApCiAgICBlbHNlIDoKICAgICBvMDBvb29PME9vID0gb08KICAgICBvME8wT09PME9vbyA9IGkxaWlJSWlpSTExMQogICAgIGlpSWlJID0gJycKICAgICBJMSA9ICcnCiAgICAgY3JlZGl0cyA9ICcnCiAgICAgT09PMDBPME8gPSAnJwogICAgIGlmIE8waTFJSTFJaWlpMUkxMSAuIGhhc19rZXkgKCAndGh1bWJuYWlsJyApIDoKICAgICAgbzAwb29vTzBPbyA9IE8waTFJSTFJaWlpMUkxMSBbICd0aHVtYm5haWwnIF0KICAgICBpZiBPMGkxSUkxSWlpaTFJMTEgLiBoYXNfa2V5ICggJ2ZhbmFydCcgKSA6CiAgICAgIG8wTzBPT08wT29vID0gTzBpMUlJMUlpaWkxSTExIFsgJ2ZhbmFydCcgXQogICAgIGlmIE8waTFJSTFJaWlpMUkxMSAuIGhhc19rZXkgKCAnZGVzY3JpcHRpb24nICkgOgogICAgICBpaUlpSSA9IE8waTFJSTFJaWlpMUkxMSBbICdkZXNjcmlwdGlvbicgXQogICAgIGlmIE8waTFJSTFJaWlpMUkxMSAuIGhhc19rZXkgKCAnZGF0ZScgKSA6CiAgICAgIEkxID0gTzBpMUlJMUlpaWkxSTExIFsgJ2RhdGUnIF0KICAgICBpZiBPMGkxSUkxSWlpaTFJMTEgLiBoYXNfa2V5ICggJ2dlbnJlJyApIDoKICAgICAgT09PMDBPME8gPSBPMGkxSUkxSWlpaTFJMTEgWyAnZ2VucmUnIF0KICAgICBpZiBPMGkxSUkxSWlpaTFJMTEgLiBoYXNfa2V5ICggJ2NyZWRpdHMnICkgOgogICAgICBjcmVkaXRzID0gTzBpMUlJMUlpaWkxSTExIFsgJ2NyZWRpdHMnIF0KICAgICBpSUlJSWlpMSAoIE8waTFJSTFJaWlpMUkxMSBbICd0aXRsZScgXSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIE8waTFJSTFJaWlpMUkxMSBbICd1cmwnIF0gLiBlbmNvZGUgKCAndXRmLTgnICkgLCAxICwgbzAwb29vTzBPbyAsIG8wTzBPT08wT29vICwgaWlJaUkgLCBPT08wME8wTyAsIEkxICwgY3JlZGl0cyAsICdzb3VyY2UnICkKICAgICBpZiAzMyAtIDMzOiBPMCAuIEkxaTFpSTFpIC4gbzBPbwogIGVsc2UgOgogICBpZiBsZW4gKCBJSTFJICkgPT0gMSA6CiAgICBpZiBpc2luc3RhbmNlICggSUkxSSBbIDAgXSAsIGxpc3QgKSA6CiAgICAgT09PT29Pb28wTzBPMCAoIElJMUkgWyAwIF0gWyAxIF0gLiBlbmNvZGUgKCAndXRmLTgnICkgLCBpMWlpSUlpaUkxMTEgKQogICAgZWxzZSA6CiAgICAgT09PT29Pb28wTzBPMCAoIElJMUkgWyAwIF0gWyAndXJsJyBdICwgSUkxSSBbIDAgXSBbICdmYW5hcnQnIF0gKQogICAgIGlmIDcyIC0gNzI6IGkxSUlpIC8gSTFpaTExaUlpMTFpICsgT29vb29vb29PTyAtIG9PbzBPME9vbwogICAgIGlmIDI5IC0gMjk6IEkxMWkgKyBJaTFJICUgTzAKZGVmIEkxSTExICggdXJsID0gTm9uZSApIDoKIGlmIHVybCBpcyBOb25lIDoKICBpZiBub3QgSWkxSUlpaTExIC4gZ2V0U2V0dGluZyAoICJuZXdfZmlsZV9zb3VyY2UiICkgPT0gIiIgOgogICBJSTEgPSBJaTFJSWlpMTEgLiBnZXRTZXR0aW5nICggJ25ld19maWxlX3NvdXJjZScgKSAuIGRlY29kZSAoICd1dGYtOCcgKQogIGVsaWYgbm90IElpMUlJaWkxMSAuIGdldFNldHRpbmcgKCAibmV3X3VybF9zb3VyY2UiICkgPT0gIiIgOgogICBJSTEgPSBJaTFJSWlpMTEgLiBnZXRTZXR0aW5nICggJ25ld191cmxfc291cmNlJyApIC4gZGVjb2RlICggJ3V0Zi04JyApCiBlbHNlIDoKICBJSTEgPSB1cmwKIGlmIElJMSA9PSAnJyBvciBJSTEgaXMgTm9uZSA6CiAgcmV0dXJuCiBJSUkxaWkxaUlJICggJ0FkZGluZyBOZXcgU291cmNlOiAnICsgSUkxIC4gZW5jb2RlICggJ3V0Zi04JyApICkKIGlmIDcwIC0gNzA6IElJIC0gb09vME8wT29vIC8gTzBvbzBPTzAKIE8wME9PT09Pb28wID0gTm9uZQogaUlpaTExSSA9IGlpMUkxaUkxaUlpMTExaSAoIElJMSApCiBpZiBpc2luc3RhbmNlICggaUlpaTExSSAsIEJlYXV0aWZ1bFNPQVAgKSA6CiAgaWYgaUlpaTExSSAuIGZpbmQgKCAnY2hhbm5lbHNfaW5mbycgKSA6CiAgIE8wME9PT09Pb28wID0gaUlpaTExSSAuIGNoYW5uZWxzX2luZm8KICBlbGlmIGlJaWkxMUkgLiBmaW5kICggJ2l0ZW1zX2luZm8nICkgOgogICBPMDBPT09PT29vMCA9IGlJaWkxMUkgLiBpdGVtc19pbmZvCiBpZiBPMDBPT09PT29vMCA6CiAgaWlJaTFJSWkxSSA9IHsgfQogIGlpSWkxSUlpMUkgWyAndXJsJyBdID0gSUkxCiAgdHJ5IDogaWlJaTFJSWkxSSBbICd0aXRsZScgXSA9IE8wME9PT09Pb28wIC4gdGl0bGUgLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiAgdHJ5IDogaWlJaTFJSWkxSSBbICd0aHVtYm5haWwnIF0gPSBPMDBPT09PT29vMCAuIHRodW1ibmFpbCAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICB0cnkgOiBpaUlpMUlJaTFJIFsgJ2ZhbmFydCcgXSA9IE8wME9PT09Pb28wIC4gZmFuYXJ0IC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6IGlpSWkxSUlpMUkgWyAnZ2VucmUnIF0gPSBPMDBPT09PT29vMCAuIGdlbnJlIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6IGlpSWkxSUlpMUkgWyAnZGVzY3JpcHRpb24nIF0gPSBPMDBPT09PT29vMCAuIGRlc2NyaXB0aW9uIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6IGlpSWkxSUlpMUkgWyAnZGF0ZScgXSA9IE8wME9PT09Pb28wIC4gZGF0ZSAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICB0cnkgOiBpaUlpMUlJaTFJIFsgJ2NyZWRpdHMnIF0gPSBPMDBPT09PT29vMCAuIGNyZWRpdHMgLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiBlbHNlIDoKICBpZiAnLycgaW4gSUkxIDoKICAgbzBPb09PMDAwb29PMCA9IElJMSAuIHNwbGl0ICggJy8nICkgWyAtIDEgXSAuIHNwbGl0ICggJy4nICkgWyAwIF0KICBpZiAnXFwnIGluIElJMSA6CiAgIG8wT29PTzAwMG9vTzAgPSBJSTEgLiBzcGxpdCAoICdcXCcgKSBbIC0gMSBdIC4gc3BsaXQgKCAnLicgKSBbIDAgXQogIGlmICclJyBpbiBvME9vT08wMDBvb08wIDoKICAgbzBPb09PMDAwb29PMCA9IHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIG8wT29PTzAwMG9vTzAgKQogIG8wbzBvMG9PMG9PTyA9IHhibWMgLiBLZXlib2FyZCAoIG8wT29PTzAwMG9vTzAgLCAnRGlzcGxheWVkIE5hbWUsIFJlbmFtZT8nICkKICBvMG8wbzBvTzBvT08gLiBkb01vZGFsICggKQogIGlmICggbzBvMG8wb08wb09PIC4gaXNDb25maXJtZWQgKCApID09IEZhbHNlICkgOgogICByZXR1cm4KICBpaTFJaTExSSA9IG8wbzBvMG9PMG9PTyAuIGdldFRleHQgKCApCiAgaWYgbGVuICggaWkxSWkxMUkgKSA9PSAwIDoKICAgcmV0dXJuCiAgaWlJaTFJSWkxSSA9IHsgfQogIGlpSWkxSUlpMUkgWyAndGl0bGUnIF0gPSBpaTFJaTExSQogIGlpSWkxSUlpMUkgWyAndXJsJyBdID0gSUkxCiAgaWlJaTFJSWkxSSBbICdmYW5hcnQnIF0gPSBvME8wT09PME9vbwogIGlmIDgwIC0gODA6IG9PME9vb09vTwogaWYgb3MgLiBwYXRoIC4gZXhpc3RzICggb29vT09PT08gKSA9PSBGYWxzZSA6CiAgTzBPID0gWyBdCiAgTzBPIC4gYXBwZW5kICggaWlJaTFJSWkxSSApCiAgaTFJMUkgPSBvcGVuICggb29vT09PT08gLCAidyIgKQogIGkxSTFJIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBPME8gKSApCiAgaTFJMUkgLiBjbG9zZSAoICkKIGVsc2UgOgogIElJMUkgPSBqc29uIC4gbG9hZHMgKCBvcGVuICggb29vT09PT08gLCAiciIgKSAuIHJlYWQgKCApICkKICBJSTFJIC4gYXBwZW5kICggaWlJaTFJSWkxSSApCiAgaTFJMUkgPSBvcGVuICggb29vT09PT08gLCAidyIgKQogIGkxSTFJIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBJSTFJICkgKQogIGkxSTFJIC4gY2xvc2UgKCApCiBJaTFJSWlpMTEgLiBzZXRTZXR0aW5nICggJ25ld191cmxfc291cmNlJyAsICIiICkKIElpMUlJaWkxMSAuIHNldFNldHRpbmcgKCAnbmV3X2ZpbGVfc291cmNlJyAsICIiICkKIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihOSk1Tb2NjZXIsTmV3IHNvdXJjZSBhZGRlZC4sNTAwMCwiICsgb08gKyAiKSIgKQogaWYgbm90IHVybCBpcyBOb25lIDoKICBpZiAneGJtY3BsdXMueGIuZnVucGljLmRlJyBpbiB1cmwgOgogICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Db250YWluZXIuVXBkYXRlKCVzP21vZGU9MTQscmVwbGFjZSkiICUgc3lzIC4gYXJndiBbIDAgXSApCiAgZWxpZiAnY29tbXVuaXR5LWxpbmtzJyBpbiB1cmwgOgogICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Db250YWluZXIuVXBkYXRlKCVzP21vZGU9MTAscmVwbGFjZSkiICUgc3lzIC4gYXJndiBbIDAgXSApCiBlbHNlIDogSWkxSUlpaTExIC4gb3BlblNldHRpbmdzICggKQogaWYgMTIgLSAxMjogaTExaUlpaUlpaSAvIEkxaWkxMWlJaTExaQogaWYgODAgLSA4MDogSUkgLiBpMTFpSWlpSWlpIC0gT09vb09PbwpkZWYgaUlpSUlpMSAoIG5hbWUgKSA6CiBJSTFJID0ganNvbiAuIGxvYWRzICggb3BlbiAoIG9vb09PT09PICwgInIiICkgLiByZWFkICggKSApCiBmb3IgSTFJSUlJMWkgaW4gcmFuZ2UgKCBsZW4gKCBJSTFJICkgKSA6CiAgaWYgaXNpbnN0YW5jZSAoIElJMUkgWyBJMUlJSUkxaSBdICwgbGlzdCApIDoKICAgaWYgSUkxSSBbIEkxSUlJSTFpIF0gWyAwIF0gPT0gbmFtZSA6CiAgICBkZWwgSUkxSSBbIEkxSUlJSTFpIF0KICAgIGkxSTFJID0gb3BlbiAoIG9vb09PT09PICwgInciICkKICAgIGkxSTFJIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBJSTFJICkgKQogICAgaTFJMUkgLiBjbG9zZSAoICkKICAgIGJyZWFrCiAgZWxzZSA6CiAgIGlmIElJMUkgWyBJMUlJSUkxaSBdIFsgJ3RpdGxlJyBdID09IG5hbWUgOgogICAgZGVsIElJMUkgWyBJMUlJSUkxaSBdCiAgICBpMUkxSSA9IG9wZW4gKCBvb29PT09PTyAsICJ3IiApCiAgICBpMUkxSSAuIHdyaXRlICgganNvbiAuIGR1bXBzICggSUkxSSApICkKICAgIGkxSTFJIC4gY2xvc2UgKCApCiAgICBicmVhawogeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuQ29udGFpbmVyLlJlZnJlc2giICkKIGlmIDIgLSAyOiBPMDBvT29Pb08wbzBPICsgTzBvbzBPTzAgLSBvME9vICUgT09vb09PbyAuIE9vMG9vTzBvbzBvTwogaWYgMTggLSAxODogaWlpMUkxSSArIE9vMG9vTzBvbzBvTyAtIE8wb28wT08wIC4gb08wT29vT29PICsgaTExaUlpaUlpaQogaWYgMjAgLSAyMDogSUkKZGVmIE9vMG9PMDBvICggdXJsICwgYnJvd3NlID0gRmFsc2UgKSA6CiBpZiB1cmwgaXMgTm9uZSA6CiAgdXJsID0gJ2h0dHA6Ly94Ym1jcGx1cy54Yi5mdW5waWMuZGUvd3d3LWRhdGEvZmlsZXN5c3RlbS8nCiBpMTFJMUlJMUkxMWkgPSBCZWF1dGlmdWxTb3VwICggT28wTzBPT09vbyAoIHVybCApICwgY29udmVydEVudGl0aWVzID0gQmVhdXRpZnVsU291cCAuIEhUTUxfRU5USVRJRVMgKQogZm9yIE8waTFJSTFJaWlpMUkxMSBpbiBpMTFJMUlJMUkxMWkgKCAnYScgKSA6CiAgT29vT29PTzAgPSBPMGkxSUkxSWlpaTFJMTEgWyAnaHJlZicgXQogIGlmIG5vdCBPb29Pb09PMCAuIHN0YXJ0c3dpdGggKCAnPycgKSA6CiAgIGlJMWkxMWlJSTExMSA9IE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZwogICBpZiBpSTFpMTFpSUkxMTEgbm90IGluIFsgJ1BhcmVudCBEaXJlY3RvcnknICwgJ3JlY3ljbGVfYmluLycgXSA6CiAgICBpZiBPb29Pb09PMCAuIGVuZHN3aXRoICggJy8nICkgOgogICAgIGlmIGJyb3dzZSA6CiAgICAgIGlJSUlJaWkxICggaUkxaTExaUlJMTExICwgdXJsICsgT29vT29PTzAgLCAxNSAsIG9PICwgbzBPME9PTzBPb28gLCAnJyAsICcnICwgJycgKQogICAgIGVsc2UgOgogICAgICBpSUlJSWlpMSAoIGlJMWkxMWlJSTExMSAsIHVybCArIE9vb09vT08wICwgMTQgLCBvTyAsIG8wTzBPT08wT29vICwgJycgLCAnJyAsICcnICkKICAgIGVsaWYgT29vT29PTzAgLiBlbmRzd2l0aCAoICcueG1sJyApIDoKICAgICBpZiBicm93c2UgOgogICAgICBpSUlJSWlpMSAoIGlJMWkxMWlJSTExMSAsIHVybCArIE9vb09vT08wICwgMSAsIG9PICwgbzBPME9PTzBPb28gLCAnJyAsICcnICwgJycgLCAnJyAsICdkb3dubG9hZCcgKQogICAgIGVsc2UgOgogICAgICBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBvb29PT09PTyApID09IFRydWUgOgogICAgICAgaWYgaUkxaTExaUlJMTExIGluIE9PMDBPME8wTzAwT28gOgogICAgICAgIGlJSUlJaWkxICggaUkxaTExaUlJMTExICsgJyAoaW4gdXNlKScgLCB1cmwgKyBPb29Pb09PMCAsIDExICwgb08gLCBvME8wT09PME9vbyAsICcnICwgJycgLCAnJyAsICcnICwgJ2Rvd25sb2FkJyApCiAgICAgICBlbHNlIDoKICAgICAgICBpSUlJSWlpMSAoIGlJMWkxMWlJSTExMSAsIHVybCArIE9vb09vT08wICwgMTEgLCBvTyAsIG8wTzBPT08wT29vICwgJycgLCAnJyAsICcnICwgJycgLCAnZG93bmxvYWQnICkKICAgICAgZWxzZSA6CiAgICAgICBpSUlJSWlpMSAoIGlJMWkxMWlJSTExMSAsIHVybCArIE9vb09vT08wICwgMTEgLCBvTyAsIG8wTzBPT08wT29vICwgJycgLCAnJyAsICcnICwgJycgLCAnZG93bmxvYWQnICkKICAgICAgIGlmIDE1IC0gMTU6IGkxMWlJaWlJaWkgJSBPMG9vME9PMCAuIG9PbzBPME9vbyArIEkxMWkKICAgICAgIGlmIDYxIC0gNjE6IG9PbzBPME9vbyAqIEkxMWkgJSBvT28wTzBPb28gLSBpMUlJaSAtIGlJaWkxSTExSTFJSTEKZGVmIG9Pb29PMCAoIGJyb3dzZSA9IEZhbHNlICkgOgogSWkxSTFJaSA9ICdodHRwOi8vY29tbXVuaXR5LWxpbmtzLmdvb2dsZWNvZGUuY29tL3N2bi90cnVuay8nCiBpMTFJMUlJMUkxMWkgPSBCZWF1dGlmdWxTb3VwICggT28wTzBPT09vbyAoIElpMUkxSWkgKSAsIGNvbnZlcnRFbnRpdGllcyA9IEJlYXV0aWZ1bFNvdXAgLiBIVE1MX0VOVElUSUVTICkKIE8wbzBPMDBPbzBvMCA9IGkxMUkxSUkxSTExaSAoICd1bCcgKSBbIDAgXSAoICdsaScgKSBbIDEgOiBdCiBmb3IgTzBpMUlJMUlpaWkxSTExIGluIE8wbzBPMDBPbzBvMCA6CiAgaUkxaTExaUlJMTExID0gTzBpMUlJMUlpaWkxSTExICggJ2EnICkgWyAwIF0gWyAnaHJlZicgXQogIGlmIGJyb3dzZSA6CiAgIGlJSUlJaWkxICggaUkxaTExaUlJMTExICwgSWkxSTFJaSArIGlJMWkxMWlJSTExMSAsIDEgLCBvTyAsIG8wTzBPT08wT29vICwgJycgLCAnJyAsICcnICwgJycgLCAnZG93bmxvYWQnICkKICBlbHNlIDoKICAgaUlJSUlpaTEgKCBpSTFpMTFpSUkxMTEgLCBJaTFJMUlpICsgaUkxaTExaUlJMTExICwgMTEgLCBvTyAsIG8wTzBPT08wT29vICwgJycgLCAnJyAsICcnICwgJycgLCAnZG93bmxvYWQnICkKICAgaWYgNjkgLSA2OTogbzBPbyAvIE9Pb29PT28gLiBJMWkxaUkxaSAqIElJICUgTzBvbzBPTzAgLSBPT29vT09vCiAgIGlmIDEzIC0gMTM6IE8wb28wT08wIC4gaTExaUlpaUlpaQpkZWYgaWkxSTFpSTFpSWkxMTFpICggdXJsICwgZGF0YSA9IE5vbmUgKSA6CiBpZiB1cmwgLiBzdGFydHN3aXRoICggJ2h0dHA6Ly8nICkgb3IgdXJsIC4gc3RhcnRzd2l0aCAoICdodHRwczovLycgKSA6CiAgZGF0YSA9IE9vME8wT09Pb28gKCB1cmwgKQogIGlmIDU2IC0gNTY6IEkxMWkgJSBPMCAtIG8wT28KICBpZiAxMDAgLSAxMDA6IE8wb28wT08wIC0gTzAgJSBJaTFJICogaWlpMUkxSSArIG8wT28KICBpZiA4OCAtIDg4OiBPb29vb29vb09PIC0gSTFpaTExaUlpMTFpICogTzAgKiBPb29vb29vb09PIC4gT29vb29vb29PTwogIGlmIHJlIC4gc2VhcmNoICggIiNFWFRNM1UiICwgZGF0YSApIG9yICdtM3UnIGluIHVybCA6CiAgIHJldHVybiBkYXRhCiAgIGlmIDMzIC0gMzM6IElJICsgT28wb29PMG9vMG9PICogSWkxSSAvIGlJaWkxSTExSTFJSTEgLSBvME9vCiBlbGlmIGRhdGEgPT0gTm9uZSA6CiAgaWYgeGJtY3ZmcyAuIGV4aXN0cyAoIHVybCApIDoKICAgaWYgdXJsIC4gc3RhcnRzd2l0aCAoICJzbWI6Ly8iICkgb3IgdXJsIC4gc3RhcnRzd2l0aCAoICJuZnM6Ly8iICkgOgogICAgTzBvTyA9IHhibWN2ZnMgLiBjb3B5ICggdXJsICwgb3MgLiBwYXRoIC4gam9pbiAoIGkxMSAsICd0ZW1wJyAsICdzb3JjZV90ZW1wLnR4dCcgKSApCiAgICBpZiBPMG9PIDoKICAgICBkYXRhID0gb3BlbiAoIG9zIC4gcGF0aCAuIGpvaW4gKCBpMTEgLCAndGVtcCcgLCAnc29yY2VfdGVtcC50eHQnICkgLCAiciIgKSAuIHJlYWQgKCApCiAgICAgeGJtY3ZmcyAuIGRlbGV0ZSAoIG9zIC4gcGF0aCAuIGpvaW4gKCBpMTEgLCAndGVtcCcgLCAnc29yY2VfdGVtcC50eHQnICkgKQogICAgZWxzZSA6CiAgICAgSUlJMWlpMWlJSSAoICJmYWlsZWQgdG8gY29weSBmcm9tIHNtYjoiICkKICAgZWxzZSA6CiAgICBkYXRhID0gb3BlbiAoIHVybCAsICdyJyApIC4gcmVhZCAoICkKICAgIGlmIHJlIC4gbWF0Y2ggKCAiI0VYVE0zVSIgLCBkYXRhICkgb3IgJ20zdScgaW4gdXJsIDoKICAgICByZXR1cm4gZGF0YQogIGVsc2UgOgogICBJSUkxaWkxaUlJICggIlNvdXAgRGF0YSBub3QgZm91bmQhIiApCiAgIHJldHVybgogcmV0dXJuIEJlYXV0aWZ1bFNPQVAgKCBkYXRhICwgY29udmVydEVudGl0aWVzID0gQmVhdXRpZnVsU3RvbmVTb3VwIC4gWE1MX0VOVElUSUVTICkKIGlmIDczIC0gNzM6IEkxMWkgKiBpMTFpSWlpSWlpICUgSWkxSSAuIEkxMWkKIGlmIDY2IC0gNjY6IElpMUkgKyBJaTFJICsgaTExSWkxMUkxSWkxaSAvIE9vMG9vTzBvbzBvTyArIGlpaTFJMUkKIGlmIDMwIC0gMzA6IE8wCiBpZiA0NCAtIDQ0OiBJaTFJIC8gTzAwb09vT29PMG8wTyAvIE8wMG9Pb09vTzBvME8KZGVmIE9PT09vT29vME8wTzAgKCB1cmwgLCBmYW5hcnQgKSA6CiBPT08gPSAiTGlzdCIKIGlmIDMyIC0gMzI6IGkxSUlpIC8gb08wT29vT29PIC4gb09vME8wT29vCiBpMTFJMUlJMUkxMWkgPSBpaTFJMWlJMWlJaTExMWkgKCB1cmwgKQogaWYgaXNpbnN0YW5jZSAoIGkxMUkxSUkxSTExaSAsIEJlYXV0aWZ1bFNPQVAgKSA6CiAgaWYgbGVuICggaTExSTFJSTFJMTFpICggJ2xheW91dHlwZScgKSApID4gMCA6CiAgIE9PTyA9ICJUaHVtYm5haWwiCiAgIGlmIDYyIC0gNjI6IE9vb29vb29vT08gKiBvME9vCiAgaWYgbGVuICggaTExSTFJSTFJMTFpICggJ2NoYW5uZWxzJyApICkgPiAwIDoKICAgaWYgNTggLSA1ODogb08wbyAlIE9Pb29PT28KICAgaWYgNTAgLSA1MDogSUkgLiBPT29vT09vCiAgIG9vTzBPTyA9IGkxMUkxSUkxSTExaSAoICdjaGFubmVsJyApCiAgIGZvciBPMDAwT09PIGluIG9vTzBPTyA6CiAgICBpZiAyMCAtIDIwOiBPT29vT09vIC4gb08wT29vT29PICUgaWlpMUkxSSAqIGlJaWkxSTExSTFJSTEKICAgIG9PMDBvT09vb29PID0gJycKICAgIElpSWkxMWlJID0gMAogICAgdHJ5IDoKICAgICBvTzAwb09Pb29vTyA9IE8wMDBPT08gKCAnZXh0ZXJuYWxsaW5rJyApIFsgMCBdIC4gc3RyaW5nCiAgICAgSWlJaTExaUkgPSBsZW4gKCBPMDAwT09PICggJ2V4dGVybmFsbGluaycgKSApCiAgICBleGNlcHQgOiBwYXNzCiAgICBpZiA4MyAtIDgzOiBvTzBPb29Pb08gJSBvT28wTzBPb28gJSBpMTFJaTExSTFJaTFpICUgSTExaQogICAgaWYgSWlJaTExaUkgPiAxIDogb08wMG9PT29vb08gPSAnJwogICAgaWYgODAgLSA4MDogaTExaUlpaUlpaSAlIGkxMUlpMTFJMUlpMWkgKyBPMG9vME9PMCAlIE8wMG9Pb09vTzBvME8gLSBJMTFpCiAgICBpZiAxOCAtIDE4OiBPbzBvb08wb28wb08gLSBpaWkxSTFJIC4gSUkgLiBpSWlpMUkxMUkxSUkxCiAgICBpZiAyIC0gMjogaWlpMUkxSSAuIEkxaWkxMWlJaTExaQogICAgaUkxaTExaUlJMTExID0gTzAwME9PTyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nCiAgICBPMG9vb29PT29vME8gPSBPMDAwT09PICggJ3RodW1ibmFpbCcgKSBbIDAgXSAuIHN0cmluZwogICAgaWYgTzBvb29vT09vbzBPID09IE5vbmUgOgogICAgIE8wb29vb09Pb28wTyA9ICcnCiAgICAgaWYgMzYgLSAzNjogSWkxSSAlIElpMUkgJSBpMUlJaSAvIGkxSUlpIC0gaTExSWkxMUkxSWkxaQogICAgdHJ5IDoKICAgICBpZiBub3QgTzAwME9PTyAoICdmYW5hcnQnICkgOgogICAgICBpZiBJaTFJSWlpMTEgLiBnZXRTZXR0aW5nICggJ3VzZV90aHVtYicgKSA9PSAidHJ1ZSIgOgogICAgICAgaTFpSSA9IE8wb29vb09Pb28wTwogICAgICBlbHNlIDoKICAgICAgIGkxaUkgPSBmYW5hcnQKICAgICBlbHNlIDoKICAgICAgaTFpSSA9IE8wMDBPT08gKCAnZmFuYXJ0JyApIFsgMCBdIC4gc3RyaW5nCiAgICAgaWYgaTFpSSA9PSBOb25lIDoKICAgICAgcmFpc2UKICAgIGV4Y2VwdCA6CiAgICAgaTFpSSA9IGZhbmFydAogICAgIGlmIDk0IC0gOTQ6IGlJaWkxSTExSTFJSTEgLyBvT28wTzBPb28gJSBPbzBvb08wb28wb08gKiBPbzBvb08wb28wb08gKiBvTzBPb29Pb08KICAgIHRyeSA6CiAgICAgaWlJaUkgPSBPMDAwT09PICggJ2luZm8nICkgWyAwIF0gLiBzdHJpbmcKICAgICBpZiBpaUlpSSA9PSBOb25lIDoKICAgICAgcmFpc2UKICAgIGV4Y2VwdCA6CiAgICAgaWlJaUkgPSAnJwogICAgIGlmIDI5IC0gMjk6IEkxaWkxMWlJaTExaSArIG9PMG8gLyBPT29vT09vIC8gaWlpMUkxSSAqIGlJaWkxSTExSTFJSTEKICAgIHRyeSA6CiAgICAgT09PMDBPME8gPSBPMDAwT09PICggJ2dlbnJlJyApIFsgMCBdIC4gc3RyaW5nCiAgICAgaWYgT09PMDBPME8gPT0gTm9uZSA6CiAgICAgIHJhaXNlCiAgICBleGNlcHQgOgogICAgIE9PTzAwTzBPID0gJycKICAgICBpZiA2MiAtIDYyOiBpaWkxSTFJIC8gSWkxSSAtIEkxaWkxMWlJaTExaSAuIE8wMG9Pb09vTzBvME8KICAgIHRyeSA6CiAgICAgSTEgPSBPMDAwT09PICggJ2RhdGUnICkgWyAwIF0gLiBzdHJpbmcKICAgICBpZiBJMSA9PSBOb25lIDoKICAgICAgcmFpc2UKICAgIGV4Y2VwdCA6CiAgICAgSTEgPSAnJwogICAgIGlmIDExIC0gMTE6IEkxMWkgLiBJMWlpMTFpSWkxMWkgKiBJMWkxaUkxaSAqIE9vb29vb29vT08gKyBpMTFJaTExSTFJaTFpCiAgICB0cnkgOgogICAgIGNyZWRpdHMgPSBPMDAwT09PICggJ2NyZWRpdHMnICkgWyAwIF0gLiBzdHJpbmcKICAgICBpZiBjcmVkaXRzID09IE5vbmUgOgogICAgICByYWlzZQogICAgZXhjZXB0IDoKICAgICBjcmVkaXRzID0gJycKICAgICBpZiAzMyAtIDMzOiBPMCAqIE9Pb29PT28gLSBJSSAlIElJCiAgICB0cnkgOgogICAgIGlmIG9PMDBvT09vb29PID09ICcnIDoKICAgICAgaUlJSUlpaTEgKCBpSTFpMTFpSUkxMTEgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSAsIHVybCAuIGVuY29kZSAoICd1dGYtOCcgKSAsIDIgLCBPMG9vb29PT29vME8gLCBpMWlJICwgaWlJaUkgLCBPT08wME8wTyAsIEkxICwgY3JlZGl0cyAsIFRydWUgKQogICAgIGVsc2UgOgogICAgICBpZiAxOCAtIDE4OiBJSSAvIG9PbzBPME9vbyAqIElJICsgSUkgKiBpMTFpSWlpSWlpICogSTExaQogICAgICBpSUlJSWlpMSAoIGlJMWkxMWlJSTExMSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIG9PMDBvT09vb29PIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIE8wb29vb09Pb28wTyAsIGkxaUkgLCBpaUlpSSAsIE9PTzAwTzBPICwgSTEgLCBOb25lICwgJ3NvdXJjZScgKQogICAgZXhjZXB0IDoKICAgICBJSUkxaWkxaUlJICggJ1RoZXJlIHdhcyBhIHByb2JsZW0gYWRkaW5nIGRpcmVjdG9yeSBmcm9tIGdldERhdGEoKTogJyArIGlJMWkxMWlJSTExMSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkKICBlbHNlIDoKICAgSUlJMWlpMWlJSSAoICdObyBDaGFubmVsczogZ2V0SXRlbXMnICkKICAgSTFJSTEgKCBpMTFJMUlJMUkxMWkgKCAnaXRlbScgKSAsIGZhbmFydCApCiBlbHNlIDoKICBvb29PICggaTExSTFJSTFJMTFpICkKICBpZiAyNiAtIDI2OiBPMG9vME9PMCAlIEkxMWkKIGlmIE9PTyA9PSAiVGh1bWJuYWlsIiA6CiAgbzAwT28wb29vb29vICggKQogIGlmIDc2IC0gNzY6IE8wMG9Pb09vTzBvME8gLyBpaWkxSTFJIC4gTzAgJSBvME9vIC4gT09vb09PbyArIEkxaTFpSTFpCiAgaWYgNzEgLSA3MTogSUkgLiBvTzBPb29Pb08KICBpZiA2MiAtIDYyOiBPb29vb29vb09PIC4gTzAwb09vT29PMG8wTwogIGlmIDYxIC0gNjE6IG9PMG8gLSBpaWkxSTFJIC0gaTFJSWkKICBpZiAyNSAtIDI1OiBPMCAqIE8wMG9Pb09vTzBvME8gKyBJMTFpIC4gT09vb09PbyAuIE9Pb29PT28KZGVmIG9vb08gKCBkYXRhICkgOgogb09vb08gPSBkYXRhIC4gcnN0cmlwICggKQogaTEgPSByZSAuIGNvbXBpbGUgKCByJyNFWFRJTkY6KC4rPyksKC4qPylbXG5ccl0rKFteXG5dKyknICkgLiBmaW5kYWxsICggb09vb08gKQogSUlJSWlJMTFJMTEgPSBsZW4gKCBpMSApCiBmb3Igb28wMG8wICwgaTExSUkxSTExSTEgLCBPT29PTzBvb28gaW4gaTEgOgogIGlmICd0dmctbG9nbycgaW4gb28wMG8wIDoKICAgTzBvb29vT09vbzBPID0gSUkxaUlpMTEgKCBvbzAwbzAgLCAndHZnLWxvZ289W1wnIl0oLio/KVtcJyJdJyApCiAgIGlmIE8wb29vb09Pb28wTyA6CiAgICBpZiBPMG9vb29PT29vME8gLiBzdGFydHN3aXRoICggJ2h0dHAnICkgOgogICAgIE8wb29vb09Pb28wTyA9IE8wb29vb09Pb28wTwogICAgIGlmIDEyIC0gMTI6IE8wb28wT08wICsgaTExaUlpaUlpaSAqIGlJaWkxSTExSTFJSTEgLyBJMTFpIC4gTzAwb09vT29PMG8wTwogICAgZWxpZiBub3QgSWkxSUlpaTExIC4gZ2V0U2V0dGluZyAoICdsb2dvLWZvbGRlclBhdGgnICkgPT0gIiIgOgogICAgIElpaTFpSSA9IElpMUlJaWkxMSAuIGdldFNldHRpbmcgKCAnbG9nby1mb2xkZXJQYXRoJyApCiAgICAgTzBvb29vT09vbzBPID0gSWlpMWlJICsgTzBvb29vT09vbzBPCiAgICAgaWYgMjkgLSAyOTogbzBPbyAlIGlpaTFJMUkgLSBvME9vIC8gaWlpMUkxSSAuIGkxSUlpCiAgICBlbHNlIDoKICAgICBPMG9vb29PT29vME8gPSBPMG9vb29PT29vME8KICAgICBpZiAzMSAtIDMxOiBJSQogICAgIGlmIDg4IC0gODg6IEkxaWkxMWlJaTExaSAtIGkxMUlpMTFJMUlpMWkgKyBpaWkxSTFJICogbzBPbyAlIGlJaWkxSTExSTFJSTEgKyBvT28wTzBPb28KICBlbHNlIDoKICAgTzBvb29vT09vbzBPID0gJycKICBpZiAndHlwZScgaW4gb28wMG8wIDoKICAgb28wMDBPME9vb29PID0gSUkxaUlpMTEgKCBvbzAwbzAgLCAndHlwZT1bXCciXSguKj8pW1wnIl0nICkKICAgaWYgb28wMDBPME9vb29PID09ICd5dC1kbCcgOgogICAgT09vT08wb29vID0gT09vT08wb29vICsgIiZtb2RlPTE4IgogICBlbGlmIG9vMDAwTzBPb29vTyA9PSAncmVnZXgnIDoKICAgIElpMUkxSWkgPSBPT29PTzBvb28gLiBzcGxpdCAoICcmcmVnZXhzPScgKQogICAgTzBvID0gSTFpMTFJSTFpICggaWkxSTFpSTFpSWkxMTFpICggJycgLCBkYXRhID0gSWkxSTFJaSBbIDEgXSApICkKICAgIGlmIDk2IC0gOTY6IElJCiAgICBvT29PbzBPME9PT29PICggSWkxSTFJaSBbIDAgXSAsIGkxMUlJMUkxMUkxICwgTzBvb29vT09vbzBPICwgJycgLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCBPMG8gLCBJSUlJaUkxMUkxMSApCiAgICBjb250aW51ZQogIG9Pb09vME8wT09Pb08gKCBPT29PTzBvb28gLCBpMTFJSTFJMTFJMSAsIE8wb29vb09Pb28wTyAsICcnICwgJycgLCAnJyAsICcnICwgJycgLCBOb25lICwgJycgLCBJSUlJaUkxMUkxMSApCiAgaWYgNTAgLSA1MDogaTExSWkxMUkxSWkxaQogeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MCkiICkKIGlmIDQ3IC0gNDc6IG9PbzBPME9vbyAqIEkxMWkgKyBpSWlpMUkxMUkxSUkxIC8gSUkgLyBJMWlpMTFpSWkxMWkgLSBPb29vb29vb09PCmRlZiBpSUkxaTExSUlpMWkgKCBuYW1lICwgdXJsICwgZmFuYXJ0ICkgOgogaTExSTFJSTFJMTFpID0gaWkxSTFpSTFpSWkxMTFpICggdXJsICkKIG9PT29vMDAwME8wbzAgPSBpMTFJMUlJMUkxMWkgLiBmaW5kICggJ2NoYW5uZWwnICwgYXR0cnMgPSB7ICduYW1lJyA6IG5hbWUgLiBkZWNvZGUgKCAndXRmLTgnICkgfSApCiBJSTFJSUkgPSBvT09vbzAwMDBPMG8wICggJ2l0ZW0nICkKIHRyeSA6CiAgaTFpSSA9IG9PT29vMDAwME8wbzAgKCAnZmFuYXJ0JyApIFsgMCBdIC4gc3RyaW5nCiAgaWYgaTFpSSA9PSBOb25lIDoKICAgcmFpc2UKIGV4Y2VwdCA6CiAgaTFpSSA9IGZhbmFydAogZm9yIE8wMDBPT08gaW4gb09Pb28wMDAwTzBvMCAoICdzdWJjaGFubmVsJyApIDoKICBuYW1lID0gTzAwME9PTyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nCiAgdHJ5IDoKICAgTzBvb29vT09vbzBPID0gTzAwME9PTyAoICd0aHVtYm5haWwnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgTzBvb29vT09vbzBPID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBPMG9vb29PT29vME8gPSAnJwogIHRyeSA6CiAgIGlmIG5vdCBPMDAwT09PICggJ2ZhbmFydCcgKSA6CiAgICBpZiBJaTFJSWlpMTEgLiBnZXRTZXR0aW5nICggJ3VzZV90aHVtYicgKSA9PSAidHJ1ZSIgOgogICAgIGkxaUkgPSBPMG9vb29PT29vME8KICAgZWxzZSA6CiAgICBpMWlJID0gTzAwME9PTyAoICdmYW5hcnQnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgaTFpSSA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgcGFzcwogIHRyeSA6CiAgIGlpSWlJID0gTzAwME9PTyAoICdpbmZvJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIGlpSWlJID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBpaUlpSSA9ICcnCiAgIGlmIDEgLSAxOiBPT29vT09vIC4gaTExSWkxMUkxSWkxaSAvIE9vMG9vTzBvbzBvTyAuIGlpaTFJMUkKICB0cnkgOgogICBPT08wME8wTyA9IE8wMDBPT08gKCAnZ2VucmUnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgT09PMDBPME8gPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIE9PTzAwTzBPID0gJycKICAgaWYgODEgLSA4MTogTzAgLiBPb29vb29vb09PIC4gT28wb29PMG9vMG9PIC0gb09vME8wT29vIC8gSTFpaTExaUlpMTFpICsgSTExaQogIHRyeSA6CiAgIEkxID0gTzAwME9PTyAoICdkYXRlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIEkxID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBJMSA9ICcnCiAgIGlmIDEwMCAtIDEwMDogT28wb29PMG9vMG9PICUgaWlpMUkxSQogIHRyeSA6CiAgIGNyZWRpdHMgPSBPMDAwT09PICggJ2NyZWRpdHMnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgY3JlZGl0cyA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgY3JlZGl0cyA9ICcnCiAgIGlmIDg2IC0gODY6IG9PbzBPME9vbyAuIE8wIC0gT29vb29vb29PTyAuIEkxaWkxMWlJaTExaSArIE8wb28wT08wCiAgdHJ5IDoKICAgaUlJSUlpaTEgKCBuYW1lIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgLCB1cmwgLiBlbmNvZGUgKCAndXRmLTgnICkgLCAzICwgTzBvb29vT09vbzBPICwgaTFpSSAsIGlpSWlJICwgT09PMDBPME8gLCBjcmVkaXRzICwgSTEgKQogIGV4Y2VwdCA6CiAgIElJSTFpaTFpSUkgKCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBhZGRpbmcgZGlyZWN0b3J5IC0gJyArIG5hbWUgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSApCiBJMUlJMSAoIElJMUlJSSAsIGkxaUkgKQogaWYgNTcgLSA1NzogT09vb09PbyAuIGkxSUlpIC4gSTFpMWlJMWkgKiBpMTFpSWlpSWlpICsgSUkgLiBJMWkxaUkxaQogaWYgNTcgLSA1NzogSUkKZGVmIEkxMUlpaWkxSSAoIG5hbWUgLCB1cmwgLCBmYW5hcnQgKSA6CiBpMTFJMUlJMUkxMWkgPSBpaTFJMWlJMWlJaTExMWkgKCB1cmwgKQogb09Pb28wMDAwTzBvMCA9IGkxMUkxSUkxSTExaSAuIGZpbmQgKCAnc3ViY2hhbm5lbCcgLCBhdHRycyA9IHsgJ25hbWUnIDogbmFtZSAuIGRlY29kZSAoICd1dGYtOCcgKSB9ICkKIElJMUlJSSA9IG9PT29vMDAwME8wbzAgKCAnc3ViaXRlbScgKQogSTFJSTEgKCBJSTFJSUkgLCBmYW5hcnQgKQogaWYgOTAgLSA5MDogaUlpaTFJMTFJMUlJMSAlIGkxMUlpMTFJMUlpMWkKIGlmIDczIC0gNzM6IE8wICogT28wb29PMG9vMG9PICsgTzBvbzBPTzAgKyBpMTFJaTExSTFJaTFpCmRlZiBJaSAoIG5hbWUgLCB1cmwgLCBpY29uaW1hZ2UgLCBmYW5hcnQgKSA6CiBvME8wT28gPSBbIF0gOyBPb28wTzBvb29vID0gWyBdIDsgaWlJID0gMAogb09JSWlJaSA9IE9Pb09vb09vT09Pb28gKCB1cmwgLCAnc3VibGluazonICwgJyMnICkKIGZvciBJaWlpMWlJMWkgaW4gb09JSWlJaSA6CiAgaWYgJ0xJU1RTT1VSQ0U6JyBpbiBJaWlpMWlJMWkgOgogICBJMWlpMWlpMTFpMUkgPSBvME9vT08gKCBJaWlpMWlJMWkgLCAnTElTVFNPVVJDRTonICwgJzo6JyApCiAgIE8wTzBPbzAwID0gbzBPb09PICggSWlpaTFpSTFpICwgJ0xJU1ROQU1FOicgLCAnOjonICkKICBlbHNlIDoKICAgSTFpaTFpaTExaTFJID0gSWlpaTFpSTFpIC4gcmVwbGFjZSAoICdzdWJsaW5rOicgLCAnJyApIC4gcmVwbGFjZSAoICcjJyAsICcnICkKICAgTzBPME9vMDAgPSBuYW1lCiAgaWYgbGVuICggSTFpaTFpaTExaTFJICkgPiAxMCA6CiAgIGlpSSA9IGlpSSArIDEgOyBvME8wT28gLiBhcHBlbmQgKCBPME8wT28wMCApIDsgT29vME8wb29vbyAuIGFwcGVuZCAoIEkxaWkxaWkxMWkxSSApCiAgIGlmIDgwIC0gODA6IElpMUkgKyBpaWkxSTFJIC8gTzAwb09vT29PMG8wTwogaWYgaWlJID09IDEgOgogIHRyeSA6CiAgIG9PT08wME8wTzBPT28gPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBuYW1lICwgaWNvbkltYWdlID0gaWNvbmltYWdlICwgdGh1bWJuYWlsSW1hZ2UgPSBpY29uaW1hZ2UgKSA7IG9PT08wME8wTzBPT28gLiBzZXRJbmZvICggdHlwZSA9ICJWaWRlbyIgLCBpbmZvTGFiZWxzID0geyAiVGl0bGUiIDogbmFtZSB9ICkKICAgT09vMDBPID0geGJtY3BsdWdpbiAuIGFkZERpcmVjdG9yeUl0ZW0gKCBoYW5kbGUgPSBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB1cmwgPSBPb28wTzBvb29vIFsgMCBdICwgbGlzdGl0ZW0gPSBvT09PMDBPME8wT09vICkKICAgeGJtYyAuIFBsYXllciAoICkgLiBwbGF5ICggT29vT09PTyAoIE9vbzBPMG9vb28gWyAwIF0gKSAsIG9PT08wME8wTzBPT28gKQogIGV4Y2VwdCA6CiAgIHBhc3MKIGVsc2UgOgogIGlJSUlpaUkxaTFpID0geGJtY2d1aSAuIERpYWxvZyAoICkKICBpSUlJID0gaUlJSWlpSTFpMWkgLiBzZWxlY3QgKCAnTkpNU29jY2VyIFNlbGVjdCBBIFNvdXJjZScgLCBvME8wT28gKQogIGlmIGlJSUkgPj0gMCA6CiAgIG8wbzBPID0gc3RyICggbzBPME9vIFsgaUlJSSBdICkKICAgb29vb08wb09vT09vTyA9IHN0ciAoIE9vbzBPMG9vb28gWyBpSUlJIF0gKQogICB0cnkgOgogICAgb09PTzAwTzBPME9PbyA9IHhibWNndWkgLiBMaXN0SXRlbSAoIG8wbzBPICwgaWNvbkltYWdlID0gaWNvbmltYWdlICwgdGh1bWJuYWlsSW1hZ2UgPSBpY29uaW1hZ2UgKSA7IG9PT08wME8wTzBPT28gLiBzZXRJbmZvICggdHlwZSA9ICJWaWRlbyIgLCBpbmZvTGFiZWxzID0geyAiVGl0bGUiIDogbzBvME8gfSApCiAgICBPT28wME8gPSB4Ym1jcGx1Z2luIC4gYWRkRGlyZWN0b3J5SXRlbSAoIGhhbmRsZSA9IGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHVybCA9IG9vb29PMG9Pb09Pb08gLCBsaXN0aXRlbSA9IG9PT08wME8wTzBPT28gKQogICAgeGJtYyAuIFBsYXllciAoICkgLiBwbGF5ICggT29vT09PTyAoIG9vb29PMG9Pb09Pb08gKSAsIG9PT08wME8wTzBPT28gKQogICBleGNlcHQgOgogICAgcGFzcwogICAgaWYgMjAgLSAyMDogTzAwb09vT29PMG8wTyArIE8wb28wT08wIC8gTzAgJSBpSWlpMUkxMUkxSUkxCiAgICBpZiA4OCAtIDg4OiBvTzBvIC8gb08wT29vT29PCmRlZiBPT09PTzBPMDAgKCApIDoKIGlmIDMwIC0gMzA6IGlJaWkxSTExSTFJSTEgLiBvME9vIC4gaWlpMUkxSSAvIE9Pb29PT28KIGlpSTFJMSA9ICdOYW1lIG9mIGNoYW5uZWwgc2hvdyBvciBtb3ZpZScKIG9vTyA9ICcnCiBvMG8wbzBvTzBvT08gPSB4Ym1jIC4gS2V5Ym9hcmQgKCBvb08gLCBpaUkxSTEgKQogbzBvMG8wb08wb09PIC4gZG9Nb2RhbCAoICkKIGlmIG8wbzBvMG9PMG9PTyAuIGlzQ29uZmlybWVkICggKSA6CiAgb29PID0gbzBvMG8wb08wb09PIC4gZ2V0VGV4dCAoICkgLiByZXBsYWNlICggJ1xuJyAsICcnICkgLiBzdHJpcCAoICkKICBpZiBsZW4gKCBvb08gKSA9PSAwIDoKICAgeGJtY2d1aSAuIERpYWxvZyAoICkgLiBvayAoICdOSk1Tb2NjZXInICwgJ05vdGhpbmcgRW50ZXJlZCcgKQogICByZXR1cm4KICAgaWYgNiAtIDY6IGlJaWkxSTExSTFJSTEgLiBpMTFJaTExSTFJaTFpICUgT09vb09Pbwogb29PID0gb29PIC4gbG93ZXIgKCApCiBvME8wT28gPSBbIF0KIG8wTzBPbyAuIGFwcGVuZCAoIGkxMUlpaWkgKCAzMDA3NTU5OTMyNzEyMTQ3NzUwNjU1MTA0NTIwNzI5NzU4NTMyODA3MjU5NTI4Njc1MjgzMzY5NjcyODcyMDI4OTAwNTA5MDA1NzUzOTQwMjA2ODAwMjEwODM2MTk1MzE0ODgwMzUyNTc4NzEzNjQ2NjE4ODAwNTg5ODQgKSApCiBJMUlpaTEgPSAwCiBpaUkxMUlpaSA9IDEKIE8wbzBPMCA9IDAKIElpMUlJMUkxMWkxID0gMAogb09vb29vb09vTyA9IHhibWNndWkgLiBEaWFsb2dQcm9ncmVzcyAoICkKIG9Pb29vb29Pb08gLiBjcmVhdGUgKCAnTkpNU29jY2VyIFNlYXJjaGluZyBQbGVhc2Ugd2FpdCcgLCAnICcgKQogaWYgMzMgLSAzMzogb08wT29vT29PIC8gaTExSWkxMUkxSWkxaSAqIE8wICUgTzBvbzBPTzAgKiBJSQogd2hpbGUgaWlJMTFJaWkgPD4gTzBvME8wIDoKICBPMG9PME9Pb09PTzBvTyA9IG8wTzBPbyBbIE8wbzBPMCBdIC4gc3RyaXAgKCApCiAgTzBvME8wID0gTzBvME8wICsgMQogIGlmIDI4IC0gMjg6IGkxMUlpMTFJMUlpMWkgKyBpMTFpSWlpSWlpIC8gTzAwb09vT29PMG8wTyAlIG9PMG8gJSBvT28wTzBPb28gLSBPMAogIG9vbzBPT08gPSAnJwogIHRyeSA6CiAgIG9vbzBPT08gPSBvME9PMDAgLiBodHRwX0dFVCAoIE8wb08wT09vT09PMG9PICkgLiBjb250ZW50CiAgIG9vbzBPT08gPSBvb28wT09PIC4gZW5jb2RlICggJ2FzY2lpJyAsICdpZ25vcmUnICkgLiBkZWNvZGUgKCAnYXNjaWknICkKICAgaWYgNDkgLSA0OTogaTExaUlpaUlpaSAlIE8wb28wT08wIC4gb08wbwogIGV4Y2VwdCA6CiAgIHBhc3MKICAgaWYgMTMgLSAxMzogaTExaUlpaUlpaSArIGkxSUlpICogaUlpaTFJMTFJMUlJMSAlIE9vb29vb29vT08gLSBvTzBPb29Pb08gKiBpaWkxSTFJCiAgaWYgbGVuICggb29vME9PTyApIDwgMTAgOgogICBvb28wT09PID0gJycKICAgSTFJaWkxID0gSTFJaWkxICsgMQogICB0aW1lIC4gc2xlZXAgKCAuNSApCiAgIGlmIDI2IC0gMjY6IE9vb29vb29vT08gKiBvME9vICsgaWlpMUkxSQogIElpSWlpMWkxMTEgPSBpbnQgKCAoIE8wbzBPMCAvIDMwMCApICogMTAwICkKICBpSSA9ICcgICAgIFBhZ2VzIFJlYWQ6ICcgKyBzdHIgKCBPMG8wTzAgKSArICcgICAgICAgIE1hdGNoZXMgRm91bmQ6ICcgKyBzdHIgKCBJaTFJSTFJMTFpMSApCiAgb09vb29vb09vTyAuIHVwZGF0ZSAoIElpSWlpMWkxMTEgLCAiIiAsIGlJICwgIiIgKQogIGlmIDc0IC0gNzQ6IG8wT28KICBpZiBvT29vb29vT29PIC4gaXNjYW5jZWxlZCAoICkgOgogICByZXR1cm4KICAgaWYgODkgLSA4OTogTzBvbzBPTzAKICBpZiBsZW4gKCBvb28wT09PICkgPiAxMCA6CiAgIG9vT29PTzBPb08wMG8gPSBPT29Pb29Pb09PT29vICggb29vME9PTyAsICc8Y2hhbm5lbD4nICwgJzwvY2hhbm5lbD4nICkKICAgZm9yIElpaWkxaUkxaSBpbiBvb09vT08wT29PMDBvIDoKICAgIEkxaWkxaWkxMWkxSSA9IG8wT29PTyAoIElpaWkxaUkxaSAsICc8ZXh0ZXJuYWxsaW5rPicgLCAnPC9leHRlcm5hbGxpbms+JyApCiAgICBpZiAxMSAtIDExOiBvT28wTzBPb28gLSBvME9vICogb08wT29vT29PIC4gSTExaSAuIElpMUkKICAgIGlmIGxlbiAoIEkxaWkxaWkxMWkxSSApID4gNSA6CiAgICAgaWlJMTFJaWkgPSBpaUkxMUlpaSArIDEKICAgICBvME8wT28gLiBhcHBlbmQgKCBJMWlpMWlpMTFpMUkgKQogICAgIGlmIDYxIC0gNjE6IE9vMG9vTzBvbzBvTyAlIG8wT28gLSBPT29vT09vIC0gb08wT29vT29PICUgTzAKICAgT29PT08wMCA9IE9Pb09vb09vT09Pb28gKCBvb28wT09PICwgJzxpdGVtPicgLCAnPC9pdGVtPicgKQogICBmb3IgSWlpaTFpSTFpIGluIE9vT09PMDAgOgogICAgSTFpaTFpaTExaTFJID0gbzBPb09PICggSWlpaTFpSTFpICwgJzxsaW5rPicgLCAnPC9saW5rPicgKQogICAgaUkxaTExaUlJMTExID0gbzBPb09PICggSWlpaTFpSTFpICwgJzx0aXRsZT4nICwgJzwvdGl0bGU+JyApCiAgICBvT08wMDAwb29vb28gPSAnICAnICsgaUkxaTExaUlJMTExIC4gbG93ZXIgKCApICsgJyAgJwogICAgaWYgbGVuICggSTFpaTFpaTExaTFJICkgPiA1IGFuZCBvT08wMDAwb29vb28gLiBmaW5kICggb29PICkgPiAwIDoKICAgICBJaTFJSTFJMTFpMSA9IElpMUlJMUkxMWkxICsgMQogICAgIG8wTzBPT08wT29vID0gJycKICAgICBPMG9vb29PT29vME8gPSBvME9vT08gKCBJaWlpMWlJMWkgLCAnPHRodW1ibmFpbD4nICwgJzwvdGh1bWJuYWlsPicgKQogICAgIG8wTzBPT08wT29vID0gbzBPb09PICggSWlpaTFpSTFpICwgJzxmYW5hcnQ+JyAsICc8L2ZhbmFydD4nICkKICAgICBpZiBsZW4gKCBvME8wT09PME9vbyApIDwgNSA6CiAgICAgIG8wTzBPT08wT29vID0gb08KICAgICBpZiBJMWlpMWlpMTFpMUkgLiBmaW5kICggJ3N1YmxpbmsnICkgPiAwIDoKICAgICAgaUlJSUlpaTEgKCBpSTFpMTFpSUkxMTEgLCBJMWlpMWlpMTFpMUkgLCAzMCAsIE8wb29vb09Pb28wTyAsIG8wTzBPT08wT29vICwgJycgLCAnJyAsICcnICwgJycgKQogICAgIGVsc2UgOgogICAgICBvT29PbzBPME9PT29PICggc3RyICggSTFpaTFpaTExaTFJICkgLCBpSTFpMTFpSUkxMTEgLCBPMG9vb29PT29vME8gLCBvME8wT09PME9vbyAsICcnICwgJycgLCAnJyAsIFRydWUgLCBOb25lICwgJycgLCAxICkKICAgICAgaWYgNzkgLSA3OTogT09vb09PbyAtIE8wMG9Pb09vTzBvME8gKyBPT29vT09vIC4gSWkxSQogICAgICBpZiAyOCAtIDI4OiBpMUlJaSAtIE9vMG9vTzBvbzBvTwogb09vb29vb09vTyAuIGNsb3NlICggKQogeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MCkiICkKIGlmIDU0IC0gNTQ6IE9vMG9vTzBvbzBvTyAtIE8wICUgaWlpMUkxSQpkZWYgT28gKCBkYXRhICwgU2VhcmNoa2V5ICkgOgogb09vb08gPSBkYXRhIC4gcnN0cmlwICggKQogaTEgPSByZSAuIGNvbXBpbGUgKCByJyNFWFRJTkY6KC4rPyksKC4qPylbXG5ccl0rKFteXG5dKyknICkgLiBmaW5kYWxsICggb09vb08gKQogSUlJSWlJMTFJMTEgPSBsZW4gKCBpMSApCiBmb3Igb28wMG8wICwgaTExSUkxSTExSTEgLCBPT29PTzBvb28gaW4gaTEgOgogIGlmICd0dmctbG9nbycgaW4gb28wMG8wIDoKICAgTzBvb29vT09vbzBPID0gSUkxaUlpMTEgKCBvbzAwbzAgLCAndHZnLWxvZ289W1wnIl0oLio/KVtcJyJdJyApCiAgIGlmIE8wb29vb09Pb28wTyA6CiAgICBpZiBPMG9vb29PT29vME8gLiBzdGFydHN3aXRoICggJ2h0dHAnICkgOgogICAgIE8wb29vb09Pb28wTyA9IE8wb29vb09Pb28wTwogICAgIGlmIDQ0IC0gNDQ6IG8wT28gLSBPMDBvT29Pb08wbzBPICUgaUlpaTFJMTFJMUlJMQogICAgZWxpZiBub3QgSWkxSUlpaTExIC4gZ2V0U2V0dGluZyAoICdsb2dvLWZvbGRlclBhdGgnICkgPT0gIiIgOgogICAgIElpaTFpSSA9IElpMUlJaWkxMSAuIGdldFNldHRpbmcgKCAnbG9nby1mb2xkZXJQYXRoJyApCiAgICAgTzBvb29vT09vbzBPID0gSWlpMWlJICsgTzBvb29vT09vbzBPCiAgICAgaWYgNzEgLSA3MTogaTExSWkxMUkxSWkxaSAuIE8wb28wT08wIC0gT29vb29vb29PTyAlIE8wb28wT08wIC4gb08wT29vT29PCiAgICBlbHNlIDoKICAgICBPMG9vb29PT29vME8gPSBPMG9vb29PT29vME8KICAgICBpZiA4OSAtIDg5OiBPbzBvb08wb28wb08gLiBPMCAvIEkxMWkgJSBvTzBvIC4gb09vME8wT29vCiAgICAgaWYgNTAgLSA1MDogb08wT29vT29PICsgSTExaSAuIGkxSUlpICUgT09vb09PbwogIGVsc2UgOgogICBPMG9vb29PT29vME8gPSAnJwogIGlmICd0eXBlJyBpbiBvbzAwbzAgOgogICBvbzAwME8wT29vb08gPSBJSTFpSWkxMSAoIG9vMDBvMCAsICd0eXBlPVtcJyJdKC4qPylbXCciXScgKQogICBpZiBvbzAwME8wT29vb08gPT0gJ3l0LWRsJyA6CiAgICBPT29PTzBvb28gPSBPT29PTzBvb28gKyAiJm1vZGU9MTgiCiAgIGVsaWYgb28wMDBPME9vb29PID09ICdyZWdleCcgOgogICAgSWkxSTFJaSA9IE9Pb09PMG9vbyAuIHNwbGl0ICggJyZyZWdleHM9JyApCiAgICBPMG8gPSBJMWkxMUlJMWkgKCBpaTFJMWlJMWlJaTExMWkgKCAnJyAsIGRhdGEgPSBJaTFJMUlpIFsgMSBdICkgKQogICAgaWYgNSAtIDU6IG9PMG8gLyBPb29vb29vb09PICsgSTFpMWlJMWkgKiBJSSAtIEkxaWkxMWlJaTExaSAlIG8wT28KICAgIG9Pb09vME8wT09Pb08gKCBJaTFJMUlpIFsgMCBdICwgaTExSUkxSTExSTEgLCBPMG9vb29PT29vME8gLCAnJyAsICcnICwgJycgLCAnJyAsICcnICwgTm9uZSAsIE8wbyAsIElJSUlpSTExSTExICkKICAgIGNvbnRpbnVlCiAgb09vT28wTzBPT09vTyAoIE9Pb09PMG9vbyAsIGkxMUlJMUkxMUkxICwgTzBvb29vT09vbzBPICwgJycgLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCAnJyAsIElJSUlpSTExSTExICkKICBpZiA0MiAtIDQyOiBPMCAvIE9Pb29PT28gKyBPb29vb29vb09PICogaTExSWkxMUkxSWkxaSAlIGkxMUlpMTFJMUlpMWkKZGVmIGkxaUlpICggdGV4dCAsIHBhdHRlcm4gKSA6CiBJSUlJSSA9ICIiCiB0cnkgOgogIG8wb29Pb08wMDBvTyA9IHJlIC4gZmluZGFsbCAoIHBhdHRlcm4gLCB0ZXh0ICwgZmxhZ3MgPSByZSAuIERPVEFMTCApCiAgSUlJSUkgPSBvMG9vT29PMDAwb08gWyAwIF0KIGV4Y2VwdCA6CiAgSUlJSUkgPSAiIgogIGlmIDg1IC0gODU6IE9Pb29PT28gLiBvTzBvIC8gaTExSWkxMUkxSWkxaSAuIE8wICUgSUkKIHJldHVybiBJSUlJSQogaWYgOTAgLSA5MDogb09vME8wT29vICUgTzAgKiBpSWlpMUkxMUkxSUkxIC4gT28wb29PMG9vMG9PCmRlZiBPT29Pb29Pb09PT29vICggdGV4dCAsIHN0YXJ0X3dpdGggLCBlbmRfd2l0aCApIDoKIEkxaWlpMTEgPSByZSAuIGZpbmRhbGwgKCAiKD9pKSgiICsgc3RhcnRfd2l0aCArICJbXFNcc10rPyIgKyBlbmRfd2l0aCArICIpIiAsIHRleHQgKQogcmV0dXJuIEkxaWlpMTEKIGlmIDc0IC0gNzQ6IE8wIC8gaTFJSWkKZGVmIG8wT29PTyAoIHRleHQgLCBmcm9tX3N0cmluZyAsIHRvX3N0cmluZyAsIGV4Y2x1ZGluZyA9IFRydWUgKSA6CiBpZiBleGNsdWRpbmcgOgogIHRyeSA6IEkxaWlpMTEgPSByZSAuIHNlYXJjaCAoICIoP2kpIiArIGZyb21fc3RyaW5nICsgIihbXFNcc10rPykiICsgdG9fc3RyaW5nICwgdGV4dCApIC4gZ3JvdXAgKCAxICkKICBleGNlcHQgOiBJMWlpaTExID0gJycKIGVsc2UgOgogIHRyeSA6IEkxaWlpMTEgPSByZSAuIHNlYXJjaCAoICIoP2kpKCIgKyBmcm9tX3N0cmluZyArICJbXFNcc10rPyIgKyB0b19zdHJpbmcgKyAiKSIgLCB0ZXh0ICkgLiBncm91cCAoIDEgKQogIGV4Y2VwdCA6IEkxaWlpMTEgPSAnJwogcmV0dXJuIEkxaWlpMTEKIGlmIDc4IC0gNzg6IE9vb29vb29vT08gLiBJMWlpMTFpSWkxMWkgKyBpMTFJaTExSTFJaTFpIC0gaTFJSWkKIGlmIDMxIC0gMzE6IE9vb29vb29vT08gLiBpaWkxSTFJCiBpZiA4MyAtIDgzOiBPbzBvb08wb28wb08gLiBPMCAvIG9PbzBPME9vbyAvIGlpaTFJMUkgLSBvTzBPb29Pb08KIGlmIDEwMCAtIDEwMDogSTFpaTExaUlpMTFpCmRlZiBJMUlJMSAoIGl0ZW1zICwgZmFuYXJ0ICkgOgogSUlJSWlJMTFJMTEgPSBsZW4gKCBpdGVtcyApCiBwcmludCAnU1RBUlQgR0VUIElURU1TICoqKioqJwogSUlJMWlpMWlJSSAoICdUb3RhbCBJdGVtczogJXMnICUgSUlJSWlJMTFJMTEgKQogZm9yIElJMWkgaW4gaXRlbXMgOgogIElpMUlJSUlpMWlpMUkgPSBGYWxzZQogIElpaUlpSTFJaTFpID0gRmFsc2UKICB0cnkgOgogICBpSTFpMTFpSUkxMTEgPSBJSTFpICggJ3RpdGxlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIGlJMWkxMWlJSTExMSBpcyBOb25lIDoKICAgIGlJMWkxMWlJSTExMSA9ICd1bmtub3duPycKICBleGNlcHQgOgogICBJSUkxaWkxaUlJICggJ05hbWUgRXJyb3InICkKICAgaUkxaTExaUlJMTExID0gJycKICAgaWYgMjIgLSAyMjogSTFpMWlJMWkgLyBpMTFpSWlpSWlpCiAgIGlmIDYyIC0gNjI6IEkxaWkxMWlJaTExaSAvIEkxMWkKICB0cnkgOgogICBpZiBJSTFpICggJ2VwZycgKSA6CiAgICBpZiBJSTFpIC4gZXBnX3VybCA6CiAgICAgSUlJMWlpMWlJSSAoICdHZXQgRVBHIFJlZ2V4JyApCiAgICAgaWkxTzAwME9PTzBPT28gPSBJSTFpIC4gZXBnX3VybCAuIHN0cmluZwogICAgIGkxaTFJMTExaUlpMSA9IElJMWkgLiBlcGdfcmVnZXggLiBzdHJpbmcKICAgICBvbzAwTzAwb08wMDBvID0gT09vMDBPb08gKCBpaTFPMDAwT09PME9PbyAsIGkxaTFJMTExaUlpMSApCiAgICAgaWYgb28wME8wMG9PMDAwbyA6CiAgICAgIGlJMWkxMWlJSTExMSArPSAnIC0gJyArIG9vMDBPMDBvTzAwMG8KICAgIGVsaWYgSUkxaSAoICdlcGcnICkgWyAwIF0gLiBzdHJpbmcgPiAxIDoKICAgICBpSTFpMTFpSUkxMTEgKz0gaUlpMSAoIElJMWkgKCAnZXBnJyApIFsgMCBdIC4gc3RyaW5nICkKICAgZWxzZSA6CiAgICBwYXNzCiAgZXhjZXB0IDoKICAgSUlJMWlpMWlJSSAoICdFUEcgRXJyb3InICkKICB0cnkgOgogICBJaTFJMUlpID0gWyBdCiAgIGlmIGxlbiAoIElJMWkgKCAnbGluaycgKSApID4gMCA6CiAgICBmb3IgTzBpMUlJMUlpaWkxSTExIGluIElJMWkgKCAnbGluaycgKSA6CiAgICAgaWYgMjEgLSAyMTogTzAwb09vT29PMG8wTwogICAgIGlmIG5vdCBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIGlmIE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZyAuIGlzZGlnaXQgKCApIDoKICAgICAgIElpMUkxSWkgLiBhcHBlbmQgKCBpMTFJaWlpICggaW50ICggTzBpMUlJMUlpaWkxSTExIC4gc3RyaW5nICkgKSApCiAgICAgIGVsc2UgOgogICAgICAgSWkxSTFJaSAuIGFwcGVuZCAoIE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZyApCiAgICAgICBpZiA5MiAtIDkyOiBpMTFpSWlpSWlpIC8gSUkgLSBPbzBvb08wb28wb08gJSBpMTFJaTExSTFJaTFpICogSUkgKyBvT28wTzBPb28KICAgZWxpZiBsZW4gKCBJSTFpICggJ3Nwb3J0c2RldmlsJyApICkgPiAwIDoKICAgIGZvciBPMGkxSUkxSWlpaTFJMTEgaW4gSUkxaSAoICdzcG9ydHNkZXZpbCcgKSA6CiAgICAgaWYgbm90IE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWkxT28wMDAwb09vID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5TcG9ydHNEZXZpbC8/bW9kZT0xJmFtcDtpdGVtPWNhdGNoZXIlM2RzdHJlYW1zJTI2dXJsPScgKyBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcKICAgICAgSTExbzBvTzAwb08wbzBvMCA9IElJMWkgKCAncmVmZXJlcicgKSBbIDAgXSAuIHN0cmluZwogICAgICBpZiBJMTFvMG9PMDBvTzBvMG8wIDoKICAgICAgIGlmIDE3IC0gMTc6IE8wMG9Pb09vTzBvME8gLiBJMWkxaUkxaSAtIG9PME9vb09vTyArIE8wIC8gaUlpaTFJMTFJMUlJMSAvIGkxMWlJaWlJaWkKICAgICAgIGlpMU9vMDAwMG9PbyA9IGlpMU9vMDAwMG9PbyArICclMjZyZWZlcmVyPScgKyBJMTFvMG9PMDBvTzBvMG8wCiAgICAgIElpMUkxSWkgLiBhcHBlbmQgKCBpaTFPbzAwMDBvT28gKQogICBlbGlmIGxlbiAoIElJMWkgKCAncGxleHVzJyApICkgPiAwIDoKICAgIGZvciBPMGkxSUkxSWlpaTFJMTEgaW4gSUkxaSAoICdwbGV4dXMnICkgOgogICAgIGlmIG5vdCBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIGlmICdzb3A6Ly8nIGluIE8waTFJSTFJaWlpMUkxMSA6CiAgICAgICBJMUlJSWlJMUkxaWkxID0gJ3BsdWdpbjovL3Byb2dyYW0ucGxleHVzLz9tb2RlPTEmdXJsPWFjZXN0cmVhbTovLycgKyBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgKyAnJm5hbWU9TXkrYWNlc3RyZWFtK2NoYW5uZWwnCiAgICAgICBJaTFJMUlpIC4gYXBwZW5kICggSTFJSUlpSTFJMWlpMSApCiAgICAgIGVsc2UgOgogICAgICAgaWlpSTFJMWlJSUlpMSA9ICdwbHVnaW46Ly9wcm9ncmFtLnBsZXh1cy8/bW9kZT0xJnVybD1hY2VzdHJlYW06Ly8nICsgTzBpMUlJMUlpaWkxSTExIC4gc3RyaW5nICsgJyZuYW1lPU15K2FjZXN0cmVhbStjaGFubmVsJwogICAgICAgSWkxSTFJaSAuIGFwcGVuZCAoIGlpaUkxSTFpSUlJaTEgKQogICBlbGlmIGxlbiAoIElJMWkgKCAndmF1Z2huJyApICkgPiAwIDoKICAgIGZvciBPMGkxSUkxSWlpaTFJMTEgaW4gSUkxaSAoICd2YXVnaG4nICkgOgogICAgIGlmIG5vdCBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIElpaSA9ICdwbHVnaW46Ly9wbHVnaW4uc3RyZWFtLnZhdWdobmxpdmUudHYvP21vZGU9UGxheUxpdmVTdHJlYW0mYW1wO2NoYW5uZWw9JyArIE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZwogICAgICBJaTFJMUlpIC4gYXBwZW5kICggSWlpICkKICAgZWxpZiBsZW4gKCBJSTFpICggJ2lsaXZlJyApICkgPiAwIDoKICAgIGZvciBPMGkxSUkxSWlpaTFJMTEgaW4gSUkxaSAoICdpbGl2ZScgKSA6CiAgICAgaWYgbm90IE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgbm90ICdodHRwJyBpbiBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgOgogICAgICAgSTFpaWlpSTFpSSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8udGJoLmlsaXZlLz91cmw9aHR0cDovL3d3dy5zdHJlYW1saXZlLnRvL3ZpZXcvJyArIE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZyArICcmYW1wO2xpbms9OTkmYW1wO21vZGU9aUxpdmVQbGF5JwogICAgICBlbHNlIDoKICAgICAgIEkxaWlpaUkxaUkgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnRiaC5pbGl2ZS8/dXJsPScgKyBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgKyAnJmFtcDtsaW5rPTk5JmFtcDttb2RlPWlMaXZlUGxheScKICAgZWxpZiBsZW4gKCBJSTFpICggJ3l0LWRsJyApICkgPiAwIDoKICAgIGZvciBPMGkxSUkxSWlpaTFJMTEgaW4gSUkxaSAoICd5dC1kbCcgKSA6CiAgICAgaWYgbm90IE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaUlpaWlpaTFpID0gTzBpMUlJMUlpaWkxSTExIC4gc3RyaW5nICsgJyZtb2RlPTE4JwogICAgICBJaTFJMUlpIC4gYXBwZW5kICggaUlpaWlpaTFpICkKICAgZWxpZiBsZW4gKCBJSTFpICggJ3V0dWJlJyApICkgPiAwIDoKICAgIGZvciBPMGkxSUkxSWlpaTFJMTEgaW4gSUkxaSAoICd1dHViZScgKSA6CiAgICAgaWYgbm90IE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgbGVuICggTzBpMUlJMUlpaWkxSTExIC4gc3RyaW5nICkgPT0gMTEgOgogICAgICAgaWlJaTFJSWlJID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvP3ZpZGVvX2lkPScgKyBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcKICAgICAgZWxpZiBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgLiBzdGFydHN3aXRoICggJ1BMJyApIGFuZCBub3QgJyZvcmRlcj0nIGluIE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZyA6CiAgICAgICBpaUlpMUlJaUkgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnlvdXR1YmUvcGxheS8/Jm9yZGVyPWRlZmF1bHQmcGxheWxpc3RfaWQ9JyArIE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZwogICAgICBlbHNlIDoKICAgICAgIGlpSWkxSUlpSSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS9wbGF5Lz9wbGF5bGlzdF9pZD0nICsgTzBpMUlJMUlpaWkxSTExIC4gc3RyaW5nCiAgICBJaTFJMUlpIC4gYXBwZW5kICggaWlJaTFJSWlJICkKICAgZWxpZiBsZW4gKCBJSTFpICggJ2ltZGInICkgKSA+IDAgOgogICAgZm9yIE8waTFJSTFJaWlpMUkxMSBpbiBJSTFpICggJ2ltZGInICkgOgogICAgIGlmIG5vdCBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIGlmIElpMUlJaWkxMSAuIGdldFNldHRpbmcgKCAnZ2VuZXNpc29ycHVsc2FyJyApID09ICcwJyA6CiAgICAgICBpMW9PME9PMCA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uZ2VuZXNpcy8/YWN0aW9uPXBsYXkmaW1kYj0nICsgTzBpMUlJMUlpaWkxSTExIC4gc3RyaW5nCiAgICAgIGVsc2UgOgogICAgICAgaTFvTzBPTzAgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnB1bHNhci9tb3ZpZS90dCcgKyBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgKyAnL3BsYXknCiAgICAgIElpMUkxSWkgLiBhcHBlbmQgKCBpMW9PME9PMCApCiAgICAgIGlmIDgyIC0gODI6IEkxaTFpSTFpIC0gSTFpMWlJMWkgKyBvTzBvCiAgIGVsaWYgbGVuICggSUkxaSAoICdmNG0nICkgKSA+IDAgOgogICAgZm9yIE8waTFJSTFJaWlpMUkxMSBpbiBJSTFpICggJ2Y0bScgKSA6CiAgICAgaWYgbm90IE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgJy5mNG0nIGluIE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZyA6CiAgICAgICBJSTExMUlpMWkxID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5mNG1UZXN0ZXIvP3VybD0nICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIE8waTFJSTFJaWlpMUkxMSAuIHN0cmluZyApCiAgICAgIGVsaWYgJy5tM3U4JyBpbiBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgOgogICAgICAgSUkxMTFJaTFpMSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uZjRtVGVzdGVyLz91cmw9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgKSArICcmYW1wO3N0cmVhbXR5cGU9SExTJwogICAgICAgaWYgOTggLSA5ODogSTFpaTExaUlpMTFpIC4gSTFpaTExaUlpMTFpICogSWkxSSAqIG9PME9vb09vTyAqIElJCiAgICAgIGVsc2UgOgogICAgICAgSUkxMTFJaTFpMSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uZjRtVGVzdGVyLz91cmw9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgKSArICcmYW1wO3N0cmVhbXR5cGU9U0lNUExFJwogICAgSWkxSTFJaSAuIGFwcGVuZCAoIElJMTExSWkxaTEgKQogICBlbGlmIGxlbiAoIElJMWkgKCAnZnR2JyApICkgPiAwIDoKICAgIGZvciBPMGkxSUkxSWlpaTFJMTEgaW4gSUkxaSAoICdmdHYnICkgOgogICAgIGlmIG5vdCBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIG9Pb29PME9PT29PMDAwID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5GLlQuVi8/bmFtZT0nICsgdXJsbGliIC4gcXVvdGUgKCBpSTFpMTFpSUkxMTEgKSArICcmdXJsPScgKyBPMGkxSUkxSWlpaTFJMTEgLiBzdHJpbmcgKyAnJm1vZGU9MTI1JmNoX2ZhbmFydD1uYScKICAgICBJaTFJMUlpIC4gYXBwZW5kICggb09vb08wT09Pb08wMDAgKQogICBpZiBsZW4gKCBJaTFJMUlpICkgPCAxIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgSUlJMWlpMWlJSSAoICdFcnJvciA8bGluaz4gZWxlbWVudCwgUGFzc2luZzonICsgaUkxaTExaUlJMTExIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgKQogICBjb250aW51ZQogICBpZiA1NyAtIDU3OiBvTzBPb29Pb08KICBJaTFJSUlJaTFpaTFJID0gRmFsc2UKICBpZiA1NCAtIDU0OiBvT28wTzBPb28gKyBJaTFJICsgaTExaUlpaUlpaQogIHRyeSA6CiAgIElpMUlJSUlpMWlpMUkgPSBJSTFpICggJ2V4dGVybmFsbGluaycgKSBbIDAgXSAuIHN0cmluZwogICBpZiAyOCAtIDI4OiBJaTFJCiAgZXhjZXB0IDogcGFzcwogIGlmIDcwIC0gNzA6IEkxaTFpSTFpCiAgaWYgSWkxSUlJSWkxaWkxSSA6CiAgIGkxMWkxaWlJMWkgPSBbIElpMUlJSUlpMWlpMUkgXQogICBpZiA4NyAtIDg3OiBpMTFJaTExSTFJaTFpCiAgIGlmICggSUkxaSAoICdleHRlcm5hbGxpbmsnICkgWyAwIF0gLiBzdHJpbmcgKSAuIGlzZGlnaXQgKCApIDoKICAgIGkxMWkxaWlJMWkgPSBpMTFJaWlpICggaW50ICggc3RyICggSUkxaSAoICdleHRlcm5hbGxpbmsnICkgWyAwIF0gLiBzdHJpbmcgKSApICkKICAgZWxzZSA6CiAgICBpMTFpMWlpSTFpID0gSUkxaSAoICdleHRlcm5hbGxpbmsnICkgWyAwIF0gLiBzdHJpbmcKICAgIGlmIDQ1IC0gNDU6IEkxaWkxMWlJaTExaSAvIE9vb29vb29vT08gLSBPbzBvb08wb28wb08gLyBPMG9vME9PMCAlIEkxaTFpSTFpCiAgIElpMUlJSUlpMWlpMUkgPSBUcnVlCiAgZWxzZSA6CiAgIElpMUlJSUlpMWlpMUkgPSBGYWxzZQogIHRyeSA6CiAgIElpaUlpSTFJaTFpID0gSUkxaSAoICdqc29ucnBjJyApIFsgMCBdIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIGlmIElpaUlpSTFJaTFpIDoKICAgaTExaTFpaUkxaSA9IFsgSWlpSWlJMUlpMWkgXQogICBJaWlJaUkxSWkxaSA9IFRydWUKICBlbHNlIDoKICAgSWlpSWlJMUlpMWkgPSBGYWxzZQogIHRyeSA6CiAgIE8wb29vb09Pb28wTyA9IElJMWkgKCAndGh1bWJuYWlsJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIE8wb29vb09Pb28wTyA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgTzBvb29vT09vbzBPID0gJycKICB0cnkgOgogICBpZiBub3QgSUkxaSAoICdmYW5hcnQnICkgOgogICAgaWYgSWkxSUlpaTExIC4gZ2V0U2V0dGluZyAoICd1c2VfdGh1bWInICkgPT0gInRydWUiIDoKICAgICBpMWlJID0gTzBvb29vT09vbzBPCiAgICBlbHNlIDoKICAgICBpMWlJID0gZmFuYXJ0CiAgIGVsc2UgOgogICAgaTFpSSA9IElJMWkgKCAnZmFuYXJ0JyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIGkxaUkgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIGkxaUkgPSBmYW5hcnQKICB0cnkgOgogICBpaUlpSSA9IElJMWkgKCAnaW5mbycgKSBbIDAgXSAuIHN0cmluZwogICBpZiBpaUlpSSA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgaWlJaUkgPSAnJwogICBpZiA4MyAtIDgzOiBvME9vIC4gaUlpaTFJMTFJMUlJMSAtIEkxaTFpSTFpICogaTExaUlpaUlpaQogIHRyeSA6CiAgIE9PTzAwTzBPID0gSUkxaSAoICdnZW5yZScgKSBbIDAgXSAuIHN0cmluZwogICBpZiBPT08wME8wTyA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgT09PMDBPME8gPSAnJwogICBpZiAyMCAtIDIwOiBpMUlJaSAqIElJICsgb08wT29vT29PICUgT09vb09PbyAlIElpMUkKICB0cnkgOgogICBJMSA9IElJMWkgKCAnZGF0ZScgKSBbIDAgXSAuIHN0cmluZwogICBpZiBJMSA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgSTEgPSAnJwogICBpZiAxMyAtIDEzOiBvT28wTzBPb28KICBPMG8gPSBOb25lCiAgaWYgSUkxaSAoICdyZWdleCcgKSA6CiAgIHRyeSA6CiAgICBvT09vMDAwb09vTzAgPSBJSTFpICggJ3JlZ2V4JyApCiAgICBPMG8gPSBJMWkxMUlJMWkgKCBvT09vMDAwb09vTzAgKQogICBleGNlcHQgOgogICAgcGFzcwogICAgaWYgODYgLSA4Njogb08wT29vT29PICUgaTExaUlpaUlpaSArIE8wb28wT08wICUgaTExaUlpaUlpaQogIHRyeSA6CiAgIGlmIGxlbiAoIElpMUkxSWkgKSA+IDEgOgogICAgaWYgOTIgLSA5MjogaTExaUlpaUlpaSAtIE9vMG9vTzBvbzBvTyAvIGkxMUlpMTFJMUlpMWkgLyBJaTFJCiAgICBpZiA0MyAtIDQzOiBvTzBPb29Pb08gKyBpaWkxSTFJICsgT28wb29PMG9vMG9PCiAgICBpSTFJSUlpaSA9IDAKICAgIEkxaTExaWkxMSA9IFsgXQogICAgZm9yIE8waTFJSTFJaWlpMUkxMSBpbiBJaTFJMUlpIDoKICAgICBpZiBJaTFJSWlpMTEgLiBnZXRTZXR0aW5nICggJ2Fza19wbGF5bGlzdF9pdGVtcycgKSA9PSAndHJ1ZScgOgogICAgICBpZiBPMG8gOgogICAgICAgSTFpMTFpaTExIC4gYXBwZW5kICggTzBpMUlJMUlpaWkxSTExICsgJyZyZWdleHM9JyArIE8wbyApCiAgICAgIGVsaWYgYW55ICggeCBpbiBPMGkxSUkxSWlpaTFJMTEgZm9yIHggaW4gaTFJaUkxSTExICkgYW5kIE8waTFJSTFJaWlpMUkxMSAuIHN0YXJ0c3dpdGggKCAnaHR0cCcgKSA6CiAgICAgICBJMWkxMWlpMTEgLiBhcHBlbmQgKCBPMGkxSUkxSWlpaTFJMTEgKyAnJm1vZGU9MTknICkKICAgICBlbHNlIDoKICAgICAgSTFpMTFpaTExIC4gYXBwZW5kICggTzBpMUlJMUlpaWkxSTExICkKICAgIGlmIElpMUlJaWkxMSAuIGdldFNldHRpbmcgKCAnYWRkX3BsYXlsaXN0JyApID09ICJmYWxzZSIgOgogICAgIGZvciBPMGkxSUkxSWlpaTFJMTEgaW4gSWkxSTFJaSA6CiAgICAgIGlJMUlJSWlpICs9IDEKICAgICAgb09vT28wTzBPT09vTyAoIE8waTFJSTFJaWlpMUkxMSAsICclcykgJXMnICUgKCBpSTFJSUlpaSAsIGlJMWkxMWlJSTExMSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkgLCBPMG9vb29PT29vME8gLCBpMWlJICwgaWlJaUkgLCBPT08wME8wTyAsIEkxICwgVHJ1ZSAsIEkxaTExaWkxMSAsIE8wbyAsIElJSUlpSTExSTExICkKICAgIGVsc2UgOgogICAgIG9Pb09vME8wT09Pb08gKCAnJyAsIGlJMWkxMWlJSTExMSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICwgTzBvb29vT09vbzBPICwgaTFpSSAsIGlpSWlJICwgT09PMDBPME8gLCBJMSAsIFRydWUgLCBJMWkxMWlpMTEgLCBPMG8gLCBJSUlJaUkxMUkxMSApCiAgIGVsc2UgOgogICAgaWYgSWkxSUlJSWkxaWkxSSA6CiAgICAgaUlJSUlpaTEgKCBpSTFpMTFpSUkxMTEgLiBlbmNvZGUgKCAndXRmLTgnICkgLCBpMTFpMWlpSTFpIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIE8wb29vb09Pb28wTyAsIGZhbmFydCAsIGlpSWlJICwgT09PMDBPME8gLCBJMSAsIE5vbmUgLCAnc291cmNlJyApCiAgICBlbGlmIElpaUlpSTFJaTFpIDoKICAgICBpSUlJSWlpMSAoIGlJMWkxMWlJSTExMSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIGkxMWkxaWlJMWkgWyAwIF0gLCA1MyAsIE8wb29vb09Pb28wTyAsIGZhbmFydCAsIGlpSWlJICwgT09PMDBPME8gLCBJMSAsIE5vbmUgLCAnc291cmNlJyApCiAgICBlbGlmIElpMUkxSWkgWyAwIF0gLiBmaW5kICggJ3N1YmxpbmsnICkgPiAwIDoKICAgICBpSUlJSWlpMSAoIGlJMWkxMWlJSTExMSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIElpMUkxSWkgWyAwIF0gLCAzMCAsIE8wb29vb09Pb28wTyAsIGkxaUkgLCBpaUlpSSAsIE8wbyAsICcnICwgJycgLCAnJyApCiAgICAgaWYgODEgLSA4MTogaWlpMUkxSSAtIE8wMG9Pb09vTzBvME8gJSBpMTFJaTExSTFJaTFpIC0gSTFpaTExaUlpMTFpIC8gb09vME8wT29vCiAgICBlbGlmIElpMUkxSWkgWyAwIF0gLiBmaW5kICggJy50eHQnICkgPiAwIDoKICAgICBpSUlJSWlpMSAoIGlJMWkxMWlJSTExMSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIElpMUkxSWkgWyAwIF0gLCAzNSAsIE8wb29vb09Pb28wTyAsIGkxaUkgLCBpaUlpSSAsIE8wbyAsICcnICwgJycgLCAnJyApCiAgICAgaWYgNCAtIDQ6IE9vb29vb29vT08gLSBpMUlJaSAlIE8wb28wT08wIC0gaWlpMUkxSSAqIE9Pb29PT28KICAgIGVsc2UgOgogICAgIGlmIDg1IC0gODU6IE9vb29vb29vT08gKiBpSWlpMUkxMUkxSUkxIC4gT28wb29PMG9vMG9PIC8gT29vb29vb29PTyAlIG8wT28gJSBPMAogICAgIEkxaWlpID0gSWkxSTFJaSBbIDAgXSBbIElpMUkxSWkgWyAwIF0gLiByZmluZCAoICcuJyApIDogXSAuIGxvd2VyICggKQogICAgIGlmIDg2IC0gODY6IEkxMWkgKiBPMCAqIEkxaTFpSTFpCiAgICAgaWYgNTEgLSA1MTogb08wT29vT29PICsgSTFpMWlJMWkgLiBpMUlJaSAuIEkxMWkgKyBvTzBvICogbzBPbwogICAgIGlmIEkxaWlpID09ICIuanBnIiBvciBJMWlpaSA9PSAiLnBuZyIgb3IgSTFpaWkgPT0gIi5naWYiIDoKICAgICAgaWYgNzIgLSA3MjogSWkxSSArIElpMUkgLyBvTzBPb29Pb08gLiBPb29vb29vb09PICUgTzBvbzBPTzAKICAgICAgaWYgNDkgLSA0OTogSWkxSSAuIEkxaWkxMWlJaTExaSAtIG9PbzBPME9vbyAqIE9vb29vb29vT08gLiBvT28wTzBPb28KICAgICAgaUlJSUlpaTEgKCBpSTFpMTFpSUkxMTEgLiBlbmNvZGUgKCAndXRmLTgnICkgLCBJaTFJMUlpIFsgMCBdICwgMzYgLCBPMG9vb29PT29vME8gLCBpMWlJICwgaWlJaUkgLCBPMG8gLCAnJyAsICcnICwgJycgKQogICAgIGVsc2UgOgogICAgICBpZiAyIC0gMjogT29vb29vb29PTyAlIGlpaTFJMUkKICAgICAgb09vT28wTzBPT09vTyAoIElpMUkxSWkgWyAwIF0gLCBpSTFpMTFpSUkxMTEgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSAsIE8wb29vb09Pb28wTyAsIGkxaUkgLCBpaUlpSSAsIE9PTzAwTzBPICwgSTEgLCBUcnVlICwgTm9uZSAsIE8wbyAsIElJSUlpSTExSTExICkKICAgICAgaWYgNjMgLSA2MzogbzBPbyAlIGlJaWkxSTExSTFJSTEKICAgICAgaWYgMzkgLSAzOTogT28wb29PMG9vMG9PIC8gb08wT29vT29PIC8gSTExaSAlIG8wT28KICBleGNlcHQgOgogICBJSUkxaWkxaUlJICggJ1RoZXJlIHdhcyBhIHByb2JsZW0gYWRkaW5nIGl0ZW0gLSAnICsgaUkxaTExaUlJMTExIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgKQogcHJpbnQgJ0ZJTklTSCBHRVQgSVRFTVMgKioqKionCiBpZiA4OSAtIDg5OiBJSSArIE9vb29vb29vT08gKyBJSSAqIGkxSUlpICsgaUlpaTFJMTFJMUlJMSAlIE8wMG9Pb09vTzBvME8KZGVmIEkxaTExSUkxaSAoIHJlZ19pdGVtICkgOgogdHJ5IDoKICBPMG8gPSB7IH0KICBmb3IgTzBpMUlJMUlpaWkxSTExIGluIHJlZ19pdGVtIDoKICAgTzBvIFsgTzBpMUlJMUlpaWkxSTExICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSA9IHsgfQogICBpZiA1OSAtIDU5OiBpaWkxSTFJICsgaTExaUlpaUlpaQogICB0cnkgOgogICAgTzBvIFsgTzBpMUlJMUlpaWkxSTExICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdleHByZScgXSA9IE8waTFJSTFJaWlpMUkxMSAoICdleHByZXMnICkgWyAwIF0gLiBzdHJpbmcKICAgIGlmIG5vdCBPMG8gWyBPMGkxSUkxSWlpaTFJMTEgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2V4cHJlJyBdIDoKICAgICBPMG8gWyBPMGkxSUkxSWlpaTFJMTEgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2V4cHJlJyBdID0gJycKICAgZXhjZXB0IDoKICAgIElJSTFpaTFpSUkgKCAiUmVnZXg6IC0tIE5vIFJlZmVyZXIgLS0iICkKICAgTzBvIFsgTzBpMUlJMUlpaWkxSTExICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdwYWdlJyBdID0gTzBpMUlJMUlpaWkxSTExICggJ3BhZ2UnICkgWyAwIF0gLiBzdHJpbmcKICAgdHJ5IDoKICAgIE8wbyBbIE8waTFJSTFJaWlpMUkxMSAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAncmVmZXInIF0gPSBPMGkxSUkxSWlpaTFJMTEgKCAncmVmZXJlcicgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgSUlJMWlpMWlJSSAoICJSZWdleDogLS0gTm8gUmVmZXJlciAtLSIgKQogICB0cnkgOgogICAgTzBvIFsgTzBpMUlJMUlpaWkxSTExICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdjb25uZWN0aW9uJyBdID0gTzBpMUlJMUlpaWkxSTExICggJ2Nvbm5lY3Rpb24nICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIElJSTFpaTFpSUkgKCAiUmVnZXg6IC0tIE5vIGNvbm5lY3Rpb24gLS0iICkKICAgIGlmIDg4IC0gODg6IGkxMWlJaWlJaWkgLSBpMTFJaTExSTFJaTFpCiAgIHRyeSA6CiAgICBPMG8gWyBPMGkxSUkxSWlpaTFJMTEgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ25vdHBsYXlhYmxlJyBdID0gTzBpMUlJMUlpaWkxSTExICggJ25vdHBsYXlhYmxlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBJSUkxaWkxaUlJICggIlJlZ2V4OiAtLSBObyBub3RwbGF5YWJsZSAtLSIgKQogICAgaWYgNjcgLSA2NzogaWlpMUkxSSAuIG9PbzBPME9vbyArIG9PMG8gLSBPb29vb29vb09PCiAgIHRyeSA6CiAgICBPMG8gWyBPMGkxSUkxSWlpaTFJMTEgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ25vcmVkaXJlY3QnIF0gPSBPMGkxSUkxSWlpaTFJMTEgKCAnbm9yZWRpcmVjdCcgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgSUlJMWlpMWlJSSAoICJSZWdleDogLS0gTm8gbm9yZWRpcmVjdCAtLSIgKQogICB0cnkgOgogICAgTzBvIFsgTzBpMUlJMUlpaWkxSTExICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdvcmlnaW4nIF0gPSBPMGkxSUkxSWlpaTFJMTEgKCAnb3JpZ2luJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBJSUkxaWkxaUlJICggIlJlZ2V4OiAtLSBObyBvcmlnaW4gLS0iICkKICAgdHJ5IDoKICAgIE8wbyBbIE8waTFJSTFJaWlpMUkxMSAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnaW5jbHVkZWhlYWRlcnMnIF0gPSBPMGkxSUkxSWlpaTFJMTEgKCAnaW5jbHVkZWhlYWRlcnMnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIElJSTFpaTFpSUkgKCAiUmVnZXg6IC0tIE5vIGluY2x1ZGVoZWFkZXJzIC0tIiApCiAgICBpZiA3MCAtIDcwOiBpaWkxSTFJIC8gb08wT29vT29PIC0gaUlpaTFJMTFJMUlJMSAtIE9vMG9vTzBvbzBvTwogICB0cnkgOgogICAgTzBvIFsgTzBpMUlJMUlpaWkxSTExICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICd4LXJlcScgXSA9IE8waTFJSTFJaWlpMUkxMSAoICd4LXJlcScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgSUlJMWlpMWlJSSAoICJSZWdleDogLS0gTm8geC1yZXEgLS0iICkKICAgdHJ5IDoKICAgIE8wbyBbIE8waTFJSTFJaWlpMUkxMSAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAneC1mb3J3YXJkJyBdID0gTzBpMUlJMUlpaWkxSTExICggJ3gtZm9yd2FyZCcgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgSUlJMWlpMWlJSSAoICJSZWdleDogLS0gTm8geC1mb3J3YXJkIC0tIiApCiAgICBpZiAxMSAtIDExOiBpSWlpMUkxMUkxSUkxIC4gT29vb29vb29PTyAuIG9PME9vb09vTyAvIGkxSUlpIC0gTzAwb09vT29PMG8wTwogICB0cnkgOgogICAgTzBvIFsgTzBpMUlJMUlpaWkxSTExICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdhZ2VudCcgXSA9IE8waTFJSTFJaWlpMUkxMSAoICdhZ2VudCcgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgSUlJMWlpMWlJSSAoICJSZWdleDogLS0gTm8gVXNlciBBZ2VudCAtLSIgKQogICB0cnkgOgogICAgTzBvIFsgTzBpMUlJMUlpaWkxSTExICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdwb3N0JyBdID0gTzBpMUlJMUlpaWkxSTExICggJ3Bvc3QnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIElJSTFpaTFpSUkgKCAiUmVnZXg6IC0tIE5vdCBhIHBvc3QiICkKICAgdHJ5IDoKICAgIE8wbyBbIE8waTFJSTFJaWlpMUkxMSAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAncmF3cG9zdCcgXSA9IE8waTFJSTFJaWlpMUkxMSAoICdyYXdwb3N0JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBJSUkxaWkxaUlJICggIlJlZ2V4OiAtLSBOb3QgYSByYXdwb3N0IiApCiAgIHRyeSA6CiAgICBPMG8gWyBPMGkxSUkxSWlpaTFJMTEgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2h0bWx1bmVzY2FwZScgXSA9IE8waTFJSTFJaWlpMUkxMSAoICdodG1sdW5lc2NhcGUnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIElJSTFpaTFpSUkgKCAiUmVnZXg6IC0tIE5vdCBhIGh0bWx1bmVzY2FwZSIgKQogICAgaWYgMzAgLSAzMDogb08wbwogICAgaWYgMjEgLSAyMTogaTExaUlpaUlpaSAvIElJICUgaWlpMUkxSSAqIE8wIC4gTzAwb09vT29PMG8wTyAtIGlJaWkxSTExSTFJSTEKICAgdHJ5IDoKICAgIE8wbyBbIE8waTFJSTFJaWlpMUkxMSAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAncmVhZGNvb2tpZW9ubHknIF0gPSBPMGkxSUkxSWlpaTFJMTEgKCAncmVhZGNvb2tpZW9ubHknICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIElJSTFpaTFpSUkgKCAiUmVnZXg6IC0tIE5vdCBhIHJlYWRDb29raWVPbmx5IiApCiAgICBpZiAyNiAtIDI2OiBvTzBPb29Pb08gKiBvTzBvCiAgIHRyeSA6CiAgICBPMG8gWyBPMGkxSUkxSWlpaTFJMTEgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2Nvb2tpZWphcicgXSA9IE8waTFJSTFJaWlpMUkxMSAoICdjb29raWVqYXInICkgWyAwIF0gLiBzdHJpbmcKICAgIGlmIG5vdCBPMG8gWyBPMGkxSUkxSWlpaTFJMTEgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2Nvb2tpZWphcicgXSA6CiAgICAgTzBvIFsgTzBpMUlJMUlpaWkxSTExICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdjb29raWVqYXInIF0gPSAnJwogICBleGNlcHQgOgogICAgSUlJMWlpMWlJSSAoICJSZWdleDogLS0gTm90IGEgY29va2llSmFyIiApCiAgIHRyeSA6CiAgICBPMG8gWyBPMGkxSUkxSWlpaTFJMTEgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3NldGNvb2tpZScgXSA9IE8waTFJSTFJaWlpMUkxMSAoICdzZXRjb29raWUnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIElJSTFpaTFpSUkgKCAiUmVnZXg6IC0tIE5vdCBhIHNldGNvb2tpZSIgKQogICB0cnkgOgogICAgTzBvIFsgTzBpMUlJMUlpaWkxSTExICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdhcHBlbmRjb29raWUnIF0gPSBPMGkxSUkxSWlpaTFJMTEgKCAnYXBwZW5kY29va2llJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBJSUkxaWkxaUlJICggIlJlZ2V4OiAtLSBOb3QgYSBhcHBlbmRjb29raWUiICkKICAgIGlmIDEwIC0gMTA6IG9PME9vb09vTyAuIE9vMG9vTzBvbzBvTwogICB0cnkgOgogICAgTzBvIFsgTzBpMUlJMUlpaWkxSTExICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdpZ25vcmVjYWNoZScgXSA9IE8waTFJSTFJaWlpMUkxMSAoICdpZ25vcmVjYWNoZScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgSUlJMWlpMWlJSSAoICJSZWdleDogLS0gbm8gaWdub3JlY2FjaGUiICkKICAgIGlmIDMyIC0gMzI6IE8wb28wT08wIC4gSTFpMWlJMWkgLiBPb29vb29vb09PIC0gSTFpaTExaUlpMTFpICsgSWkxSQogICAgaWYgODggLSA4ODogT28wb29PMG9vMG9PCiAgICBpZiAxOSAtIDE5OiBvTzBPb29Pb08gKiBJMWkxaUkxaSArIE8wb28wT08wCiAgICBpZiA2NSAtIDY1OiBpaWkxSTFJIC4gSUkgLiBJMWlpMTFpSWkxMWkgLiBPbzBvb08wb28wb08gLSBpaWkxSTFJCiAgICBpZiAxOSAtIDE5OiBpMTFpSWlpSWlpICsgT28wb29PMG9vMG9PICUgaTExSWkxMUkxSWkxaQogIE8wbyA9IHVybGxpYiAuIHF1b3RlICggcmVwciAoIE8wbyApICkKICByZXR1cm4gTzBvCiAgaWYgMTQgLSAxNDogSTFpaTExaUlpMTFpIC4gb08wT29vT29PIC4gTzAwb09vT29PMG8wTyAvIE8wb28wT08wICUgSTExaSAtIGkxMUlpMTFJMUlpMWkKIGV4Y2VwdCA6CiAgTzBvID0gTm9uZQogIElJSTFpaTFpSUkgKCAncmVnZXggRXJyb3I6ICcgKyBpSTFpMTFpSUkxMTEgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSApCiAgaWYgNjcgLSA2NzogTzAwb09vT29PMG8wTyAtIGlpaTFJMUkgLiBpMUlJaQpkZWYgSTFJMWlJICggdXJsICkgOgogdHJ5IDoKICBmb3IgTzBpMUlJMUlpaWkxSTExIGluIHJhbmdlICggMSAsIDUxICkgOgogICBJSUlJSSA9IEkxaUlpMWlpSUlpSSAoIHVybCApCiAgIGlmICJFWFQtWC1TVFJFQU0tSU5GIiBpbiBJSUlJSSA6IHJldHVybiB1cmwKICAgaWYgbm90ICJFWFRNM1UiIGluIElJSUlJIDogcmV0dXJuCiAgIHhibWMgLiBzbGVlcCAoIDIwMDAgKQogIHJldHVybgogZXhjZXB0IDoKICByZXR1cm4KICBpZiA4MSAtIDgxOiBJMWlpMTFpSWkxMWkgKiBvTzBvIC4gaWlpMUkxSQogIGlmIDExIC0gMTE6IGkxMWlJaWlJaWkgLSBJaTFJIC4gSWkxSQpkZWYgSTExSSAoIHJlZ2V4cyAsIHVybCAsIGNvb2tpZUphciA9IE5vbmUgLCBmb3JDb29raWVKYXJPbmx5ID0gRmFsc2UgLCByZWN1cnNpdmVDYWxsID0gRmFsc2UgLCBjYWNoZWRQYWdlcyA9IHsgfSAsIHJhd1Bvc3QgPSBGYWxzZSAsIGNvb2tpZV9qYXJfZmlsZSA9IE5vbmUgKSA6CiBpZiBub3QgcmVjdXJzaXZlQ2FsbCA6CiAgcmVnZXhzID0gZXZhbCAoIHVybGxpYiAuIHVucXVvdGUgKCByZWdleHMgKSApCiAgaWYgNiAtIDY6IEkxMWkgKyBJaTFJCiBJaTFpSTExaUkxID0gcmUgLiBjb21waWxlICggJ1wkZG9yZWdleFxbKFteXF1dKilcXScgKSAuIGZpbmRhbGwgKCB1cmwgKQogaWYgNSAtIDU6IGlJaWkxSTExSTFJSTEKIE9PbyA9IFRydWUKIGlmIDk0IC0gOTQ6IE8wb28wT08wICsgaUlpaTFJMTFJMUlJMSAlIEkxaWkxMWlJaTExaQogaWYgOTMgLSA5MzogTzBvbzBPTzAgLSBpaWkxSTFJICsgaUlpaTFJMTFJMUlJMSAqIE9Pb29PT28gKyBJSSAuIE9vMG9vTzBvbzBvTwogaWYgNDkgLSA0OTogT29vb29vb29PTyAqIE8wMG9Pb09vTzBvME8gLSBvT28wTzBPb28gLiBJaTFJCiBpZiA4OSAtIDg5OiBpMTFJaTExSTFJaTFpICsgTzBvbzBPTzAgKiBpMTFJaTExSTFJaTFpIC8gaTExSWkxMUkxSWkxaQogZm9yIGkxMWkxMSBpbiBJaTFpSTExaUkxIDoKICBpZiBpMTFpMTEgaW4gcmVnZXhzIDoKICAgaWYgNzIgLSA3MjogaTFJSWkgLSBvTzBPb29Pb08gLSBpaWkxSTFJICsgaWlpMUkxSSAqIE9Pb29PT28gKiBpaWkxSTFJCiAgIGlJSTFJMSA9IHJlZ2V4cyBbIGkxMWkxMSBdCiAgIGlmIDg1IC0gODU6IE9vMG9vTzBvbzBvTyAqIE9Pb29PT28KICAgaWkxaWlpMTFpMSA9IEZhbHNlCiAgIGlmIDQgLSA0OiBJMWkxaUkxaSAuIEkxaTFpSTFpICUgSTExaSAlIE8wb28wT08wIC8gTzBvbzBPTzAKICAgaWYgMjkgLSAyOTogb09vME8wT29vICogaTExSWkxMUkxSWkxaSAqIEkxMWkgLyBpMTFpSWlpSWlpCiAgIGlmICdjb29raWVqYXInIGluIGlJSTFJMSA6CiAgICBpZiAyNiAtIDI2OiBJMWkxaUkxaSAlIElJICUgSWkxSSAlIE8wb28wT08wCiAgICBpaTFpaWkxMWkxID0gaUlJMUkxIFsgJ2Nvb2tpZWphcicgXQogICAgaWYgJyRkb3JlZ2V4JyBpbiBpaTFpaWkxMWkxIDoKICAgICBjb29raWVKYXIgPSBJMTFJICggcmVnZXhzICwgaUlJMUkxIFsgJ2Nvb2tpZWphcicgXSAsIGNvb2tpZUphciAsIFRydWUgLCBUcnVlICwgY2FjaGVkUGFnZXMgKQogICAgIGlpMWlpaTExaTEgPSBUcnVlCiAgICBlbHNlIDoKICAgICBpaTFpaWkxMWkxID0gVHJ1ZQogICAgIGlmIDU1IC0gNTU6IGkxMUlpMTFJMUlpMWkgJSBPb29vb29vb09PIC8gT29vb29vb29PTyAlIE9vb29vb29vT08KICAgaWYgaWkxaWlpMTFpMSA6CiAgICBpZiBjb29raWVKYXIgPT0gTm9uZSA6CiAgICAgaWYgNTIgLSA1MjogSTExaSArIEkxMWkgLiBvTzBPb29Pb08KICAgICBjb29raWVfamFyX2ZpbGUgPSBOb25lCiAgICAgaWYgJ29wZW5bJyBpbiBpSUkxSTEgWyAnY29va2llamFyJyBdIDoKICAgICAgY29va2llX2phcl9maWxlID0gaUlJMUkxIFsgJ2Nvb2tpZWphcicgXSAuIHNwbGl0ICggJ29wZW5bJyApIFsgMSBdIC4gc3BsaXQgKCAnXScgKSBbIDAgXQogICAgICBpZiAzNCAtIDM0OiBPb29vb29vb09PIC4gTzAgLyBJaTFJICogb08wbyAtIEkxMWkKICAgICBjb29raWVKYXIgPSBJaWlpSSAoIGNvb2tpZV9qYXJfZmlsZSApCiAgICAgaWYgY29va2llX2phcl9maWxlIDoKICAgICAgSWlpaTFJMSAoIGNvb2tpZUphciAsIGNvb2tpZV9qYXJfZmlsZSApCiAgICAgIGlmIDgzIC0gODM6IGlpaTFJMUkgLiBJSSArIElpMUkgLSBpaWkxSTFJICogSUkgLyBJSQogICAgICBpZiAzOSAtIDM5OiBJSSAvIG9PbzBPME9vbyAlIEkxaWkxMWlJaTExaSAlIGkxMWlJaWlJaWkKICAgICAgaWYgOTAgLSA5MDogSUkgLSBPb29vb29vb09PCiAgICBlbGlmICdzYXZlWycgaW4gaUlJMUkxIFsgJ2Nvb2tpZWphcicgXSA6CiAgICAgY29va2llX2phcl9maWxlID0gaUlJMUkxIFsgJ2Nvb2tpZWphcicgXSAuIHNwbGl0ICggJ3NhdmVbJyApIFsgMSBdIC4gc3BsaXQgKCAnXScgKSBbIDAgXQogICAgIE9vT09vTzAwME8wMG9PID0gb3MgLiBwYXRoIC4gam9pbiAoIGkxMSAsIGNvb2tpZV9qYXJfZmlsZSApCiAgICAgcHJpbnQgJ2NvbXBsZXRlX3BhdGgnICwgT29PT29PMDAwTzAwb08KICAgICBJaWlpMUkxICggY29va2llSmFyICwgY29va2llX2phcl9maWxlICkKICAgICBpZiAzNCAtIDM0OiBPMAogICAgIGlmIDgwIC0gODA6IGkxSUlpIC0gb09vME8wT29vIC8gSTFpaTExaUlpMTFpIC0gaTExaUlpaUlpaQogICBpZiBpSUkxSTEgWyAncGFnZScgXSBhbmQgJyRkb3JlZ2V4JyBpbiBpSUkxSTEgWyAncGFnZScgXSA6CiAgICBpSUkxSTEgWyAncGFnZScgXSA9IEkxMUkgKCByZWdleHMgLCBpSUkxSTEgWyAncGFnZScgXSAsIGNvb2tpZUphciAsIHJlY3Vyc2l2ZUNhbGwgPSBUcnVlICwgY2FjaGVkUGFnZXMgPSBjYWNoZWRQYWdlcyApCiAgICBpZiA2OCAtIDY4OiBJaTFJIC0gSTExaSAlIE8wICUgSUkKICAgaWYgJ3NldGNvb2tpZScgaW4gaUlJMUkxIGFuZCBpSUkxSTEgWyAnc2V0Y29va2llJyBdIGFuZCAnJGRvcmVnZXgnIGluIGlJSTFJMSBbICdzZXRjb29raWUnIF0gOgogICAgaUlJMUkxIFsgJ3NldGNvb2tpZScgXSA9IEkxMUkgKCByZWdleHMgLCBpSUkxSTEgWyAnc2V0Y29va2llJyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICkKICAgaWYgJ2FwcGVuZGNvb2tpZScgaW4gaUlJMUkxIGFuZCBpSUkxSTEgWyAnYXBwZW5kY29va2llJyBdIGFuZCAnJGRvcmVnZXgnIGluIGlJSTFJMSBbICdhcHBlbmRjb29raWUnIF0gOgogICAgaUlJMUkxIFsgJ2FwcGVuZGNvb2tpZScgXSA9IEkxMUkgKCByZWdleHMgLCBpSUkxSTEgWyAnYXBwZW5kY29va2llJyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICkKICAgIGlmIDExIC0gMTE6IE8wIC8gSTFpaTExaUlpMTFpICUgaWlpMUkxSSArIE9Pb29PT28gKyBpSWlpMUkxMUkxSUkxCiAgICBpZiA0MCAtIDQwOiBpMTFJaTExSTFJaTFpIC0gaWlpMUkxSSAuIE8wb28wT08wICogb09vME8wT29vICUgSUkKICAgaWYgJ3Bvc3QnIGluIGlJSTFJMSBhbmQgJyRkb3JlZ2V4JyBpbiBpSUkxSTEgWyAncG9zdCcgXSA6CiAgICBpSUkxSTEgWyAncG9zdCcgXSA9IEkxMUkgKCByZWdleHMgLCBpSUkxSTEgWyAncG9zdCcgXSAsIGNvb2tpZUphciAsIHJlY3Vyc2l2ZUNhbGwgPSBUcnVlICwgY2FjaGVkUGFnZXMgPSBjYWNoZWRQYWdlcyApCiAgICBwcmludCAncG9zdCBpcyBub3cnICwgaUlJMUkxIFsgJ3Bvc3QnIF0KICAgIGlmIDU2IC0gNTY6IGkxMWlJaWlJaWkgLiBPT29vT09vIC0gbzBPbyAqIE8wMG9Pb09vTzBvME8KICAgaWYgJ3Jhd3Bvc3QnIGluIGlJSTFJMSBhbmQgJyRkb3JlZ2V4JyBpbiBpSUkxSTEgWyAncmF3cG9zdCcgXSA6CiAgICBpSUkxSTEgWyAncmF3cG9zdCcgXSA9IEkxMUkgKCByZWdleHMgLCBpSUkxSTEgWyAncmF3cG9zdCcgXSAsIGNvb2tpZUphciAsIHJlY3Vyc2l2ZUNhbGwgPSBUcnVlICwgY2FjaGVkUGFnZXMgPSBjYWNoZWRQYWdlcyAsIHJhd1Bvc3QgPSBUcnVlICkKICAgIGlmIDkxIC0gOTE6IElpMUkgKyBPb29vb29vb09PIC0gaTFJSWkKICAgIGlmIDg0IC0gODQ6IE8wb28wT08wIC8gSTFpMWlJMWkKICAgaWYgJ3Jhd3Bvc3QnIGluIGlJSTFJMSBhbmQgJyRlcG9jdGltZSQnIGluIGlJSTFJMSBbICdyYXdwb3N0JyBdIDoKICAgIGlJSTFJMSBbICdyYXdwb3N0JyBdID0gaUlJMUkxIFsgJ3Jhd3Bvc3QnIF0gLiByZXBsYWNlICggJyRlcG9jdGltZSQnICwgT09Pb29vME9vb09vTyAoICkgKQogICAgaWYgOTEgLSA5MTogSWkxSSArIG8wT28KICAgaWYgJ3Jhd3Bvc3QnIGluIGlJSTFJMSBhbmQgJyRlcG9jdGltZTIkJyBpbiBpSUkxSTEgWyAncmF3cG9zdCcgXSA6CiAgICBpSUkxSTEgWyAncmF3cG9zdCcgXSA9IGlJSTFJMSBbICdyYXdwb3N0JyBdIC4gcmVwbGFjZSAoICckZXBvY3RpbWUyJCcgLCBPb09vb28gKCApICkKICAgIGlmIDc0IC0gNzQ6IGlJaWkxSTExSTFJSTEgKiBJMWkxaUkxaSAlIG9PMG8KICAgIGlmIDM2IC0gMzY6IE9vb29vb29vT08gLSBJaTFJCiAgIE9Pb29vID0gJycKICAgaWYgaUlJMUkxIFsgJ3BhZ2UnIF0gYW5kIGlJSTFJMSBbICdwYWdlJyBdIGluIGNhY2hlZFBhZ2VzIGFuZCBub3QgJ2lnbm9yZWNhY2hlJyBpbiBpSUkxSTEgYW5kIGZvckNvb2tpZUphck9ubHkgPT0gRmFsc2UgOgogICAgT09vb28gPSBjYWNoZWRQYWdlcyBbIGlJSTFJMSBbICdwYWdlJyBdIF0KICAgZWxzZSA6CiAgICBpZiBpSUkxSTEgWyAncGFnZScgXSBhbmQgbm90IGlJSTFJMSBbICdwYWdlJyBdID09ICcnIGFuZCBpSUkxSTEgWyAncGFnZScgXSAuIHN0YXJ0c3dpdGggKCAnaHR0cCcgKSA6CiAgICAgaWYgJyRlcG9jdGltZSQnIGluIGlJSTFJMSBbICdwYWdlJyBdIDoKICAgICAgaUlJMUkxIFsgJ3BhZ2UnIF0gPSBpSUkxSTEgWyAncGFnZScgXSAuIHJlcGxhY2UgKCAnJGVwb2N0aW1lJCcgLCBPT09vb28wT29vT29PICggKSApCiAgICAgaWYgJyRlcG9jdGltZTIkJyBpbiBpSUkxSTEgWyAncGFnZScgXSA6CiAgICAgIGlJSTFJMSBbICdwYWdlJyBdID0gaUlJMUkxIFsgJ3BhZ2UnIF0gLiByZXBsYWNlICggJyRlcG9jdGltZTIkJyAsIE9vT29vbyAoICkgKQogICAgICBpZiA1MSAtIDUxOiBJMTFpCiAgICAgIGlmIDQxIC0gNDE6IEkxMWkgKiBpMTFJaTExSTFJaTFpIC0gTzBvbzBPTzAgKyBvT28wTzBPb28KICAgICBJaUlJSUlJMTFJID0gaUlJMUkxIFsgJ3BhZ2UnIF0gLiBzcGxpdCAoICd8JyApCiAgICAgSWkxSTExSSA9IElpSUlJSUkxMUkgWyAwIF0KICAgICBpaUlpaTFJID0gTm9uZQogICAgIGlmIGxlbiAoIElpSUlJSUkxMUkgKSA+IDEgOgogICAgICBpaUlpaTFJID0gSWlJSUlJSTExSSBbIDEgXQogICAgIG8wMG9PTzAgPSB1cmxsaWIyIC4gUmVxdWVzdCAoIElpMUkxMUkgKQogICAgIG8wMG9PTzAgLiBhZGRfaGVhZGVyICggJ1VzZXItQWdlbnQnICwgJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMTsgcnY6MTQuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xNC4wLjEnICkKICAgICBpZiAncmVmZXInIGluIGlJSTFJMSA6CiAgICAgIG8wMG9PTzAgLiBhZGRfaGVhZGVyICggJ1JlZmVyZXInICwgaUlJMUkxIFsgJ3JlZmVyJyBdICkKICAgICBpZiAnYWdlbnQnIGluIGlJSTFJMSA6CiAgICAgIG8wMG9PTzAgLiBhZGRfaGVhZGVyICggJ1VzZXItYWdlbnQnICwgaUlJMUkxIFsgJ2FnZW50JyBdICkKICAgICBpZiAneC1yZXEnIGluIGlJSTFJMSA6CiAgICAgIG8wMG9PTzAgLiBhZGRfaGVhZGVyICggJ1gtUmVxdWVzdGVkLVdpdGgnICwgaUlJMUkxIFsgJ3gtcmVxJyBdICkKICAgICBpZiAneC1mb3J3YXJkJyBpbiBpSUkxSTEgOgogICAgICBvMDBvT08wIC4gYWRkX2hlYWRlciAoICdYLUZvcndhcmRlZC1Gb3InICwgaUlJMUkxIFsgJ3gtZm9yd2FyZCcgXSApCiAgICAgaWYgJ3NldGNvb2tpZScgaW4gaUlJMUkxIDoKICAgICAgcHJpbnQgJ2FkZGluZyBjb29raWUnICwgaUlJMUkxIFsgJ3NldGNvb2tpZScgXQogICAgICBvMDBvT08wIC4gYWRkX2hlYWRlciAoICdDb29raWUnICwgaUlJMUkxIFsgJ3NldGNvb2tpZScgXSApCiAgICAgaWYgJ2FwcGVuZGNvb2tpZScgaW4gaUlJMUkxIDoKICAgICAgcHJpbnQgJ2FwcGVuZGluZyBjb29raWUgdG8gY29va2llamFyJyAsIGlJSTFJMSBbICdhcHBlbmRjb29raWUnIF0KICAgICAgaTFJMTFpSWlJSSA9IGlJSTFJMSBbICdhcHBlbmRjb29raWUnIF0KICAgICAgaTFJMTFpSWlJSSA9IGkxSTExaUlpSUkgLiBzcGxpdCAoICc7JyApCiAgICAgIGZvciBPTzBPTzBPTyBpbiBpMUkxMWlJaUlJIDoKICAgICAgIE9vbyAsIG9PMG9JSUlpaTFpaUlpID0gT08wT08wT08gLiBzcGxpdCAoICc9JyApCiAgICAgICBvb29vME9PbyAsIE9vbyA9IE9vbyAuIHNwbGl0ICggJzonICkKICAgICAgIE9vTzAwID0gY29va2llbGliIC4gQ29va2llICggdmVyc2lvbiA9IDAgLCBuYW1lID0gT29vICwgdmFsdWUgPSBvTzBvSUlJaWkxaWlJaSAsIHBvcnQgPSBOb25lICwgcG9ydF9zcGVjaWZpZWQgPSBGYWxzZSAsIGRvbWFpbiA9IG9vb28wT09vICwgZG9tYWluX3NwZWNpZmllZCA9IEZhbHNlICwgZG9tYWluX2luaXRpYWxfZG90ID0gRmFsc2UgLCBwYXRoID0gJy8nICwgcGF0aF9zcGVjaWZpZWQgPSBUcnVlICwgc2VjdXJlID0gRmFsc2UgLCBleHBpcmVzID0gTm9uZSAsIGRpc2NhcmQgPSBUcnVlICwgY29tbWVudCA9IE5vbmUgLCBjb21tZW50X3VybCA9IE5vbmUgLCByZXN0ID0geyAnSHR0cE9ubHknIDogTm9uZSB9ICwgcmZjMjEwOSA9IEZhbHNlICkKICAgICAgIGNvb2tpZUphciAuIHNldF9jb29raWUgKCBPb08wMCApCiAgICAgICBpZiAxOCAtIDE4OiBPMG9vME9PMCAtIE9vb29vb29vT08gJSBvTzBPb29Pb08gLSBvME9vICUgb08wbwogICAgICAgaWYgNjAgLSA2MDogaUlpaTFJMTFJMUlJMSArIGkxSUlpCiAgICAgICBpZiA4NiAtIDg2OiBpSWlpMUkxMUkxSUkxICsgb08wbyAuIGkxMWlJaWlJaWkgLSBPMG9vME9PMAogICAgICAgaWYgNTEgLSA1MTogb08wbwogICAgIGlmICdvcmlnaW4nIGluIGlJSTFJMSA6CiAgICAgIG8wMG9PTzAgLiBhZGRfaGVhZGVyICggJ09yaWdpbicgLCBpSUkxSTEgWyAnb3JpZ2luJyBdICkKICAgICBpZiBpaUlpaTFJIDoKICAgICAgaWlJaWkxSSA9IGlpSWlpMUkgLiBzcGxpdCAoICcmJyApCiAgICAgIGZvciBPTzBPTzBPTyBpbiBpaUlpaTFJIDoKICAgICAgIE9vbyAsIG9PMG9JSUlpaTFpaUlpID0gT08wT08wT08gLiBzcGxpdCAoICc9JyApCiAgICAgICBvMDBvT08wIC4gYWRkX2hlYWRlciAoIE9vbyAsIG9PMG9JSUlpaTFpaUlpICkKICAgICAgIGlmIDE0IC0gMTQ6IEkxaTFpSTFpICUgSWkxSSAlIG9PbzBPME9vbyAtIGkxMWlJaWlJaWkKICAgICAgIGlmIDUzIC0gNTM6IE8wb28wT08wICUgb09vME8wT29vCiAgICAgaWYgbm90IGNvb2tpZUphciA9PSBOb25lIDoKICAgICAgaWYgNTkgLSA1OTogaWlpMUkxSSAlIGlJaWkxSTExSTFJSTEgLiBpMUlJaSArIG9PME9vb09vTyAqIEkxaTFpSTFpCiAgICAgIGkxSWlpSTFpSWkgPSB1cmxsaWIyIC4gSFRUUENvb2tpZVByb2Nlc3NvciAoIGNvb2tpZUphciApCiAgICAgIG9PT28wME8wT09PbyA9IHVybGxpYjIgLiBidWlsZF9vcGVuZXIgKCBpMUlpaUkxaUlpICwgdXJsbGliMiAuIEhUVFBCYXNpY0F1dGhIYW5kbGVyICggKSAsIHVybGxpYjIgLiBIVFRQSGFuZGxlciAoICkgKQogICAgICBvT09vMDBPME9PT28gPSB1cmxsaWIyIC4gaW5zdGFsbF9vcGVuZXIgKCBvT09vMDBPME9PT28gKQogICAgICBpZiAnbm9yZWRpcmVjdCcgaW4gaUlJMUkxIDoKICAgICAgIGkxMUkxSTFpaUkgPSB1cmxsaWIyIC4gYnVpbGRfb3BlbmVyICggSWlpSUlJMTExaUkgKQogICAgICAgb09PbzAwTzBPT09vID0gdXJsbGliMiAuIGluc3RhbGxfb3BlbmVyICggaTExSTFJMWlpSSApCiAgICAgICBpZiAzNCAtIDM0OiBPMDBvT29Pb08wbzBPICUgaTExSWkxMUkxSWkxaSAuIE8wIC4gaUlpaTFJMTFJMUlJMQogICAgIGlmICdjb25uZWN0aW9uJyBpbiBpSUkxSTEgOgogICAgICBwcmludCAnLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5jb25uZWN0aW9uLy8vLy8vLicgLCBpSUkxSTEgWyAnY29ubmVjdGlvbicgXQogICAgICBmcm9tIGtlZXBhbGl2ZSBpbXBvcnQgSFRUUEhhbmRsZXIKICAgICAgb29pMUlJMUkgPSBIVFRQSGFuZGxlciAoICkKICAgICAgb09PbzAwTzBPT09vID0gdXJsbGliMiAuIGJ1aWxkX29wZW5lciAoIG9vaTFJSTFJICkKICAgICAgdXJsbGliMiAuIGluc3RhbGxfb3BlbmVyICggb09PbzAwTzBPT09vICkKICAgICAgaWYgOTUgLSA5NTogSTFpaTExaUlpMTFpIC0gaWlpMUkxSSAvIG9PME9vb09vTyAlIEkxMWkgLiBPT29vT09vCiAgICAgIGlmIDI0IC0gMjQ6IGkxSUlpIC4gaTExaUlpaUlpaQogICAgIElJSUlJMWlpaTExID0gTm9uZQogICAgIGlmIDM1IC0gMzU6IElpMUkgLyBJSSAvIG9PME9vb09vTyAtIGlJaWkxSTExSTFJSTEgKyBvTzBPb29Pb08gLiBJSQogICAgIGlmICdwb3N0JyBpbiBpSUkxSTEgOgogICAgICBPME8wME8wMDBPT08gPSBpSUkxSTEgWyAncG9zdCcgXQogICAgICBpZiAnJExpdmVTdHJlYW1SZWNhcHRjaGEnIGluIE8wTzAwTzAwME9PTyA6CiAgICAgICAoIGlJT28wTyAsIElpMTEgKSA9IElJMWkxMTEgKCBpSUkxSTEgWyAncGFnZScgXSApCiAgICAgICBpZiBpSU9vME8gOgogICAgICAgIE8wTzAwTzAwME9PTyArPSAncmVjYXB0Y2hhX2NoYWxsZW5nZV9maWVsZDonICsgaUlPbzBPICsgJyxyZWNhcHRjaGFfcmVzcG9uc2VfZmllbGQ6JyArIElpMTEKICAgICAgaTFpaWlJaWkxMSA9IE8wTzAwTzAwME9PTyAuIHNwbGl0ICggJywnICkgOwogICAgICBJSUlJSTFpaWkxMSA9IHsgfQogICAgICBmb3IgT09vT09PMDAwTzAgaW4gaTFpaWlJaWkxMSA6CiAgICAgICBPb28gPSBPT29PT08wMDBPMCAuIHNwbGl0ICggJzonICkgWyAwIF0gOwogICAgICAgb08wb0lJSWlpMWlpSWkgPSBPT29PT08wMDBPMCAuIHNwbGl0ICggJzonICkgWyAxIF0gOwogICAgICAgSUlJSUkxaWlpMTEgWyBPb28gXSA9IG9PMG9JSUlpaTFpaUlpCiAgICAgIElJSUlJMWlpaTExID0gdXJsbGliIC4gdXJsZW5jb2RlICggSUlJSUkxaWlpMTEgKQogICAgICBpZiA5MiAtIDkyOiBJMTFpIC8gTzAKICAgICBpZiAncmF3cG9zdCcgaW4gaUlJMUkxIDoKICAgICAgSUlJSUkxaWlpMTEgPSBpSUkxSTEgWyAncmF3cG9zdCcgXQogICAgICBpZiAnJExpdmVTdHJlYW1SZWNhcHRjaGEnIGluIElJSUlJMWlpaTExIDoKICAgICAgICggaUlPbzBPICwgSWkxMSApID0gSUkxaTExMSAoIGlJSTFJMSBbICdwYWdlJyBdICkKICAgICAgIGlmIGlJT28wTyA6CiAgICAgICAgSUlJSUkxaWlpMTEgKz0gJyZyZWNhcHRjaGFfY2hhbGxlbmdlX2ZpZWxkPScgKyBpSU9vME8gKyAnJnJlY2FwdGNoYV9yZXNwb25zZV9maWVsZD0nICsgSWkxMQogICAgICAgIGlmIDgwIC0gODA6IE9Pb29PT28gLSBpaWkxSTFJICsgT29vb29vb29PTwogICAgICAgIGlmIDk4IC0gOTg6IGlpaTFJMUkgKyBpMUlJaSAuIG8wT28gLSBvTzBPb29Pb08gLSBPT29vT09vCiAgICAgICAgaWYgMjQgLSAyNDogb09vME8wT29vIC0gaTFJSWkgKyBPMDBvT29Pb08wbzBPCiAgICAgICAgaWYgMzggLSAzODogT29vb29vb29PTyAvIEkxMWkgLiBPMCAvIGkxSUlpIC8gb09vME8wT29vICsgaUlpaTFJMTFJMUlJMQogICAgIGlmIElJSUlJMWlpaTExIDoKICAgICAgb09vbyA9IHVybGxpYjIgLiB1cmxvcGVuICggbzAwb09PMCAsIElJSUlJMWlpaTExICkKICAgICBlbHNlIDoKICAgICAgb09vbyA9IHVybGxpYjIgLiB1cmxvcGVuICggbzAwb09PMCApCiAgICAgIGlmIDk2IC0gOTY6IE9vMG9vTzBvbzBvTwogICAgIE9Pb29vID0gb09vbyAuIHJlYWQgKCApCiAgICAgT09vb28gPSBpMUkxMWlJSUkxaTFJICggT09vb28gKQogICAgIGlmIDYzIC0gNjM6IG9PbzBPME9vbyArIElJIC0gb08wT29vT29PCiAgICAgaWYgJ2luY2x1ZGVoZWFkZXJzJyBpbiBpSUkxSTEgOgogICAgICBPT29vbyArPSBzdHIgKCBvT29vIC4gaGVhZGVycyAuIGdldCAoICdTZXQtQ29va2llJyApICkKICAgICAgaWYgMiAtIDI6IEkxaTFpSTFpCiAgICAgb09vbyAuIGNsb3NlICggKQogICAgIGNhY2hlZFBhZ2VzIFsgaUlJMUkxIFsgJ3BhZ2UnIF0gXSA9IE9Pb29vCiAgICAgaWYgOTcgLSA5NzogSWkxSSAtIE9vb29vb29vT08KICAgICBpZiA3OSAtIDc5OiBvTzBvICUgSTFpMWlJMWkgJSBvT28wTzBPb28KICAgICBpZiAyOSAtIDI5OiBPb29vb29vb09PIC4gbzBPbyAlIEkxMWkgLSBPbzBvb08wb28wb08KICAgICBpZiBmb3JDb29raWVKYXJPbmx5IDoKICAgICAgcmV0dXJuIGNvb2tpZUphcgogICAgZWxpZiBpSUkxSTEgWyAncGFnZScgXSBhbmQgbm90IGlJSTFJMSBbICdwYWdlJyBdIC4gc3RhcnRzd2l0aCAoICdodHRwJyApIDoKICAgICBpZiBpSUkxSTEgWyAncGFnZScgXSAuIHN0YXJ0c3dpdGggKCAnJHB5RnVuY3Rpb246JyApIDoKICAgICAgaWlpaSA9IG8wT08wT28gKCBpSUkxSTEgWyAncGFnZScgXSAuIHNwbGl0ICggJyRweUZ1bmN0aW9uOicgKSBbIDEgXSAsICcnICwgY29va2llSmFyICkKICAgICAgaWYgZm9yQ29va2llSmFyT25seSA6CiAgICAgICByZXR1cm4gY29va2llSmFyCiAgICAgIE9Pb29vID0gaWlpaQogICAgIGVsc2UgOgogICAgICBPT29vbyA9IGlJSTFJMSBbICdwYWdlJyBdCiAgIGlmICckcHlGdW5jdGlvbjpwbGF5bWVkaWEoJyBpbiBpSUkxSTEgWyAnZXhwcmUnIF0gb3IgJ0FjdGl2YXRlV2luZG93JyBpbiBpSUkxSTEgWyAnZXhwcmUnIF0gb3IgYW55ICggeCBpbiB1cmwgZm9yIHggaW4gSUlpSWlJSTExaSApIDoKICAgIE9PbyA9IEZhbHNlCiAgIGlmICckZG9yZWdleCcgaW4gaUlJMUkxIFsgJ2V4cHJlJyBdIDoKICAgIGlJSTFJMSBbICdleHByZScgXSA9IEkxMUkgKCByZWdleHMgLCBpSUkxSTEgWyAnZXhwcmUnIF0gLCBjb29raWVKYXIgLCByZWN1cnNpdmVDYWxsID0gVHJ1ZSAsIGNhY2hlZFBhZ2VzID0gY2FjaGVkUGFnZXMgKQogICAgaWYgMyAtIDM6IElJIC0gTzAgJSBpSWlpMUkxMUkxSUkxIC8gSTFpMWlJMWkgLiBPT29vT09vCiAgICBpZiAzIC0gMzogTzAgJSBPb29vb29vb09PIC8gaWlpMUkxSQogICBpZiBub3QgaUlJMUkxIFsgJ2V4cHJlJyBdID09ICcnIDoKICAgIHByaW50ICdkb2luZyBpdCAnICwgaUlJMUkxIFsgJ2V4cHJlJyBdCiAgICBpZiAnJExpdmVTdHJlYW1DYXB0Y2hhJyBpbiBpSUkxSTEgWyAnZXhwcmUnIF0gOgogICAgIGlpaWkgPSBvb09vICggaUlJMUkxICwgT09vb28gLCBjb29raWVKYXIgKQogICAgIGlmIDg0IC0gODQ6IGlpaTFJMUkKICAgICB1cmwgPSB1cmwgLiByZXBsYWNlICggIiRkb3JlZ2V4WyIgKyBpMTFpMTEgKyAiXSIgLCBpaWlpICkKICAgIGVsaWYgaUlJMUkxIFsgJ2V4cHJlJyBdIC4gc3RhcnRzd2l0aCAoICckcHlGdW5jdGlvbjonICkgOgogICAgIGlmIDg3IC0gODc6IGkxMUlpMTFJMUlpMWkgKyBPT29vT09vCiAgICAgaWlpaSA9IG8wT08wT28gKCBpSUkxSTEgWyAnZXhwcmUnIF0gLiBzcGxpdCAoICckcHlGdW5jdGlvbjonICkgWyAxIF0gLCBPT29vbyAsIGNvb2tpZUphciApCiAgICAgaWYgJ0FjdGl2YXRlV2luZG93JyBpbiBpSUkxSTEgWyAnZXhwcmUnIF0gOiByZXR1cm4KICAgICBwcmludCAnc3RpbGwgaHJlJwogICAgIHByaW50ICd1cmwgayB2YWwnICwgdXJsICwgaTExaTExICwgaWlpaQogICAgIGlmIDI4IC0gMjg6IGlpaTFJMUkgKiBJMTFpIC8gSWkxSQogICAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIGkxMWkxMSArICJdIiAsIGlpaWkgKQogICAgZWxzZSA6CiAgICAgaWYgbm90IE9Pb29vID09ICcnIDoKICAgICAgT09vT08wT08gPSByZSAuIGNvbXBpbGUgKCBpSUkxSTEgWyAnZXhwcmUnIF0gKSAuIHNlYXJjaCAoIE9Pb29vICkKICAgICAgaWlpaSA9ICcnCiAgICAgIHRyeSA6CiAgICAgICBpaWlpID0gT09vT08wT08gLiBncm91cCAoIDEgKSAuIHN0cmlwICggKQogICAgICBleGNlcHQgOiB0cmFjZWJhY2sgLiBwcmludF9leGMgKCApCiAgICAgZWxzZSA6CiAgICAgIGlpaWkgPSBpSUkxSTEgWyAnZXhwcmUnIF0KICAgICBpZiByYXdQb3N0IDoKICAgICAgcHJpbnQgJ3Jhd3Bvc3QnCiAgICAgIGlpaWkgPSB1cmxsaWIgLiBxdW90ZV9wbHVzICggaWlpaSApCiAgICAgaWYgJ2h0bWx1bmVzY2FwZScgaW4gaUlJMUkxIDoKICAgICAgaWYgMjYgLSAyNjogT28wb29PMG9vMG9PIC4gT28wb29PMG9vMG9PCiAgICAgIGltcG9ydCBIVE1MUGFyc2VyCiAgICAgIGlpaWkgPSBIVE1MUGFyc2VyIC4gSFRNTFBhcnNlciAoICkgLiB1bmVzY2FwZSAoIGlpaWkgKQogICAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIGkxMWkxMSArICJdIiAsIGlpaWkgKQogICAgIGlmIDM1IC0gMzU6IElJIC4gb08wbyAqIGkxMWlJaWlJaWkKICAgZWxzZSA6CiAgICB1cmwgPSB1cmwgLiByZXBsYWNlICggIiRkb3JlZ2V4WyIgKyBpMTFpMTEgKyAiXSIgLCAnJyApCiBpZiAnJGVwb2N0aW1lJCcgaW4gdXJsIDoKICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyRlcG9jdGltZSQnICwgT09Pb29vME9vb09vTyAoICkgKQogaWYgJyRlcG9jdGltZTIkJyBpbiB1cmwgOgogIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJGVwb2N0aW1lMiQnICwgT29Pb29vICggKSApCiAgaWYgNDQgLSA0NDogaTExaUlpaUlpaSAvIG9PbzBPME9vbwogaWYgJyRHVUlEJCcgaW4gdXJsIDoKICBpbXBvcnQgdXVpZAogIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJEdVSUQkJyAsIHN0ciAoIHV1aWQgLiB1dWlkMSAoICkgKSAuIHVwcGVyICggKSApCiBpZiAnJGdldF9jb29raWVzJCcgaW4gdXJsIDoKICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyRnZXRfY29va2llcyQnICwgSWkxSUlpICggY29va2llSmFyICkgKQogIGlmIDQzIC0gNDM6IElJICUgT28wb29PMG9vMG9PCiBpZiByZWN1cnNpdmVDYWxsIDogcmV0dXJuIHVybAogcHJpbnQgJ2ZpbmFsIHVybCcgLCB1cmwKIGlmIHVybCA9PSAiIiA6CiAgcmV0dXJuCiBlbHNlIDoKICByZXR1cm4gdXJsICwgT09vCiAgaWYgNjkgLSA2OTogT28wb29PMG9vMG9PICUgSTFpaTExaUlpMTFpCiAgaWYgODYgLSA4NjogSWkxSSAvIElpMUkKICBpZiAyOCAtIDI4OiBpMTFpSWlpSWlpIC8gT09vb09PbyAuIGlJaWkxSTExSTFJSTEgLyBvTzBPb29Pb08KZGVmIE9vT08gKCB0ICkgOgogaW1wb3J0IGhhc2hsaWIKIE9PME9PME9PID0gaGFzaGxpYiAuIG1kNSAoICkKIE9PME9PME9PIC4gdXBkYXRlICggdCApCiByZXR1cm4gT08wT08wT08gLiBoZXhkaWdlc3QgKCApCiBpZiAzMiAtIDMyOiBvTzBvICogbzBPbyAlIGkxMUlpMTFJMUlpMWkgKiBPMG9vME9PMCAuIE8wCmRlZiBpMTFpMWkxSTFpSTEgKCBlbmNyeXB0ZWQgKSA6CiBPMG9vT28wID0gIiIKIGZvciBpaWlpIGluIGVuY3J5cHRlZCAuIHNwbGl0ICggJzonICkgOgogIE8wb29PbzAgKz0gY2hyICggaW50ICggaWlpaSAuIHJlcGxhY2UgKCAiMG0wIiAsICIiICkgKSAvIDg0IC8gNSApCiByZXR1cm4gTzBvb09vMAogaWYgNTMgLSA1MzogT29vb29vb29PTyAtIEkxaTFpSTFpCmRlZiBvT28gKCBtZWRpYV91cmwgKSA6CiB0cnkgOgogIGltcG9ydCBDdXN0b21QbGF5ZXIKICBpMWlJSUlpaWlJID0gQ3VzdG9tUGxheWVyIC4gTXlYQk1DUGxheWVyICggKQogIE9vTzAwb28wMCA9IHhibWNndWkgLiBMaXN0SXRlbSAoIGxhYmVsID0gc3RyICggaUkxaTExaUlJMTExICkgLCBpY29uSW1hZ2UgPSAiRGVmYXVsdFZpZGVvLnBuZyIgLCB0aHVtYm5haWxJbWFnZSA9IHhibWMgLiBnZXRJbmZvSW1hZ2UgKCAiTGlzdEl0ZW0uVGh1bWIiICkgLCBwYXRoID0gbWVkaWFfdXJsICkKICBpMWlJSUlpaWlJIC4gcGxheSAoIG1lZGlhX3VybCAsIE9vTzAwb28wMCApCiAgeGJtYyAuIHNsZWVwICggMTAwMCApCiAgd2hpbGUgaTFpSUlJaWlpSSAuIGlzX2FjdGl2ZSA6CiAgIHhibWMgLiBzbGVlcCAoIDIwMCApCiBleGNlcHQgOgogIHRyYWNlYmFjayAuIHByaW50X2V4YyAoICkKIHJldHVybiAnJwogaWYgNzYgLSA3NjogT29vb29vb29PTyArIG9PbzBPME9vbyAlIEkxaTFpSTFpIC4gSTFpaTExaUlpMTFpICsgb08wT29vT29PCiBpZiA3MCAtIDcwOiBvME9vIC8gTzAwb09vT29PMG8wTwpkZWYgSUlpaWlpSWlJSWlpICggcGFnZV92YWx1ZSAsIHJlZmVyZXIgPSBOb25lICkgOgogaWYgcmVmZXJlciA6CiAgcmVmZXJlciA9IFsgKCAnUmVmZXJlcicgLCByZWZlcmVyICkgXQogaWYgcGFnZV92YWx1ZSAuIHN0YXJ0c3dpdGggKCAiaHR0cCIgKSA6CiAgTzBPTyA9IHBhZ2VfdmFsdWUKICBwYWdlX3ZhbHVlID0gSTFpSWkxaWlJSWlJICggcGFnZV92YWx1ZSAsIGhlYWRlcnMgPSByZWZlcmVyICkKICBpZiAzOSAtIDM5OiBJMTFpICsgbzBPbyAtIGlJaWkxSTExSTFJSTEgLSBPT29vT09vCiBJMWkgPSAiKGV2YWxcKGZ1bmN0aW9uXChwLGEsYyxrLGUsKD86cnxkKS4qKSIKIGlmIDQ5IC0gNDk6IEkxMWkKIE8wb09PbzBvID0gcmUgLiBjb21waWxlICggSTFpICkgLiBmaW5kYWxsICggcGFnZV92YWx1ZSApCiBJMWlpaTExID0gIiIKIGlmIE8wb09PbzBvIGFuZCBsZW4gKCBPMG9PT28wbyApID4gMCA6CiAgZm9yIG9PMG9JSUlpaTFpaUlpIGluIE8wb09PbzBvIDoKICAgSTFJSUkxMWlpaWkxMWkxID0gb29PbzBPb08gKCBvTzBvSUlJaWkxaWlJaSApCiAgIGkxaWlJSWkxSSA9IElJMWlJaTExICggSTFJSUkxMWlpaWkxMWkxICwgJ1wnKC4qPylcJycgKQogICBpZiAndW5lc2NhcGUnIGluIEkxSUlJMTFpaWlpMTFpMSA6CiAgICBJMUlJSTExaWlpaTExaTEgPSB1cmxsaWIgLiB1bnF1b3RlICggaTFpaUlJaTFJICkKICAgSTFpaWkxMSArPSBJMUlJSTExaWlpaTExaTEgKyAnXG4nCiAgcHJpbnQgJ2ZpbmFsIHZhbHVlIGlzICcgLCBJMWlpaTExCiAgaWYgMzYgLSAzNjogbzBPbyAqIG9PbzBPME9vbwogIE8wT08gPSBJSTFpSWkxMSAoIEkxaWlpMTEgLCAnc3JjPSIoLio/KSInICkKICBpZiA3NyAtIDc3OiBJaTFJICUgaTFJSWkgLSBPMG9vME9PMAogIHBhZ2VfdmFsdWUgPSBJMWlJaTFpaUlJaUkgKCBPME9PICwgaGVhZGVycyA9IHJlZmVyZXIgKQogIGlmIDkzIC0gOTM6IEkxaWkxMWlJaTExaSAqIG9PbzBPME9vbwogIGlmIDczIC0gNzM6IE9Pb29PT28gLSBvME9vICogaTFJSWkgLyBpMTFpSWlpSWlpICogaWlpMUkxSSAlIG9PME9vb09vTwogIGlmIDU2IC0gNTY6IE9vb29vb29vT08gKiBvT28wTzBPb28gLiBvT28wTzBPb28gLiBJMTFpCiBJSTFPbzAwTzBPbzBPbyA9IElJMWlJaTExICggcGFnZV92YWx1ZSAsICdzdHJlYW1lclwnLio/XCcoLio/KVwnXCknICkKIEkxSTExaSA9IElJMWlJaTExICggcGFnZV92YWx1ZSAsICdmaWxlXCcsXHNcJyguKj8pXCcnICkKIGlmIDY2IC0gNjY6IE8wb28wT08wIC4gbzBPbyArIE9Pb29PT28gLiBpSWlpMUkxMUkxSUkxCiBpZiA1MSAtIDUxOiBPMDBvT29Pb08wbzBPIC4gb09vME8wT29vCiByZXR1cm4gSUkxT28wME8wT28wT28gKyAnIHBsYXlwYXRoPScgKyBJMUkxMWkgKyAnIHBhZ2VVcmw9JyArIE8wT08KIGlmIDQ1IC0gNDU6IGkxSUlpIC0gb09vME8wT29vIC8gTzAgLiBJMTFpCmRlZiBpSTEgKCBwYWdlX3ZhbHVlICwgcmVmZXJlciA9IE5vbmUgKSA6CiBpZiByZWZlcmVyIDoKICByZWZlcmVyID0gWyAoICdSZWZlcmVyJyAsIHJlZmVyZXIgKSBdCiBpZiBwYWdlX3ZhbHVlIC4gc3RhcnRzd2l0aCAoICJodHRwIiApIDoKICBwYWdlX3ZhbHVlID0gSTFpSWkxaWlJSWlJICggcGFnZV92YWx1ZSAsIGhlYWRlcnMgPSByZWZlcmVyICkKIEkxaSA9ICJ2YXIgYSA9ICguKj8pO1xzKnZhciBiID0gKC4qPyk7XHMqdmFyIGMgPSAoLio/KTtccyp2YXIgZCA9ICguKj8pO1xzKnZhciBmID0gKC4qPyk7XHMqdmFyIHZfcGFydCA9ICcoLio/KSc7IgogTzBvT09vMG8gPSByZSAuIGNvbXBpbGUgKCBJMWkgKSAuIGZpbmRhbGwgKCBwYWdlX3ZhbHVlICkgWyAwIF0KIGlmIDE0IC0gMTQ6IEkxMWkKIElpaWkxaUkxaSAsIGkxSTFJICwgaWlJICwgTzBvb28wTzBvbzAgLCBvTzAwbzAgLCBvTzBvSUlJaWkxaWlJaSA9ICggTzBvT09vMG8gKQogb08wMG8wID0gaW50ICggb08wMG8wICkKIElpaWkxaUkxaSA9IGludCAoIElpaWkxaUkxaSApIC8gb08wMG8wCiBpMUkxSSA9IGludCAoIGkxSTFJICkgLyBvTzAwbzAKIGlpSSA9IGludCAoIGlpSSApIC8gb08wMG8wCiBPMG9vbzBPMG9vMCA9IGludCAoIE8wb29vME8wb28wICkgLyBvTzAwbzAKIGlmIDQ5IC0gNDk6IElpMUkgLyBpMUlJaSAlIE8wb28wT08wIC4gbzBPbwogb09Pb09vbzBPMCA9ICdydG1wOi8vJyArIHN0ciAoIElpaWkxaUkxaSApICsgJy4nICsgc3RyICggaTFJMUkgKSArICcuJyArIHN0ciAoIGlpSSApICsgJy4nICsgc3RyICggTzBvb28wTzBvbzAgKSArIG9PMG9JSUlpaTFpaUlpIDsKIHJldHVybiBvT09vT29vME8wCiBpZiA0NSAtIDQ1OiBpMTFpSWlpSWlpCmRlZiBvMDBvbzAgKCB1cmwgLCB1c2VyYWdlbnQgPSBOb25lICkgOgogc3RyID0gJyNFWFRNM1UnCiBzdHIgKz0gJ1xuI0VYVC1YLVNUUkVBTS1JTkY6UFJPR1JBTS1JRD0xLEJBTkRXSURUSD0zNjE4MTYnCiBzdHIgKz0gJ1xuJyArIHVybCArICcmYnl0ZXM9MC0yMDAwMDAnCiBvb29PT09PTyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBpMTEgLCAndGVzdGZpbGUubTN1JyApCiBzdHIgKz0gJ1xuJwogT28wb09vb09vT28gKCBvb29PT09PTyAsIHN0ciApCiBpZiA0OSAtIDQ5OiBpaWkxSTFJIC4gSTExaSAuIGkxMWlJaWlJaWkgLSBvTzBPb29Pb08gLyBPMG9vME9PMAogcmV0dXJuIG9vb09PT09PCiBpZiA2MiAtIDYyOiBpaWkxSTFJCmRlZiBPbzBvT29vT29PbyAoIGZpbGVfbmFtZSAsIHBhZ2VfZGF0YSAsIGFwcGVuZCA9IEZhbHNlICkgOgogaWYgYXBwZW5kIDoKICBvTzAwbzAgPSBvcGVuICggZmlsZV9uYW1lICwgJ2EnICkKICBvTzAwbzAgLiB3cml0ZSAoIHBhZ2VfZGF0YSApCiAgb08wMG8wIC4gY2xvc2UgKCApCiBlbHNlIDoKICBvTzAwbzAgPSBvcGVuICggZmlsZV9uYW1lICwgJ3diJyApCiAgb08wMG8wIC4gd3JpdGUgKCBwYWdlX2RhdGEgKQogIG9PMDBvMCAuIGNsb3NlICggKQogIHJldHVybiAnJwogIGlmIDEgLSAxOiBJMWkxaUkxaSAvIEkxaTFpSTFpIC0gaTExaUlpaUlpaQpkZWYgT08wbyAoIGZpbGVfbmFtZSApIDoKIG9PMDBvMCA9IG9wZW4gKCBmaWxlX25hbWUgLCAncmInICkKIE8wb29vME8wb28wID0gb08wMG8wIC4gcmVhZCAoICkKIG9PMDBvMCAuIGNsb3NlICggKQogcmV0dXJuIE8wb29vME8wb28wCiBpZiAzMiAtIDMyOiBPb29vb29vb09PIC0gb08wbyAtIGkxMWlJaWlJaWkgKiBPT29vT09vIC8gb09vME8wT29vICsgT29vb29vb29PTwpkZWYgaWkxSTFJMTExICggcGFnZV9kYXRhICkgOgogaW1wb3J0IHJlICwgYmFzZTY0ICwgdXJsbGliIDsKIElpMUlpID0gcGFnZV9kYXRhCiB3aGlsZSAnZ2VoKCcgaW4gSWkxSWkgOgogIGlmIElpMUlpIC4gc3RhcnRzd2l0aCAoICdsb2woJyApIDogSWkxSWkgPSBJaTFJaSBbIDUgOiAtIDEgXQogIGlmIDM5IC0gMzk6IElpMUkgLSBpMUlJaSAvIGkxMUlpMTFJMUlpMWkgLiBvME9vICogaTFJSWkgLSBpSWlpMUkxMUkxSUkxCiAgSWkxSWkgPSByZSAuIGNvbXBpbGUgKCAnIiguKj8pIicgKSAuIGZpbmRhbGwgKCBJaTFJaSApIFsgMCBdIDsKICBJaTFJaSA9IGJhc2U2NCAuIGI2NGRlY29kZSAoIElpMUlpICkgOwogIElpMUlpID0gdXJsbGliIC4gdW5xdW90ZSAoIElpMUlpICkgOwogcmV0dXJuIElpMUlpCiBpZiA1NSAtIDU1OiBvME9vICogT09vb09PbyAlIGkxMUlpMTFJMUlpMWkgLiBpSWlpMUkxMUkxSUkxICogSUkKZGVmIG8wb28wMDAwICggcGFnZV9kYXRhICkgOgogaTExMWkxaSA9IEkxaUlpMWlpSUlpSSAoIHBhZ2VfZGF0YSApIDsKIElpSWlpMUkxSSA9ICcoaHR0cC4qKScKIGltcG9ydCB1dWlkCiBPTzBPb29vMG9vID0gc3RyICggdXVpZCAuIHV1aWQxICggKSApIC4gdXBwZXIgKCApCiBJMWkxMTFJaUlpSWkxID0gcmUgLiBjb21waWxlICggSWlJaWkxSTFJICkgLiBmaW5kYWxsICggaTExMWkxaSApCiBvbyA9IFsgKCAnWC1QbGF5YmFjay1TZXNzaW9uLUlkJyAsIE9PME9vb28wb28gKSBdCiBmb3IgaTFJSTExSUkxIGluIEkxaTExMUlpSWlJaTEgOgogIHRyeSA6CiAgIElJMUlJSWlpID0gSTFpSWkxaWlJSWlJICggaTFJSTExSUkxICwgaGVhZGVycyA9IG9vICkgOwogICBpZiA0MCAtIDQwOiBvTzBvICUgSTFpaTExaUlpMTFpCiAgZXhjZXB0IDogcGFzcwogIGlmIDYyIC0gNjI6IE9Pb29PT28KIHJldHVybiBwYWdlX2RhdGEgKyAnfCZYLVBsYXliYWNrLVNlc3Npb24tSWQ9JyArIE9PME9vb28wb28KIGlmIDE1IC0gMTU6IE8wMG9Pb09vTzBvME8gKyBPMG9vME9PMCAuIGlpaTFJMUkgKiBJMWlpMTFpSWkxMWkgLiBvTzBvCiBpZiAxOCAtIDE4OiBpMUlJaSAlIG9PME9vb09vTyArIElJICUgTzBvbzBPTzAKZGVmIG9PTyAoIHBhZ2VfZGF0YSApIDoKIGlmIHBhZ2VfZGF0YSAuIHN0YXJ0c3dpdGggKCAnaHR0cDovL2RhZy50b3RhbC1zdHJlYW0ubmV0JyApIDoKICBvbyA9IFsgKCAnVXNlci1BZ2VudCcgLCAnVmVyaXNtby1CbGFja1VJXygyLjQuNy41LjguMC4zNCknICkgXQogIHBhZ2VfZGF0YSA9IEkxaUlpMWlpSUlpSSAoIHBhZ2VfZGF0YSAsIGhlYWRlcnMgPSBvbyApIDsKICBpZiA1MyAtIDUzOiBPT29vT09vICUgb09vME8wT29vICogb09vME8wT29vCiBpZiAnMTI3LjAuMC4xJyBpbiBwYWdlX2RhdGEgOgogIHJldHVybiBPT28wbzBPbyAoIHBhZ2VfZGF0YSApCiBlbGlmIElJMWlJaTExICggcGFnZV9kYXRhICwgJ3dtc0F1dGhTaWduJTNEKFteJSZdKyknICkgIT0gJycgOgogIG9vb29Pb08wTyA9IElJMWlJaTExICggcGFnZV9kYXRhICwgJyZ2ZXJfdD0oW14mXSspJicgKSArICc/d21zQXV0aFNpZ249JyArIElJMWlJaTExICggcGFnZV9kYXRhICwgJ3dtc0F1dGhTaWduJTNEKFteJSZdKyknICkgKyAnPT0vbXA0OicgKyBJSTFpSWkxMSAoIHBhZ2VfZGF0YSAsICdcXD95PShbXiZdKykmJyApCiBlbHNlIDoKICBvb29vT29PME8gPSBJSTFpSWkxMSAoIHBhZ2VfZGF0YSAsICdocmVmPSIoW14iXSspIlteIl0rJCcgKQogIGlmIGxlbiAoIG9vb29Pb08wTyApID09IDAgOgogICBvb29vT29PME8gPSBwYWdlX2RhdGEKIG9vb29Pb08wTyA9IG9vb29Pb08wTyAuIHJlcGxhY2UgKCAnICcgLCAnJTIwJyApCiByZXR1cm4gb29vb09vTzBPCiBpZiAxIC0gMTogSTExaSAvIEkxaWkxMWlJaTExaSArIElpMUkgLiBPT29vT09vIC8gSTExaSAtIE9vMG9vTzBvbzBvTwpkZWYgSUkxaUlpMTEgKCBkYXRhICwgcmVfcGF0dGVuICkgOgogaTEgPSAnJwogaUlJMUkxID0gcmUgLiBzZWFyY2ggKCByZV9wYXR0ZW4gLCBkYXRhICkKIGlmIGlJSTFJMSAhPSBOb25lIDoKICBpMSA9IGlJSTFJMSAuIGdyb3VwICggMSApCiBlbHNlIDoKICBpMSA9ICcnCiByZXR1cm4gaTEKIGlmIDUgLSA1OiBpaWkxSTFJCmRlZiBPT28wbzBPbyAoIHBhZ2VfZGF0YSApIDoKIG9vb29Pb08wTyA9ICcnCiBpZiAnMTI3LjAuMC4xJyBpbiBwYWdlX2RhdGEgOgogIG9vb29Pb08wTyA9IElJMWlJaTExICggcGFnZV9kYXRhICwgJyZ2ZXJfdD0oW14mXSspJicgKSArICcgbGl2ZT10cnVlIHRpbWVvdXQ9MTUgcGxheXBhdGg9JyArIElJMWlJaTExICggcGFnZV9kYXRhICwgJ1xcP3k9KFthLXpBLVowLTktX1xcLkBdKyknICkKICBpZiA0IC0gNDogT28wb29PMG9vMG9PICUgSUkgLyBJMWlpMTFpSWkxMWkgLiBpaWkxSTFJIC8gaWlpMUkxSSAtIEkxMWkKIGlmIElJMWlJaTExICggcGFnZV9kYXRhICwgJ3Rva2VuPShbXiZdKykmJyApICE9ICcnIDoKICBvb29vT29PME8gPSBvb29vT29PME8gKyAnP3Rva2VuPScgKyBJSTFpSWkxMSAoIHBhZ2VfZGF0YSAsICd0b2tlbj0oW14mXSspJicgKQogZWxpZiBJSTFpSWkxMSAoIHBhZ2VfZGF0YSAsICd3bXNBdXRoU2lnbiUzRChbXiUmXSspJyApICE9ICcnIDoKICBvb29vT29PME8gPSBJSTFpSWkxMSAoIHBhZ2VfZGF0YSAsICcmdmVyX3Q9KFteJl0rKSYnICkgKyAnP3dtc0F1dGhTaWduPScgKyBJSTFpSWkxMSAoIHBhZ2VfZGF0YSAsICd3bXNBdXRoU2lnbiUzRChbXiUmXSspJyApICsgJz09L21wNDonICsgSUkxaUlpMTEgKCBwYWdlX2RhdGEgLCAnXFw/eT0oW14mXSspJicgKQogZWxzZSA6CiAgb29vb09vTzBPID0gSUkxaUlpMTEgKCBwYWdlX2RhdGEgLCAnSFJFRj0iKFteIl0rKSInICkKICBpZiA3OSAtIDc5OiBJMTFpICsgSUkKIGlmICdkYWcxLmFzeCcgaW4gb29vb09vTzBPIDoKICByZXR1cm4gb09PICggb29vb09vTzBPICkKICBpZiAxMCAtIDEwOiBvT28wTzBPb28gKyBPMAogaWYgJ2RldmlubGl2ZWZzLmZwbGl2ZS5uZXQnIG5vdCBpbiBvb29vT29PME8gOgogIG9vb29Pb08wTyA9IG9vb29Pb08wTyAuIHJlcGxhY2UgKCAnZGV2aW5saXZlJyAsICdmbGl2ZScgKQogaWYgJ3Blcm1saXZlZnMuZnBsaXZlLm5ldCcgbm90IGluIG9vb29Pb08wTyA6CiAgb29vb09vTzBPID0gb29vb09vTzBPIC4gcmVwbGFjZSAoICdwZXJtbGl2ZScgLCAnZmxpdmUnICkKIHJldHVybiBvb29vT29PME8KIGlmIDQzIC0gNDM6IGlJaWkxSTExSTFJSTEgLyBvTzBPb29Pb08gJSBPT29vT09vIC0gaWlpMUkxSQogaWYgNjIgLSA2MjogTzAwb09vT29PMG8wTwpkZWYgTzAwMG9PbyAoIHN0cl9ldmFsICkgOgogT29PT09PID0gIiIKIHRyeSA6CiAgSTFpaUlpMTExSSA9ICJ3LGkscyxlPSgiICsgc3RyX2V2YWwgKyAnKScKICBleGVjICggSTFpaUlpMTExSSApCiAgT29PT09PID0gSWlpaTFpSWlpICggdyAsIGkgLCBzICwgZSApCiBleGNlcHQgOiB0cmFjZWJhY2sgLiBwcmludF9leGMgKCBmaWxlID0gc3lzIC4gc3Rkb3V0ICkKIGlmIDY5IC0gNjk6IElpMUkgJSBPb29vb29vb09PIC4gbzBPbwogcmV0dXJuIE9vT09PTwogaWYgMzQgLSAzNDogTzBvbzBPTzAgKiBvTzBvIC0gSTFpMWlJMWkgLSBvME9vIC0gTzBvbzBPTzAKZGVmIElpaWkxaUlpaSAoIHcgLCBpICwgcyAsIGUgKSA6CiBJaTFpSWkxMTFJMWkgPSAwIDsKIEkxSUlJMTExaSA9IDAgOwogaWlJMWlpaSA9IDAgOwogT09vT09vMDBPMG8wID0gWyBdIDsKIE9vME8wT28wME8gPSBbIF0gOwogd2hpbGUgVHJ1ZSA6CiAgaWYgKCBJaTFpSWkxMTFJMWkgPCA1ICkgOgogICBPbzBPME9vMDBPIC4gYXBwZW5kICggdyBbIElpMWlJaTExMUkxaSBdICkKICBlbGlmICggSWkxaUlpMTExSTFpIDwgbGVuICggdyApICkgOgogICBPT29PT28wME8wbzAgLiBhcHBlbmQgKCB3IFsgSWkxaUlpMTExSTFpIF0gKSA7CiAgSWkxaUlpMTExSTFpICs9IDEgOwogIGlmICggSTFJSUkxMTFpIDwgNSApIDoKICAgT28wTzBPbzAwTyAuIGFwcGVuZCAoIGkgWyBJMUlJSTExMWkgXSApCiAgZWxpZiAoIEkxSUlJMTExaSA8IGxlbiAoIGkgKSApIDoKICAgT09vT09vMDBPMG8wIC4gYXBwZW5kICggaSBbIEkxSUlJMTExaSBdICkKICBJMUlJSTExMWkgKz0gMSA7CiAgaWYgKCBpaUkxaWlpIDwgNSApIDoKICAgT28wTzBPbzAwTyAuIGFwcGVuZCAoIHMgWyBpaUkxaWlpIF0gKQogIGVsaWYgKCBpaUkxaWlpIDwgbGVuICggcyApICkgOgogICBPT29PT28wME8wbzAgLiBhcHBlbmQgKCBzIFsgaWlJMWlpaSBdICkgOwogIGlpSTFpaWkgKz0gMSA7CiAgaWYgKCBsZW4gKCB3ICkgKyBsZW4gKCBpICkgKyBsZW4gKCBzICkgKyBsZW4gKCBlICkgPT0gbGVuICggT09vT09vMDBPMG8wICkgKyBsZW4gKCBPbzBPME9vMDBPICkgKyBsZW4gKCBlICkgKSA6CiAgIGJyZWFrIDsKICAgaWYgOSAtIDk6IE9Pb29PT28gLiBvME9vIC0gSTExaQogSWlpaUlpaUlJaSA9ICcnIC4gam9pbiAoIE9Pb09PbzAwTzBvMCApCiBpMWlpSUlpSTFpaUkgPSAnJyAuIGpvaW4gKCBPbzBPME9vMDBPICkKIEkxSUlJMTExaSA9IDAgOwogSTExSWkxMTFJID0gWyBdIDsKIGZvciBJaTFpSWkxMTFJMWkgaW4gcmFuZ2UgKCAwICwgbGVuICggT09vT09vMDBPMG8wICkgLCAyICkgOgogIGlmIDk4IC0gOTg6IGlJaWkxSTExSTFJSTEgKyBJSSAlIG9PMG8gKyBPMDBvT29Pb08wbzBPICUgb08wbwogIGlJMUkxSTExSWlJSSA9IC0gMSA7CiAgaWYgKCBvcmQgKCBpMWlpSUlpSTFpaUkgWyBJMUlJSTExMWkgXSApICUgMiApIDoKICAgaUkxSTFJMTFJaUlJID0gMSA7CiAgIGlmIDQ3IC0gNDc6IElpMUkgJSBpSWlpMUkxMUkxSUkxCiAgSTExSWkxMTFJIC4gYXBwZW5kICggY2hyICggaW50ICggSWlpaUlpaUlJaSBbIElpMWlJaTExMUkxaSA6IElpMWlJaTExMUkxaSArIDIgXSAsIDM2ICkgLSBpSTFJMUkxMUlpSUkgKSApIDsKICBJMUlJSTExMWkgKz0gMSA7CiAgaWYgKCBJMUlJSTExMWkgPj0gbGVuICggT28wTzBPbzAwTyApICkgOgogICBJMUlJSTExMWkgPSAwIDsKIG9PT29Pb28wTzAgPSAnJyAuIGpvaW4gKCBJMTFJaTExMUkgKQogaWYgJ2V2YWwoZnVuY3Rpb24odyxpLHMsZSknIGluIG9PT29Pb28wTzAgOgogIHByaW50ICdTVElMTCBHT2luZycKICBvT09vT29vME8wID0gcmUgLiBjb21waWxlICggJ2V2YWxcKGZ1bmN0aW9uXCh3LGkscyxlXCkuKn1cKCguKj8pXCknICkgLiBmaW5kYWxsICggb09Pb09vbzBPMCApIFsgMCBdCiAgcmV0dXJuIE8wMDBvT28gKCBvT09vT29vME8wICkKIGVsc2UgOgogIHByaW50ICdGSU5JU0hFRCcKICByZXR1cm4gb09Pb09vbzBPMAogIGlmIDExIC0gMTE6IG8wT28gJSBPMG9vME9PMCAtIEkxaWkxMWlJaTExaSAtIElpMUkgKyBPT29vT09vCmRlZiBvb09vME9vTyAoIHBhZ2VfdmFsdWUgLCByZWdleF9mb3JfdGV4dCA9ICcnICwgaXRlcmF0aW9ucyA9IDEgLCB0b3RhbF9pdGVyYXRpb24gPSAxICkgOgogdHJ5IDoKICBvME8wTzAgPSBOb25lCiAgaWYgcGFnZV92YWx1ZSAuIHN0YXJ0c3dpdGggKCAiaHR0cCIgKSA6CiAgIHBhZ2VfdmFsdWUgPSBJMWlJaTFpaUlJaUkgKCBwYWdlX3ZhbHVlICkKICBwcmludCAncGFnZV92YWx1ZScgLCBwYWdlX3ZhbHVlCiAgaWYgcmVnZXhfZm9yX3RleHQgYW5kIGxlbiAoIHJlZ2V4X2Zvcl90ZXh0ICkgPiAwIDoKICAgcGFnZV92YWx1ZSA9IHJlIC4gY29tcGlsZSAoIHJlZ2V4X2Zvcl90ZXh0ICkgLiBmaW5kYWxsICggcGFnZV92YWx1ZSApIFsgMCBdCiAgIGlmIDU1IC0gNTU6IE8wIC0gSUkKICBwYWdlX3ZhbHVlID0gb09PMG8wb28wICggcGFnZV92YWx1ZSAsIGl0ZXJhdGlvbnMgLCB0b3RhbF9pdGVyYXRpb24gKQogZXhjZXB0IDogdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggZmlsZSA9IHN5cyAuIHN0ZG91dCApCiBwcmludCAndW5wYWNrZWQnICwgcGFnZV92YWx1ZQogaWYgJ3NhdjFsaXZlLnR2JyBpbiBwYWdlX3ZhbHVlIDoKICBwYWdlX3ZhbHVlID0gcGFnZV92YWx1ZSAuIHJlcGxhY2UgKCAnc2F2MWxpdmUudHYnICwgJ3Nhd2xpdmUudHYnICkKICBwcmludCAnc2F2MSB1bnBhY2tlZCcgLCBwYWdlX3ZhbHVlCiByZXR1cm4gcGFnZV92YWx1ZQogaWYgNzggLSA3ODogaWlpMUkxSSArIE9vMG9vTzBvbzBvTyAuIEkxaTFpSTFpCmRlZiBvT08wbzBvbzAgKCBzSmF2YXNjcmlwdCAsIGl0ZXJhdGlvbiA9IDEgLCB0b3RhbGl0ZXJhdGlvbnMgPSAyICkgOgogcHJpbnQgJ2l0ZXJhdGlvbicgLCBpdGVyYXRpb24KIGlmIHNKYXZhc2NyaXB0IC4gc3RhcnRzd2l0aCAoICd2YXIgXzB4Y2I4YT0nICkgOgogIE9vSUlpMWlJID0gc0phdmFzY3JpcHQgLiBzcGxpdCAoICd2YXIgXzB4Y2I4YT0nICkKICBJMWlpSWkxMTFJID0gIm15YXJyYXk9IiArIE9vSUlpMWlJIFsgMSBdIC4gc3BsaXQgKCAiZXZhbCgiICkgWyAwIF0KICBleGVjICggSTFpaUlpMTExSSApCiAgb08wT29vME9vb09PbyA9IDYyCiAgTzAwbzBPID0gaW50ICggT29JSWkxaUkgWyAxIF0gLiBzcGxpdCAoICIsNjIsIiApIFsgMSBdIC4gc3BsaXQgKCAnLCcgKSBbIDAgXSApCiAgaUlJSWlJID0gbXlhcnJheSBbIDAgXQogIE8wMCA9IG15YXJyYXkgWyAzIF0KICB3aXRoIG9wZW4gKCAndGVtcCBmaWxlJyArIHN0ciAoIGl0ZXJhdGlvbiApICsgJy5qcycgLCAid2IiICkgYXMgaTFpaUlJSTFJSWlJSUlJIDoKICAgaTFpaUlJSTFJSWlJSUlJIC4gd3JpdGUgKCBzdHIgKCBPMDAgKSApCiAgIGlmIDE5IC0gMTk6IE9vMG9vTzBvbzBvTyAtIE9Pb29PT28gLyBPT29vT09vICsgb09vME8wT29vCiBlbHNlIDoKICBpZiA5OCAtIDk4OiBpSWlpMUkxMUkxSUkxICUgaWlpMUkxSSArIE8wMG9Pb09vTzBvME8gLiBpMTFJaTExSTFJaTFpCiAgT29JSWkxaUkgPSBzSmF2YXNjcmlwdCAuIHNwbGl0ICggInJuIHB9KCciICkKICBwcmludCBPb0lJaTFpSQogIGlmIDk5IC0gOTk6IE8wICsgTzAgKiBPMDBvT29Pb08wbzBPICsgTzAgKiBJaTFJCiAgaUlJSWlJICwgb08wT29vME9vb09PbyAsIE8wMG8wTyAsIE8wMCA9ICggJycgLCAnMCcgLCAnMCcgLCAnJyApCiAgaWYgODAgLSA4MDogbzBPbyAuIE8wb28wT08wCiAgSTFpaUlpMTExSSA9ICJwMSxhMSxjMSxrMT0oJyIgKyBPb0lJaTFpSSBbIDEgXSAuIHNwbGl0ICggIi5zcGxpIiApIFsgMCBdICsgJyknCiAgZXhlYyAoIEkxaWlJaTExMUkgKQogTzAwID0gTzAwIC4gc3BsaXQgKCAnfCcgKQogT29JSWkxaUkgPSBPb0lJaTFpSSBbIDEgXSAuIHNwbGl0ICggIikpJyIgKQogaWYgNDcgLSA0NzogTzAwb09vT29PMG8wTyArIGkxMUlpMTFJMUlpMWkgKyBvTzBPb29Pb08gJSBpMTFpSWlpSWlpCiBpZiA5MyAtIDkzOiBJMTFpICUgb08wbyAuIE8wIC8gT28wb29PMG9vMG9PICogSWkxSQogaWYgMjkgLSAyOTogT09vb09PbwogaWYgODYgLSA4Njogb08wT29vT29PIC4gSTFpMWlJMWkKIGlmIDIgLSAyOiBPb29vb29vb09PCiBpZiA2MCAtIDYwOiBJMWlpMTFpSWkxMWkKIGlmIDgxIC0gODE6IG9PMG8gJSBPMG9vME9PMAogaWYgODcgLSA4NzogaUlpaTFJMTFJMUlJMSAuIE9vb29vb29vT08gKiBvTzBvCiBpZiAxMDAgLSAxMDA6IEkxaWkxMWlJaTExaSAvIGkxSUlpIC0gbzBPbyAlIE8wb28wT08wIC0gaUlpaTFJMTFJMUlJMQogaWYgMTcgLSAxNzogTzAwb09vT29PMG8wTyAvIE9Pb29PT28gJSBvT28wTzBPb28KIGlmIDcxIC0gNzE6IEkxaTFpSTFpIC4gSUkgLiBJMWlpMTFpSWkxMWkKIGlmIDY4IC0gNjg6IGkxMWlJaWlJaWkgJSBJaTFJICogSTFpaTExaUlpMTFpICogSTFpMWlJMWkgKiBvTzBPb29Pb08gKyBPMAogaWYgNjYgLSA2NjogTzAwb09vT29PMG8wTyAlIEkxMWkgJSBPb29vb29vb09PCiBpZiAzNCAtIDM0OiBPT29vT09vIC8gT28wb29PMG9vMG9PICUgTzAgLiBJMWlpMTFpSWkxMWkgLiBpMUlJaQogaWYgMjkgLSAyOTogTzAgLiBJSQogaWYgNjYgLSA2NjogSWkxSSAqIGlJaWkxSTExSTFJSTEgJSBpSWlpMUkxMUkxSUkxICogSTFpMWlJMWkgLSBpMTFJaTExSTFJaTFpIC0gSTFpMWlJMWkKIGlmIDcwIC0gNzA6IElJICsgSWkxSQogaWYgOTMgLSA5MzogSUkgKyBPMG9vME9PMAogaWYgMzMgLSAzMzogTzAKIGlmIDc4IC0gNzg6IE8wIC8gb08wT29vT29PICogSTFpaTExaUlpMTFpCiBpZiA1MCAtIDUwOiBPb29vb29vb09PIC0gaUlpaTFJMTFJMUlJMSArIGkxSUlpICUgSUkgLSBpSWlpMUkxMUkxSUkxICUgTzAKIGlmIDU4IC0gNTg6IEkxaTFpSTFpICsgaUlpaTFJMTFJMUlJMQogT09PME9PTzAwb28gPSAnJwogTzBvb28wTzBvbzAgPSAnJwogaWYgNjUgLSA2NTogb08wT29vT29PIC0gSUkgJSBPT29vT09vIC0gb08wbyAqIE9vMG9vTzBvbzBvTyArIE8wb28wT08wCiBpZiA3OSAtIDc5OiBpMTFJaTExSTFJaTFpIC4gb08wbyAlIElJIC0gb09vME8wT29vCiBvMG9PMG9PME8gPSBzdHIgKCBpaTExSUkgKCBpSUlJaUkgLCBvTzBPb28wT29vT09vICwgTzAwbzBPICwgTzAwICwgT09PME9PTzAwb28gLCBPMG9vbzBPMG9vMCAsIGl0ZXJhdGlvbiApICkKIGlmIDkgLSA5OiBpSWlpMUkxMUkxSUkxICUgTzAwb09vT29PMG8wTyAvIG9PMG8gLSBPMAogaWYgNTUgLSA1NTogT28wb29PMG9vMG9PIC0gSTFpaTExaUlpMTFpCiBpZiAxMDAgLSAxMDA6IE8wCiBpZiA3OSAtIDc5OiBpSWlpMUkxMUkxSUkxCiBpZiA4MSAtIDgxOiBpaWkxSTFJICsgaUlpaTFJMTFJMUlJMSAqIElJIC0gaUlpaTFJMTFJMUlJMSAuIGlpaTFJMUkKIGlmIGl0ZXJhdGlvbiA+PSB0b3RhbGl0ZXJhdGlvbnMgOgogIGlmIDQ4IC0gNDg6IE8wMG9Pb09vTzBvME8gLiBPb29vb29vb09PIC4gbzBPbyAuIG9PMG8gJSBJMTFpIC8gT28wb29PMG9vMG9PCiAgcmV0dXJuIG8wb08wb08wTwogZWxzZSA6CiAgaWYgMTEgLSAxMTogaTFJSWkgJSBJMWlpMTFpSWkxMWkgJSBPbzBvb08wb28wb08KICByZXR1cm4gb09PMG8wb28wICggbzBvTzBvTzBPICwgaXRlcmF0aW9uICsgMSApCiAgaWYgOTkgLSA5OTogaTExSWkxMUkxSWkxaSAvIGlJaWkxSTExSTFJSTEgLSBPMG9vME9PMCAqIEkxMWkgJSBvME9vCmRlZiBpaTExSUkgKCBwICwgYSAsIGMgLCBrICwgZSAsIGQgLCBpdGVyYXRpb24gLCB2ID0gMSApIDoKIGlmIDEzIC0gMTM6IEkxaWkxMWlJaTExaQogaWYgNzAgLSA3MDogSUkgKyBPMCAuIElpMUkgKiBPMG9vME9PMAogaWYgMiAtIDI6IE9vb29vb29vT08gLiBpaWkxSTFJIC4gSTFpMWlJMWkKIHdoaWxlICggYyA+PSAxICkgOgogIGMgPSBjIC0gMQogIGlmICggayBbIGMgXSApIDoKICAgSTFpSUlJMUlpaUkgPSBzdHIgKCBPT29vb09vTzBPbyAoIGMgLCBhICkgKQogICBpZiB2ID09IDEgOgogICAgcCA9IHJlIC4gc3ViICggJ1xcYicgKyBJMWlJSUkxSWlpSSArICdcXGInICwgayBbIGMgXSAsIHAgKQogICBlbHNlIDoKICAgIHAgPSBPbzAwMCAoIHAgLCBJMWlJSUkxSWlpSSAsIGsgWyBjIF0gKQogICAgaWYgNDggLSA0ODogaTExaUlpaUlpaSAlIElpMUkKICAgIGlmIDI5IC0gMjk6IE9vMG9vTzBvbzBvTyArIGkxMWlJaWlJaWkgJSBPMDBvT29Pb08wbzBPCiAgICBpZiA5MyAtIDkzOiBvTzBvICUgaUlpaTFJMTFJMUlJMQogICAgaWYgOTAgLSA5MDogbzBPbyAtIGlpaTFJMUkgLyBPMG9vME9PMCAvIE8wIC8gTzAwb09vT29PMG8wTwogICAgaWYgODcgLSA4Nzogb08wbyAvIEkxaTFpSTFpICsgaUlpaTFJMTFJMUlJMQogICAgaWYgOTMgLSA5MzogaUlpaTFJMTFJMUlJMSArIElpMUkgJSBpMTFJaTExSTFJaTFpCiByZXR1cm4gcAogaWYgMjEgLSAyMTogaWlpMUkxSQogaWYgNiAtIDY6IEkxaTFpSTFpCiBpZiA0NiAtIDQ2OiBJMWkxaUkxaSArIElpMUkKZGVmIE9vMDAwICggc291cmNlX3N0ciAsIHdvcmRfdG9fZmluZCAsIHJlcGxhY2Vfd2l0aCApIDoKIE9vMDBvME8wTyA9IE5vbmUKIE9vMDBvME8wTyA9IHNvdXJjZV9zdHIgLiBzcGxpdCAoIHdvcmRfdG9fZmluZCApCiBpZiBsZW4gKCBPbzAwbzBPME8gKSA+IDEgOgogIG8wb29PME9vT28gPSBbIF0KICBvMG9PTzAwID0gMAogIGZvciBpaTExaWlJaSBpbiBPbzAwbzBPME8gOgogICBpZiA0OCAtIDQ4OiBJMWkxaUkxaSAlIE8wMG9Pb09vTzBvME8KICAgbzBvb08wT29PbyAuIGFwcGVuZCAoIGlpMTFpaUlpICkKICAgaWlpaSA9IHdvcmRfdG9fZmluZAogICBpZiAzIC0gMzogSTFpMWlJMWkgJSBPMG9vME9PMCArIG9PbzBPME9vbwogICBpZiA0NyAtIDQ3OiBPMCAqIG8wT28gKiBJMWlpMTFpSWkxMWkgLiBvTzBPb29Pb08KICAgaWYgbzBvT08wMCA9PSBsZW4gKCBPbzAwbzBPME8gKSAtIDEgOgogICAgaWlpaSA9ICcnCiAgIGVsc2UgOgogICAgaWYgbGVuICggaWkxMWlpSWkgKSA9PSAwIDoKICAgICBpZiAoIGxlbiAoIE9vMDBvME8wTyBbIG8wb09PMDAgKyAxIF0gKSA9PSAwIGFuZCB3b3JkX3RvX2ZpbmQgWyAwIF0gLiBsb3dlciAoICkgbm90IGluICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejEyMzQ1Njc4OTBfJyApIG9yICggbGVuICggT28wMG8wTzBPIFsgbzBvT08wMCArIDEgXSApID4gMCBhbmQgT28wMG8wTzBPIFsgbzBvT08wMCArIDEgXSBbIDAgXSAuIGxvd2VyICggKSBub3QgaW4gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MTIzNDU2Nzg5MF8nICkgOgogICAgICBpaWlpID0gcmVwbGFjZV93aXRoCiAgICAgIGlmIDk1IC0gOTU6IE8wb28wT08wICUgSTFpMWlJMWkgLiBPMCAlIElJCiAgICBlbHNlIDoKICAgICBpZiAoIE9vMDBvME8wTyBbIG8wb09PMDAgXSBbIC0gMSBdIC4gbG93ZXIgKCApIG5vdCBpbiAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoxMjM0NTY3ODkwXycgKSBhbmQgKCAoIGxlbiAoIE9vMDBvME8wTyBbIG8wb09PMDAgKyAxIF0gKSA9PSAwIGFuZCB3b3JkX3RvX2ZpbmQgWyAwIF0gLiBsb3dlciAoICkgbm90IGluICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejEyMzQ1Njc4OTBfJyApIG9yICggbGVuICggT28wMG8wTzBPIFsgbzBvT08wMCArIDEgXSApID4gMCBhbmQgT28wMG8wTzBPIFsgbzBvT08wMCArIDEgXSBbIDAgXSAuIGxvd2VyICggKSBub3QgaW4gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MTIzNDU2Nzg5MF8nICkgKSA6CiAgICAgIGlpaWkgPSByZXBsYWNlX3dpdGgKICAgICAgaWYgNjggLSA2ODogb09vME8wT29vIC4gb09vME8wT29vIC0gSTExaSAvIE8wMG9Pb09vTzBvME8gLiBpMTFJaTExSTFJaTFpIC8gaTFJSWkKICAgbzBvb08wT29PbyAuIGFwcGVuZCAoIGlpaWkgKQogICBvMG9PTzAwICs9IDEKICAgaWYgMTIgLSAxMjogSTExaSAqIGkxSUlpICogTzAwb09vT29PMG8wTwogIHNvdXJjZV9zdHIgPSAnJyAuIGpvaW4gKCBvMG9vTzBPb09vICkKIHJldHVybiBzb3VyY2Vfc3RyCiBpZiAyMyAtIDIzOiBpaWkxSTFJIC8gTzAgLyBvME9vCmRlZiBJMTFvMDAwMG8wT28gKCBudW0gLCByYWRpeCApIDoKIGlmIDkwIC0gOTA6IGlJaWkxSTExSTFJSTEgKiBvTzBPb29Pb08KIElJSUlJID0gIiIKIGlmIG51bSA9PSAwIDogcmV0dXJuICcwJwogd2hpbGUgbnVtID4gMCA6CiAgSUlJSUkgPSAiMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6IiBbIG51bSAlIHJhZGl4IF0gKyBJSUlJSQogIG51bSAvPSByYWRpeAogcmV0dXJuIElJSUlJCiBpZiA3MCAtIDcwOiBPT29vT09vICogb08wT29vT29PIC0gaTExSWkxMUkxSWkxaQpkZWYgT09vb29Pb08wT28gKCBjYyAsIGEgKSA6CiBJMWlJSUkxSWlpSSA9ICIiIGlmIGNjIDwgYSBlbHNlIE9Pb29vT29PME9vICggaW50ICggY2MgLyBhICkgLCBhICkKIGNjID0gKCBjYyAlIGEgKQogb09Pb28wID0gY2hyICggY2MgKyAyOSApIGlmIGNjID4gMzUgZWxzZSBzdHIgKCBJMTFvMDAwMG8wT28gKCBjYyAsIDM2ICkgKQogcmV0dXJuIEkxaUlJSTFJaWlJICsgb09Pb28wCiBpZiAyNCAtIDI0OiBJMWlpMTFpSWkxMWkgLSBJaTFJICsgSTExaSAvIE9vMG9vTzBvbzBvTyAlIG8wT28gKyBpSWlpMUkxMUkxSUkxCiBpZiA3OSAtIDc5OiBvTzBvIC8gaTExSWkxMUkxSWkxaQpkZWYgSWkxSUlpICggY29va2llSmFyICkgOgogdHJ5IDoKICBvT28wMG8gPSAiIgogIGZvciBJMUlJSUkxaSAsIE9Pb29vb29vb08gaW4gZW51bWVyYXRlICggY29va2llSmFyICkgOgogICBvT28wMG8gKz0gT09vb29vb29vTyAuIG5hbWUgKyAiPSIgKyBPT29vb29vb29PIC4gdmFsdWUgKyAiOyIKIGV4Y2VwdCA6IHBhc3MKIGlmIDQgLSA0OiBvT28wTzBPb28gKyBPT29vT09vCiByZXR1cm4gb09vMDBvCiBpZiAxNyAtIDE3OiBJMWlpMTFpSWkxMWkgKiBvTzBvCiBpZiAxNSAtIDE1OiBpMTFpSWlpSWlpIC8gaTExSWkxMUkxSWkxaSAlIG8wT28KZGVmIElpaWkxSTEgKCBjb29raWVKYXIgLCBDT09LSUVGSUxFICkgOgogdHJ5IDoKICBPb09Pb08wMDBPMDBvTyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBpMTEgLCBDT09LSUVGSUxFICkKICBjb29raWVKYXIgLiBzYXZlICggT29PT29PMDAwTzAwb08gLCBpZ25vcmVfZGlzY2FyZCA9IFRydWUgKQogZXhjZXB0IDogcGFzcwogaWYgNzEgLSA3MTogSUkgLyBJMTFpICogaUlpaTFJMTFJMUlJMQpkZWYgSWlpaUkgKCBDT09LSUVGSUxFICkgOgogaWYgNTcgLSA1NzogaWlpMUkxSSArIElJICUgSTExaSAuIEkxaWkxMWlJaTExaSAvIEkxaWkxMWlJaTExaSAqIE8wCiBJaTFpaUlJMWkgPSBOb25lCiBpZiBDT09LSUVGSUxFIDoKICB0cnkgOgogICBPb09Pb08wMDBPMDBvTyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBpMTEgLCBDT09LSUVGSUxFICkKICAgSWkxaWlJSTFpID0gY29va2llbGliIC4gTFdQQ29va2llSmFyICggKQogICBJaTFpaUlJMWkgLiBsb2FkICggT29PT29PMDAwTzAwb08gLCBpZ25vcmVfZGlzY2FyZCA9IFRydWUgKQogIGV4Y2VwdCA6CiAgIElpMWlpSUkxaSA9IE5vbmUKICAgaWYgNTIgLSA1MjogSWkxSSAvIElJCiBpZiBub3QgSWkxaWlJSTFpIDoKICBJaTFpaUlJMWkgPSBjb29raWVsaWIgLiBMV1BDb29raWVKYXIgKCApCiAgaWYgOTEgLSA5MTogSTFpMWlJMWkgLiBvT28wTzBPb28gKyBvTzBPb29Pb08KIHJldHVybiBJaTFpaUlJMWkKIGlmIDM2IC0gMzY6IE8wICogSTFpaTExaUlpMTFpICUgT28wb29PMG9vMG9PICogT28wb29PMG9vMG9PIC8gSTFpaTExaUlpMTFpICogSTFpMWlJMWkKZGVmIG8wT08wT28gKCBmdW5fY2FsbCAsIHBhZ2VfZGF0YSAsIENvb2tpZV9KYXIgKSA6CiBJaUkgPSAnJwogaWYgaTFpaUlJSTExMWlpIG5vdCBpbiBzeXMgLiBwYXRoIDoKICBzeXMgLiBwYXRoIC4gYXBwZW5kICggaTFpaUlJSTExMWlpICkKICBpZiA4NyAtIDg3OiBpMTFJaTExSTFJaTFpIC4gTzAgJSBJSSArIEkxMWkgKyBPMG9vME9PMCAlIGlJaWkxSTExSTFJSTEKIHByaW50IGZ1bl9jYWxsCiB0cnkgOgogIGlpMTFpSUlpID0gJ2ltcG9ydCAnICsgZnVuX2NhbGwgLiBzcGxpdCAoICcuJyApIFsgMCBdCiAgcHJpbnQgaWkxMWlJSWkgLCBzeXMgLiBwYXRoCiAgZXhlYyAoIGlpMTFpSUlpICkKICBwcmludCAnZG9uZScKIGV4Y2VwdCA6CiAgcHJpbnQgJ2Vycm9yIGluIGltcG9ydCcKICB0cmFjZWJhY2sgLiBwcmludF9leGMgKCBmaWxlID0gc3lzIC4gc3Rkb3V0ICkKIHByaW50ICdyZXRfdmFsPScgKyBmdW5fY2FsbAogZXhlYyAoICdyZXRfdmFsPScgKyBmdW5fY2FsbCApCiBwcmludCBJaUkKIGlmIDEgLSAxOiBPbzBvb08wb28wb08gKiBvTzBvCiByZXR1cm4gc3RyICggSWlJICkKIGlmIDY2IC0gNjY6IG9PMG8gKyBpMUlJaSAlIG9PME9vb09vTyAuIE8wICogSTExaSAlIEkxMWkKZGVmIElJMWkxMTEgKCB1cmwgKSA6CiBPMG9PTzBvID0gSTFpSWkxaWlJSWlJICggdXJsICkKIGlpaWlJMUlpSTFJMSA9ICIiCiBpSTExMWkxMWlJMSA9ICIiCiBJSUkxaWkgPSAiPHNjcmlwdC4qP3NyYz1cIiguKj9yZWNhcC4qPylcIiIKIGkxID0gcmUgLiBmaW5kYWxsICggSUlJMWlpICwgTzBvT08wbyApCiBpSTFJSUkxaUlpMTEgPSBGYWxzZQogaTExSTFJID0gTm9uZQogaUkxMTFpMTFpSTEgPSBOb25lCiBpZiA3MSAtIDcxOiBPbzBvb08wb28wb08KIGlmIGkxIGFuZCBsZW4gKCBpMSApID4gMCA6CiAgSWlpaTFpMTFpaTFJaSA9IGkxIFsgMCBdCiAgaUkxSUlJMWlJaTExID0gVHJ1ZQogIGlmIDEyIC0gMTI6IGlpaTFJMUkgLiBPMG9vME9PMAogIE8wb09JMUlpSTFpSWlJaWlpID0gJ2NoYWxsZW5nZS4qP1wnKC4qPylcJycKICBJMWlpSTFJSSA9ICdcJyguKj8pXCcnCiAgSUlJaSA9IEkxaUlpMWlpSUlpSSAoIElpaWkxaTExaWkxSWkgKQogIGlpaWlJMUlpSTFJMSA9IHJlIC4gZmluZGFsbCAoIE8wb09JMUlpSTFpSWlJaWlpICwgSUlJaSApIFsgMCBdCiAgaWlpaTExSWlpaWlJaSA9ICdodHRwOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS9yZWxvYWQ/Yz0nIDsKICBvbzBvbzBPMCA9IElpaWkxaTExaWkxSWkgLiBzcGxpdCAoICdrPScgKSBbIDEgXQogIGlpaWkxMUlpaWlpSWkgKz0gaWlpaUkxSWlJMUkxICsgJyZrPScgKyBvbzBvbzBPMCArICcmY2FwdGNoYV9rPTEmdHlwZT1pbWFnZSZsYW5nPWVuLUdCJwogIElpSUlpaUkgPSBJMWlJaTFpaUlJaUkgKCBpaWlpMTFJaWlpaUlpICkKICBpMTFJMUkgPSByZSAuIGZpbmRhbGwgKCBJMWlpSTFJSSAsIElpSUlpaUkgKSBbIDAgXQogIG8wbzBPTzBvMDBvME8gPSAnaHR0cDovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkvaW1hZ2U/Yz0nICsgaTExSTFJCiAgaWYgbm90IG8wbzBPTzBvMDBvME8gLiBzdGFydHN3aXRoICggImh0dHAiICkgOgogICBvMG8wT08wbzAwbzBPID0gJ2h0dHA6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpLycgKyBvMG8wT08wbzAwbzBPCiAgaW1wb3J0IHJhbmRvbQogIE9vbyA9IHJhbmRvbSAuIHJhbmRyYW5nZSAoIDEwMCAsIDEwMDAgLCA1ICkKICBJSUlJSUlpMWkgPSBvcyAuIHBhdGggLiBqb2luICggaTExICwgc3RyICggT29vICkgKyAiY2FwdGNoYS5pbWciICkKICBpaWlpaTExSTEgPSBvcGVuICggSUlJSUlJaTFpICwgIndiIiApCiAgaWlpaWkxMUkxIC4gd3JpdGUgKCBJMWlJaTFpaUlJaUkgKCBvMG8wT08wbzAwbzBPICkgKQogIGlpaWlpMTFJMSAuIGNsb3NlICggKQogIElpMSA9IE9PT28gKCBjYXB0Y2hhID0gSUlJSUlJaTFpICkKICBpSTExMWkxMWlJMSA9IElpMSAuIGdldCAoICkKICBvcyAuIHJlbW92ZSAoIElJSUlJSWkxaSApCiByZXR1cm4gaTExSTFJICwgaUkxMTFpMTFpSTEKIGlmIDM1IC0gMzU6IGkxMUlpMTFJMUlpMWkgLSBJMWlpMTFpSWkxMWkgLiBvT28wTzBPb28gKiBvT28wTzBPb28gLyBpMTFpSWlpSWlpICsgSTExaQpkZWYgSTFpSWkxaWlJSWlJICggdXJsICwgY29va2llSmFyID0gTm9uZSAsIHBvc3QgPSBOb25lICwgdGltZW91dCA9IDIwICwgaGVhZGVycyA9IE5vbmUgKSA6CiBpZiA4NyAtIDg3OiBvTzBvICUgaUlpaTFJMTFJMUlJMQogaWYgNzIgLSA3MjogaWlpMUkxSSAuIGlpaTFJMUkgLSBJMTFpCiBpMUlpaUkxaUlpID0gdXJsbGliMiAuIEhUVFBDb29raWVQcm9jZXNzb3IgKCBjb29raWVKYXIgKQogb09PbzAwTzBPT09vID0gdXJsbGliMiAuIGJ1aWxkX29wZW5lciAoIGkxSWlpSTFpSWkgLCB1cmxsaWIyIC4gSFRUUEJhc2ljQXV0aEhhbmRsZXIgKCApICwgdXJsbGliMiAuIEhUVFBIYW5kbGVyICggKSApCiBpZiA0OCAtIDQ4OiBvT28wTzBPb28gLSBpMTFJaTExSTFJaTFpICsgb09vME8wT29vIC0gbzBPbyAqIGkxMWlJaWlJaWkgLiBPbzBvb08wb28wb08KIG8wMG9PTzAgPSB1cmxsaWIyIC4gUmVxdWVzdCAoIHVybCApCiBvMDBvT08wIC4gYWRkX2hlYWRlciAoICdVc2VyLUFnZW50JyAsICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjE7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMzMuMC4xNzUwLjE1NCBTYWZhcmkvNTM3LjM2JyApCiBpZiBoZWFkZXJzIDoKICBmb3IgT08wT08wT08gLCBJMWlJSUlpSSBpbiBoZWFkZXJzIDoKICAgbzAwb09PMCAuIGFkZF9oZWFkZXIgKCBPTzBPTzBPTyAsIEkxaUlJSWlJICkKICAgaWYgNjAgLSA2MDogbzBPbyAuIGkxMWlJaWlJaWkgKyBvTzBvIC8gSTExaSAqIG9PME9vb09vTyAqIGlpaTFJMUkKIG9Pb28gPSBvT09vMDBPME9PT28gLiBvcGVuICggbzAwb09PMCAsIHBvc3QgLCB0aW1lb3V0ID0gdGltZW91dCApCiBPT29vbyA9IG9Pb28gLiByZWFkICggKQogb09vbyAuIGNsb3NlICggKQogcmV0dXJuIE9Pb29vIDsKIGlmIDU5IC0gNTk6IG9PbzBPME9vbyArIE9vMG9vTzBvbzBvTyAtIGlpaTFJMUkgLiBPT29vT09vICsgbzBPbyAlIElpMUkKZGVmIGkxMTFJaWkgKCBzdHIgLCByZWcgPSBOb25lICkgOgogaWYgcmVnIDoKICBzdHIgPSByZSAuIGZpbmRhbGwgKCByZWcgLCBzdHIgKSBbIDAgXQogbzBvMCA9IHVybGxpYiAuIHVucXVvdGUgKCBzdHIgWyAwIDogbGVuICggc3RyICkgLSAxIF0gKSA7CiBpMWlJaTFJSWlJSUkxID0gJycgOwogZm9yIE8waTFJSTFJaWlpMUkxMSBpbiByYW5nZSAoIGxlbiAoIG8wbzAgKSApIDoKICBpMWlJaTFJSWlJSUkxICs9IGNociAoIG9yZCAoIG8wbzAgWyBPMGkxSUkxSWlpaTFJMTEgXSApIC0gbzBvMCBbIGxlbiAoIG8wbzAgKSAtIDEgXSApIDsKIGkxaUlpMUlJaUlJSTEgPSB1cmxsaWIgLiB1bnF1b3RlICggaTFpSWkxSUlpSUlJMSApCiBwcmludCBpMWlJaTFJSWlJSUkxCiByZXR1cm4gaTFpSWkxSUlpSUlJMQogaWYgMTkgLSAxOTogTzAwb09vT29PMG8wTwpkZWYgaTFJMTFpSUlJMWkxSSAoIHN0ciApIDoKIE8wME8gPSByZSAuIGZpbmRhbGwgKCAndW5lc2NhcGVcKFwnKC4qPylcJycgLCBzdHIgKQogcHJpbnQgJ2pzJyAsIE8wME8KIGlmICggbm90IE8wME8gPT0gTm9uZSApIGFuZCBsZW4gKCBPMDBPICkgPiAwIDoKICBmb3IgTzBPT09PT29vIGluIE8wME8gOgogICBpZiA2OSAtIDY5OiBvME9vICsgT28wb29PMG9vMG9PCiAgIHN0ciA9IHN0ciAuIHJlcGxhY2UgKCBPME9PT09Pb28gLCB1cmxsaWIgLiB1bnF1b3RlICggTzBPT09PT29vICkgKQogcmV0dXJuIHN0cgogaWYgNyAtIDc6IE9vMG9vTzBvbzBvTyArIElpMUkKSWlpaTFJID0gMApkZWYgb29PbyAoIG0gLCBodG1sX3BhZ2UgLCBjb29raWVKYXIgKSA6CiBnbG9iYWwgSWlpaTFJCiBJaWlpMUkgKz0gMQogb29vb28wT28wID0gbSBbICdleHByZScgXQogTzBPTyA9IG0gWyAncGFnZScgXQogbzAgPSByZSAuIGNvbXBpbGUgKCAnXCRMaXZlU3RyZWFtQ2FwdGNoYVxbKFteXF1dKilcXScgKSAuIGZpbmRhbGwgKCBvb29vbzBPbzAgKSBbIDAgXQogaWYgOSAtIDk6IElJICogb09vME8wT29vICsgTzAgLSBJSQogSWlpaTFpMTFpaTFJaSA9IHJlIC4gY29tcGlsZSAoIG8wICkgLiBmaW5kYWxsICggaHRtbF9wYWdlICkgWyAwIF0KIHByaW50IG9vb29vME9vMCAsIG8wICwgSWlpaTFpMTFpaTFJaQogaWYgbm90IElpaWkxaTExaWkxSWkgLiBzdGFydHN3aXRoICggImh0dHAiICkgOgogIG8wMCA9ICdodHRwOi8vJyArICIiIC4gam9pbiAoIE8wT08gLiBzcGxpdCAoICcvJyApIFsgMiA6IDMgXSApCiAgaWYgSWlpaTFpMTFpaTFJaSAuIHN0YXJ0c3dpdGggKCAiLyIgKSA6CiAgIElpaWkxaTExaWkxSWkgPSBvMDAgKyBJaWlpMWkxMWlpMUlpCiAgZWxzZSA6CiAgIElpaWkxaTExaWkxSWkgPSBvMDAgKyAnLycgKyBJaWlpMWkxMWlpMUlpCiAgIGlmIDUzIC0gNTM6IElJICogSTFpMWlJMWkgLyBpSWlpMUkxMUkxSUkxIC8gbzBPbyAlIEkxMWkKIElJSUlJSWkxaSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBpMTEgLCBzdHIgKCBJaWlpMUkgKSArICJjYXB0Y2hhLmpwZyIgKQogaWlpaWkxMUkxID0gb3BlbiAoIElJSUlJSWkxaSAsICJ3YiIgKQogcHJpbnQgJyBjIGNhcHVybCcgLCBJaWlpMWkxMWlpMUlpCiBvMDBvT08wID0gdXJsbGliMiAuIFJlcXVlc3QgKCBJaWlpMWkxMWlpMUlpICkKIG8wMG9PTzAgLiBhZGRfaGVhZGVyICggJ1VzZXItQWdlbnQnICwgJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMTsgcnY6MTQuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xNC4wLjEnICkKIGlmICdyZWZlcicgaW4gbSA6CiAgbzAwb09PMCAuIGFkZF9oZWFkZXIgKCAnUmVmZXJlcicgLCBtIFsgJ3JlZmVyJyBdICkKIGlmICdhZ2VudCcgaW4gbSA6CiAgbzAwb09PMCAuIGFkZF9oZWFkZXIgKCAnVXNlci1hZ2VudCcgLCBtIFsgJ2FnZW50JyBdICkKIGlmICdzZXRjb29raWUnIGluIG0gOgogIHByaW50ICdhZGRpbmcgY29va2llJyAsIG0gWyAnc2V0Y29va2llJyBdCiAgbzAwb09PMCAuIGFkZF9oZWFkZXIgKCAnQ29va2llJyAsIG0gWyAnc2V0Y29va2llJyBdICkKICBpZiAzOSAtIDM5OiBJMWlpMTFpSWkxMWkgLyBPb29vb29vb09PIC4gSTFpaTExaUlpMTFpICogSTExaSAvIG9PMG8KICBpZiAzOCAtIDM4OiBJMWlpMTFpSWkxMWkgLyBpMTFJaTExSTFJaTFpICUgSUkgKiBPMDBvT29Pb08wbzBPICsgaTExaUlpaUlpaSAlIGkxMUlpMTFJMUlpMWkKICBpZiA2MSAtIDYxOiBJSSAtIE8wb28wT08wICUgSTExaSAvIGkxMUlpMTFJMUlpMWkgLyBPbzBvb08wb28wb08gKyBpSWlpMUkxMUkxSUkxCiAgaWYgODcgLSA4NzogSUkgKyBpMTFJaTExSTFJaTFpICsgTzAgLyBpMUlJaSAlIEkxaTFpSTFpIC8gSUkKIHVybGxpYjIgLiB1cmxvcGVuICggbzAwb09PMCApCiBvT29vID0gdXJsbGliMiAuIHVybG9wZW4gKCBvMDBvT08wICkKIGlmIDY0IC0gNjQ6IEkxaWkxMWlJaTExaSAlIEkxaTFpSTFpIC4gSUkgJSBJMWlpMTFpSWkxMWkgKyBPMDBvT29Pb08wbzBPICogSTFpMWlJMWkKIGlpaWlpMTFJMSAuIHdyaXRlICggb09vbyAuIHJlYWQgKCApICkKIG9Pb28gLiBjbG9zZSAoICkKIGlpaWlpMTFJMSAuIGNsb3NlICggKQogSWkxID0gT09PbyAoIGNhcHRjaGEgPSBJSUlJSUlpMWkgKQogaUkxMTFpMTFpSTEgPSBJaTEgLiBnZXQgKCApCiByZXR1cm4gaUkxMTFpMTFpSTEKIGlmIDgzIC0gODM6IE9Pb29PT28gJSBJaTFJICsgTzAwb09vT29PMG8wTyAlIGkxMWlJaWlJaWkgKyBPMApjbGFzcyBPT09vICggeGJtY2d1aSAuIFdpbmRvd0RpYWxvZyApIDoKIGRlZiBfX2luaXRfXyAoIHNlbGYgLCAqIGFyZ3MgLCAqKiBrd2FyZ3MgKSA6CiAgc2VsZiAuIGNwdGxvYyA9IGt3YXJncyAuIGdldCAoICdjYXB0Y2hhJyApCiAgc2VsZiAuIGltZyA9IHhibWNndWkgLiBDb250cm9sSW1hZ2UgKCAzMzUgLCAzMCAsIDYyNCAsIDYwICwgc2VsZiAuIGNwdGxvYyApCiAgc2VsZiAuIGFkZENvbnRyb2wgKCBzZWxmIC4gaW1nICkKICBzZWxmIC4ga2JkID0geGJtYyAuIEtleWJvYXJkICggKQogIGlmIDY1IC0gNjU6IGlJaWkxSTExSTFJSTEgJSBJaTFJICsgTzAgLyBPb29vb29vb09PCiBkZWYgZ2V0ICggc2VsZiApIDoKICBzZWxmIC4gc2hvdyAoICkKICB0aW1lIC4gc2xlZXAgKCAyICkKICBzZWxmIC4ga2JkIC4gZG9Nb2RhbCAoICkKICBpZiAoIHNlbGYgLiBrYmQgLiBpc0NvbmZpcm1lZCAoICkgKSA6CiAgIE8wMDAwb08wbzAwID0gc2VsZiAuIGtiZCAuIGdldFRleHQgKCApCiAgIHNlbGYgLiBjbG9zZSAoICkKICAgcmV0dXJuIE8wMDAwb08wbzAwCiAgc2VsZiAuIGNsb3NlICggKQogIHJldHVybiBGYWxzZQogIGlmIDgwIC0gODA6IE9vb29vb29vT08gKyBJMWkxaUkxaQogIGlmIDk1IC0gOTU6IElJIC8gSWkxSSAqIElJIC0gT29vb29vb29PTyAqIE9vb29vb29vT08gJSBJMWlpMTFpSWkxMWkKICBpZiA0MyAtIDQzOiBvT28wTzBPb28gLiBJSQpjbGFzcyBJMUkxaTFpICggeGJtY2d1aSAuIFdpbmRvd0RpYWxvZyApIDoKIGlmIDg3IC0gODc6IG9PMG8gLyBJMWkxaUkxaSAuIGkxMUlpMTFJMUlpMWkgLSBpaWkxSTFJIC8gSTFpaTExaUlpMTFpCiBkZWYgX19pbml0X18gKCBzZWxmICkgOgogIHNlbGYgLiBhZGRDb250cm9sICggeGJtY2d1aSAuIENvbnRyb2xJbWFnZSAoIDI0MCAsIDEzMCAsIDg0MCAsIDQ4MCAsIElpMUkxSWkgKSApCiAgaWYgNDEgLSA0MTogb08wT29vT29PCiAgaWYgMjcgLSAyNzogb09vME8wT29vICogb08wbyAlIGlJaWkxSTExSTFJSTEgLiBvME9vCiAgaWYgNzAgLSA3MDogTzAwb09vT29PMG8wTyAlIG9PME9vb09vTyAlIE8wIC4gaTFJSWkgLyBJSQogZGVmIG9uQWN0aW9uICggc2VsZiAsIGFjdGlvbiApIDoKICBpZiBhY3Rpb24gPT0gT08wb29Pb09PME9PbyA6CiAgIHNlbGYgLiBjbG9zZSAoIHNlbGYgKQogICBpZiA1MSAtIDUxOiBpSWlpMUkxMUkxSUkxICogT09vb09PbyAvIGlJaWkxSTExSTFJSTEgLiBpSWlpMUkxMUkxSUkxIC4gT28wb29PMG9vMG9PICogTzAwb09vT29PMG8wTwogIGlmIGFjdGlvbiA9PSBvTzBvbzBvMDBvME8gOgogICBzZWxmIC4gY2xvc2UgKCBzZWxmICkKICAgaWYgODAgLSA4MDogaUlpaTFJMTFJMUlJMQpPTzBvb09vT08wT09vID0gMTAKb08wb28wbzAwbzBPID0gOTIKaWYgMjMgLSAyMzogb08wT29vT29PCmRlZiBPT09vb28wT29vT29PICggKSA6CiBpbXBvcnQgdGltZQogcmV0dXJuIHN0ciAoIGludCAoIHRpbWUgLiB0aW1lICggKSAqIDEwMDAgKSApCiBpZiA3MSAtIDcxOiBJSSAqIG9PbzBPME9vbyAuIE8wMG9Pb09vTzBvME8KZGVmIE9vT29vbyAoICkgOgogaW1wb3J0IHRpbWUKIHJldHVybiBzdHIgKCBpbnQgKCB0aW1lIC4gdGltZSAoICkgKSApCiBpZiA0OSAtIDQ5OiBJMWkxaUkxaSAqIE8wIC4gSTFpMWlJMWkKZGVmIGlpMUlJMUlJICggKSA6CiBpMTFpMTFJSTExaSA9IFsgXQogSUkxSWkxSTFpID0gc3lzIC4gYXJndiBbIDIgXQogaWYgbGVuICggSUkxSWkxSTFpICkgPj0gMiA6CiAgT09vb09vb28wT09vMCA9IHN5cyAuIGFyZ3YgWyAyIF0KICBvbzBvME9vT08wbzAgPSBPT29vT29vbzBPT28wIC4gcmVwbGFjZSAoICc/JyAsICcnICkKICBpZiAoIE9Pb29Pb29vME9PbzAgWyBsZW4gKCBPT29vT29vbzBPT28wICkgLSAxIF0gPT0gJy8nICkgOgogICBPT29vT29vbzBPT28wID0gT09vb09vb28wT09vMCBbIDAgOiBsZW4gKCBPT29vT29vbzBPT28wICkgLSAyIF0KICBJSUkxSUlJMTFJSSA9IG9vMG8wT29PTzBvMCAuIHNwbGl0ICggJyYnICkKICBpMTFpMTFJSTExaSA9IHsgfQogIGZvciBPMGkxSUkxSWlpaTFJMTEgaW4gcmFuZ2UgKCBsZW4gKCBJSUkxSUlJMTFJSSApICkgOgogICBpSWkxaUkgPSB7IH0KICAgaUlpMWlJID0gSUlJMUlJSTExSUkgWyBPMGkxSUkxSWlpaTFJMTEgXSAuIHNwbGl0ICggJz0nICkKICAgaWYgKCBsZW4gKCBpSWkxaUkgKSApID09IDIgOgogICAgaTExaTExSUkxMWkgWyBpSWkxaUkgWyAwIF0gXSA9IGlJaTFpSSBbIDEgXQogcmV0dXJuIGkxMWkxMUlJMTFpCiBpZiA2MyAtIDYzOiBJMWlpMTFpSWkxMWkgLyBvTzBvICogaUlpaTFJMTFJMUlJMSAuIElJCiBpZiA4NSAtIDg1OiBpMTFpSWlpSWlpIC8gaTExaUlpaUlpaSAuIEkxaWkxMWlJaTExaSAuIE8wCmRlZiBPb29PbyAoICkgOgogSUkxSUlJID0ganNvbiAuIGxvYWRzICggb3BlbiAoIE9vMG8wMDAwbzBvMCApIC4gcmVhZCAoICkgKQogSUlJSWlJMTFJMTEgPSBsZW4gKCBJSTFJSUkgKQogZm9yIE8waTFJSTFJaWlpMUkxMSBpbiBJSTFJSUkgOgogIGlJMWkxMWlJSTExMSA9IE8waTFJSTFJaWlpMUkxMSBbIDAgXQogIElpMUkxSWkgPSBPMGkxSUkxSWlpaTFJMTEgWyAxIF0KICBvT28wID0gTzBpMUlJMUlpaWkxSTExIFsgMiBdCiAgdHJ5IDoKICAgaTFpSSA9IE8waTFJSTFJaWlpMUkxMSBbIDMgXQogICBpZiBpMWlJID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBpZiBJaTFJSWlpMTEgLiBnZXRTZXR0aW5nICggJ3VzZV90aHVtYicgKSA9PSAidHJ1ZSIgOgogICAgaTFpSSA9IG9PbzAKICAgZWxzZSA6CiAgICBpMWlJID0gbzBPME9PTzBPb28KICB0cnkgOiBJMWkxMWlpMTEgPSBPMGkxSUkxSWlpaTFJMTEgWyA1IF0KICBleGNlcHQgOiBJMWkxMWlpMTEgPSBOb25lCiAgdHJ5IDogTzBvID0gTzBpMUlJMUlpaWkxSTExIFsgNiBdCiAgZXhjZXB0IDogTzBvID0gTm9uZQogIGlmIDMwIC0gMzA6IGlpaTFJMUkgKyBvTzBPb29Pb08gLSBJMWkxaUkxaSAqIE9vb29vb29vT08KICBpZiBPMGkxSUkxSWlpaTFJMTEgWyA0IF0gPT0gMCA6CiAgIG9Pb09vME8wT09Pb08gKCBJaTFJMUlpICwgaUkxaTExaUlJMTExICwgb09vMCAsIGkxaUkgLCAnJyAsICcnICwgJycgLCAnZmF2JyAsIEkxaTExaWkxMSAsIE8wbyAsIElJSUlpSTExSTExICkKICBlbHNlIDoKICAgaUlJSUlpaTEgKCBpSTFpMTFpSUkxMTEgLCBJaTFJMUlpICwgTzBpMUlJMUlpaWkxSTExIFsgNCBdICwgb09vMCAsIG8wTzBPT08wT29vICwgJycgLCAnJyAsICcnICwgJycgLCAnZmF2JyApCiAgIGlmIDE5IC0gMTk6IEkxaTFpSTFpIC0gT09vb09PbyAuIGlJaWkxSTExSTFJSTEgLiBvTzBvIC8gaWlpMUkxSQogICBpZiA4NyAtIDg3OiBvTzBvIC0gaTExSWkxMUkxSWkxaSAtIGlpaTFJMUkgKyBvT28wTzBPb28gJSBpSWlpMUkxMUkxSUkxIC8gaTExaUlpaUlpaQpkZWYgaTFpSUlJSTFpaUlJaSAoIG5hbWUgLCB1cmwgLCBpY29uaW1hZ2UgLCBmYW5hcnQgLCBtb2RlICwgcGxheWxpc3QgPSBOb25lICwgcmVnZXhzID0gTm9uZSApIDoKIGkxSTFJaUkxaWkgPSBbIF0KIHRyeSA6CiAgaWYgNjQgLSA2NDogT28wb29PMG9vMG9PICogSTExaSAlIG9PME9vb09vTyAtIG9PMG8gKyBJMTFpCiAgbmFtZSA9IG5hbWUgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKQogZXhjZXB0IDoKICBwYXNzCiBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBPbzBvMDAwMG8wbzAgKSA9PSBGYWxzZSA6CiAgSUlJMWlpMWlJSSAoICdNYWtpbmcgRmF2b3JpdGVzIEZpbGUnICkKICBpMUkxSWlJMWlpIC4gYXBwZW5kICggKCBuYW1lICwgdXJsICwgaWNvbmltYWdlICwgZmFuYXJ0ICwgbW9kZSAsIHBsYXlsaXN0ICwgcmVnZXhzICkgKQogIElpaWkxaUkxaSA9IG9wZW4gKCBPbzBvMDAwMG8wbzAgLCAidyIgKQogIElpaWkxaUkxaSAuIHdyaXRlICgganNvbiAuIGR1bXBzICggaTFJMUlpSTFpaSApICkKICBJaWlpMWlJMWkgLiBjbG9zZSAoICkKIGVsc2UgOgogIElJSTFpaTFpSUkgKCAnQXBwZW5kaW5nIEZhdm9yaXRlcycgKQogIElpaWkxaUkxaSA9IG9wZW4gKCBPbzBvMDAwMG8wbzAgKSAuIHJlYWQgKCApCiAgaUlpaTExSSA9IGpzb24gLiBsb2FkcyAoIElpaWkxaUkxaSApCiAgaUlpaTExSSAuIGFwcGVuZCAoICggbmFtZSAsIHVybCAsIGljb25pbWFnZSAsIGZhbmFydCAsIG1vZGUgKSApCiAgaTFJMUkgPSBvcGVuICggT28wbzAwMDBvMG8wICwgInciICkKICBpMUkxSSAuIHdyaXRlICgganNvbiAuIGR1bXBzICggaUlpaTExSSApICkKICBpMUkxSSAuIGNsb3NlICggKQogIGlmIDYyIC0gNjI6IG9PMG8gJSBPT29vT09vICUgbzBPbyArIEkxaTFpSTFpIC4gSTFpaTExaUlpMTFpCiAgaWYgNDggLSA0ODogbzBPbyAqIGkxMWlJaWlJaWkgJSBvTzBPb29Pb08KZGVmIGlpMUkgKCBuYW1lICkgOgogaUlpaTExSSA9IGpzb24gLiBsb2FkcyAoIG9wZW4gKCBPbzBvMDAwMG8wbzAgKSAuIHJlYWQgKCApICkKIGZvciBJMUlJSUkxaSBpbiByYW5nZSAoIGxlbiAoIGlJaWkxMUkgKSApIDoKICBpZiBpSWlpMTFJIFsgSTFJSUlJMWkgXSBbIDAgXSA9PSBuYW1lIDoKICAgZGVsIGlJaWkxMUkgWyBJMUlJSUkxaSBdCiAgIGkxSTFJID0gb3BlbiAoIE9vMG8wMDAwbzBvMCAsICJ3IiApCiAgIGkxSTFJIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBpSWlpMTFJICkgKQogICBpMUkxSSAuIGNsb3NlICggKQogICBicmVhawogeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuQ29udGFpbmVyLlJlZnJlc2giICkKIGlmIDYxIC0gNjE6IGlJaWkxSTExSTFJSTEgLSBPMDBvT29Pb08wbzBPIC8gT28wb29PMG9vMG9PICogTzAwb09vT29PMG8wTyAlIE8wb28wT08wICUgT28wb29PMG9vMG9PCmRlZiBPb29PT09PICggdXJsICkgOgogaWYgSWkxSUlpaTExIC4gZ2V0U2V0dGluZyAoICdVcGRhdGVjb21tb25yZXNvbHZlcnMnICkgPT0gJ3RydWUnIDoKICBpMUlJMTFJSTEgPSBvcyAuIHBhdGggLiBqb2luICggSTExICwgJ2dlbmVzaXNyZXNvbHZlcnMucHknICkKICBpZiB4Ym1jdmZzIC4gZXhpc3RzICggaTFJSTExSUkxICkgOgogICBvcyAuIHJlbW92ZSAoIGkxSUkxMUlJMSApCiAgIGlmIDYzIC0gNjM6IGlpaTFJMUkgJSBpSWlpMUkxMUkxSUkxCiAgSUkxaWkgPSAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2xhbWJkYTgxL2xhbWJkYS1hZGRvbnMvbWFzdGVyL3BsdWdpbi52aWRlby5nZW5lc2lzL2NvbW1vbnJlc29sdmVycy5weScKICBvMDBpSWlpaUlJID0gdXJsbGliIC4gdXJscmV0cmlldmUgKCBJSTFpaSAsIGkxSUkxMUlJMSApCiAgSWkxSUlpaTExIC4gc2V0U2V0dGluZyAoICdVcGRhdGVjb21tb25yZXNvbHZlcnMnICwgJ2ZhbHNlJyApCiB0cnkgOgogIGltcG9ydCBnZW5lc2lzcmVzb2x2ZXJzCiBleGNlcHQgRXhjZXB0aW9uIDoKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oTkpNU29jY2VyLFBsZWFzZSBlbmFibGUgVXBkYXRlIENvbW1vbnJlc29sdmVycyB0byBQbGF5IGluIFNldHRpbmdzLiAtICwxMDAwMCkiICkKICBpZiA1IC0gNTogT29vb29vb29PTyAvIE9Pb29PT28gJSBPMDBvT29Pb08wbzBPICUgSTFpaTExaUlpMTFpICogT28wb29PMG9vMG9PICsgaUlpaTFJMTFJMUlJMQogSTExaWlJMTFpaUkgPSBnZW5lc2lzcmVzb2x2ZXJzIC4gZ2V0ICggdXJsICkgLiByZXN1bHQKIGlmIHVybCA9PSBJMTFpaUkxMWlpSSBvciBJMTFpaUkxMWlpSSBpcyBOb25lIDoKICBpZiA1MSAtIDUxOiBJaTFJIC4gaUlpaTFJMTFJMUlJMSArIEkxaWkxMWlJaTExaSAqIE8wb28wT08wICsgaTFJSWkKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oTkpNU29jY2VyLFVzaW5nIFVybHJlc29sdmVyIG1vZHVsZS4uIC0gLDUwMDApIiApCiAgaW1wb3J0IHVybHJlc29sdmVyCiAgb29PME9PbzAgPSB1cmxyZXNvbHZlciAuIEhvc3RlZE1lZGlhRmlsZSAoIHVybCApCiAgaWYgb29PME9PbzAgOgogICBpSUlJMTFJaWlpMSA9IHVybHJlc29sdmVyIC4gcmVzb2x2ZSAoIHVybCApCiAgIEkxMWlpSTExaWlJID0gaUlJSTExSWlpaTEKIGlmIEkxMWlpSTExaWlJIDoKICBpZiBpc2luc3RhbmNlICggSTExaWlJMTFpaUkgLCBsaXN0ICkgOgogICBmb3IgaTExaTExIGluIEkxMWlpSTExaWlJIDoKICAgIG8wb28wID0gSWkxSUlpaTExIC4gZ2V0U2V0dGluZyAoICdxdWFsaXR5JyApCiAgICBpZiBpMTFpMTEgWyAncXVhbGl0eScgXSA9PSAnSEQnIDoKICAgICBpSUlJMTFJaWlpMSA9IGkxMWkxMSBbICd1cmwnIF0KICAgICBicmVhawogICAgZWxpZiBpMTFpMTEgWyAncXVhbGl0eScgXSA9PSAnU0QnIDoKICAgICBpSUlJMTFJaWlpMSA9IGkxMWkxMSBbICd1cmwnIF0KICAgIGVsaWYgaTExaTExIFsgJ3F1YWxpdHknIF0gPT0gJzEwODBwJyBhbmQgSWkxSUlpaTExIC4gZ2V0U2V0dGluZyAoICcxMDgwcHF1YWxpdHknICkgPT0gJ3RydWUnIDoKICAgICBpSUlJMTFJaWlpMSA9IGkxMWkxMSBbICd1cmwnIF0KICAgICBicmVhawogIGVsc2UgOgogICBpSUlJMTFJaWlpMSA9IEkxMWlpSTExaWlJCiByZXR1cm4gaUlJSTExSWlpaTEKZGVmIE9vTzBPT29PME9vMCAoIG5hbWUgLCBtdV9wbGF5bGlzdCApIDoKIGltcG9ydCB1cmxwYXJzZQogaWYgSWkxSUlpaTExIC4gZ2V0U2V0dGluZyAoICdhc2tfcGxheWxpc3RfaXRlbXMnICkgPT0gJ3RydWUnIDoKICBvTzAwTyA9IFsgXQogIGZvciBPMGkxSUkxSWlpaTFJMTEgaW4gbXVfcGxheWxpc3QgOgogICBJSTExMUlpaWlJMSA9IHVybHBhcnNlIC4gdXJscGFyc2UgKCBPMGkxSUkxSWlpaTFJMTEgKSAuIG5ldGxvYwogICBpZiBJSTExMUlpaWlJMSA9PSAnJyA6CiAgICBvTzAwTyAuIGFwcGVuZCAoIG5hbWUgKQogICBlbHNlIDoKICAgIG9PMDBPIC4gYXBwZW5kICggSUkxMTFJaWlpSTEgKQogIGlJSUlpaUkxaTFpID0geGJtY2d1aSAuIERpYWxvZyAoICkKICBJMUlJSUkxaSA9IGlJSUlpaUkxaTFpIC4gc2VsZWN0ICggJ0Nob29zZSBhIHZpZGVvIHNvdXJjZScgLCBvTzAwTyApCiAgaWYgSTFJSUlJMWkgPj0gMCA6CiAgIGlmICImbW9kZT0xOSIgaW4gbXVfcGxheWxpc3QgWyBJMUlJSUkxaSBdIDoKICAgIHhibWMgLiBQbGF5ZXIgKCApIC4gcGxheSAoIE9vb09PT08gKCBtdV9wbGF5bGlzdCBbIEkxSUlJSTFpIF0gLiByZXBsYWNlICggJyZtb2RlPTE5JyAsICcnICkgKSApCiAgIGVsaWYgIiRkb3JlZ2V4IiBpbiBtdV9wbGF5bGlzdCBbIEkxSUlJSTFpIF0gOgogICAgaWYgNzUgLSA3NTogaTExSWkxMUkxSWkxaQogICAgaUkxaWkxSWkgPSBtdV9wbGF5bGlzdCBbIEkxSUlJSTFpIF0gLiBzcGxpdCAoICcmcmVnZXhzPScgKQogICAgaWYgNzggLSA3ODogaUlpaTFJMTFJMUlJMSAqIG9PbzBPME9vbyAuIG9PbzBPME9vbyAtIGlpaTFJMUkgLiBpSWlpMUkxMUkxSUkxCiAgICBJaTFJMUlpICwgT09vID0gSTExSSAoIGlJMWlpMUlpIFsgMSBdICwgaUkxaWkxSWkgWyAwIF0gKQogICAgeGJtYyAuIFBsYXllciAoICkgLiBwbGF5ICggSWkxSTFJaSApCiAgIGVsc2UgOgogICAgSWkxSTFJaSA9IG11X3BsYXlsaXN0IFsgSTFJSUlJMWkgXQogICAgeGJtYyAuIFBsYXllciAoICkgLiBwbGF5ICggSWkxSTFJaSApCiBlbHNlIDoKICBJMWkxMWlpMTEgPSB4Ym1jIC4gUGxheUxpc3QgKCAxICkKICBJMWkxMWlpMTEgLiBjbGVhciAoICkKICBJSTFpID0gMAogIGZvciBPMGkxSUkxSWlpaTFJMTEgaW4gbXVfcGxheWxpc3QgOgogICBJSTFpICs9IDEKICAgSTExMUkxSSA9IHhibWNndWkgLiBMaXN0SXRlbSAoICclcykgJXMnICUgKCBzdHIgKCBJSTFpICkgLCBuYW1lICkgKQogICBJMWkxMWlpMTEgLiBhZGQgKCBPMGkxSUkxSWlpaTFJMTEgLCBJMTExSTFJICkKICAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggJ3BsYXlsaXN0LnBsYXlvZmZzZXQodmlkZW8sMCknICkKICAgaWYgNTQgLSA1NDogb08wT29vT29PICsgTzAwb09vT29PMG8wTyAlIE8wMG9Pb09vTzBvME8gJSBPT29vT09vCiAgIGlmIDI1IC0gMjU6IE9vMG9vTzBvbzBvTyAtIG9PbzBPME9vbwpkZWYgSWlpMUlJSUlJSUkgKCBuYW1lICwgdXJsICkgOgogaWYgSWkxSUlpaTExIC4gZ2V0U2V0dGluZyAoICdzYXZlX2xvY2F0aW9uJyApID09ICIiIDoKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oJ05KTVNvY2NlcicsJ0Nob29zZSBhIGxvY2F0aW9uIHRvIHNhdmUgZmlsZXMuJywxNTAwMCwiICsgb08gKyAiKSIgKQogIElpMUlJaWkxMSAuIG9wZW5TZXR0aW5ncyAoICkKIE9Pb29Pb29vME9PbzAgPSB7ICd1cmwnIDogdXJsICwgJ2Rvd25sb2FkX3BhdGgnIDogSWkxSUlpaTExIC4gZ2V0U2V0dGluZyAoICdzYXZlX2xvY2F0aW9uJyApIH0KIGRvd25sb2FkZXIgLiBkb3dubG9hZCAoIG5hbWUgLCBPT29vT29vbzBPT28wICkKIGlJSUlpaUkxaTFpID0geGJtY2d1aSAuIERpYWxvZyAoICkKIG9PT29Pb28wTzAgPSBpSUlJaWlJMWkxaSAuIHllc25vICggJ05KTVNvY2NlcicgLCAnRG8geW91IHdhbnQgdG8gYWRkIHRoaXMgZmlsZSBhcyBhIHNvdXJjZT8nICkKIGlmIG9PT29Pb28wTzAgOgogIEkxSTExICggb3MgLiBwYXRoIC4gam9pbiAoIElpMUlJaWkxMSAuIGdldFNldHRpbmcgKCAnc2F2ZV9sb2NhdGlvbicgKSAsIG5hbWUgKSApCiAgaWYgMjcgLSAyNzogSTFpaTExaUlpMTFpICsgb08wbyAqIGkxMUlpMTFJMUlpMWkKICBpZiA4MyAtIDgzOiBpSWlpMUkxMUkxSUkxCmRlZiBpSUlJSWlpMSAoIG5hbWUgLCB1cmwgLCBtb2RlICwgaWNvbmltYWdlICwgZmFuYXJ0ICwgZGVzY3JpcHRpb24gLCBnZW5yZSAsIGRhdGUgLCBjcmVkaXRzICwgc2hvd2NvbnRleHQgPSBGYWxzZSApIDoKIGlmIDcyIC0gNzI6IE8wMG9Pb09vTzBvME8KIG9PMDAgPSBzeXMgLiBhcmd2IFsgMCBdICsgIj91cmw9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSArICImbW9kZT0iICsgc3RyICggbW9kZSApICsgIiZuYW1lPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICsgIiZmYW5hcnQ9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgKQogT09vMDBPID0gVHJ1ZQogaWYgZGF0ZSA9PSAnJyA6CiAgZGF0ZSA9IE5vbmUKIGVsc2UgOgogIGRlc2NyaXB0aW9uICs9ICdcblxuRGF0ZTogJXMnICUgZGF0ZQogb09PTzAwTzBPME9PbyA9IHhibWNndWkgLiBMaXN0SXRlbSAoIG5hbWUgLCBpY29uSW1hZ2UgPSAiRGVmYXVsdEZvbGRlci5wbmciICwgdGh1bWJuYWlsSW1hZ2UgPSBpY29uaW1hZ2UgKQogb09PTzAwTzBPME9PbyAuIHNldEluZm8gKCB0eXBlID0gIlZpZGVvIiAsIGluZm9MYWJlbHMgPSB7ICJUaXRsZSIgOiBuYW1lICwgIlBsb3QiIDogZGVzY3JpcHRpb24gLCAiR2VucmUiIDogZ2VucmUgLCAiZGF0ZWFkZGVkIiA6IGRhdGUgLCAiY3JlZGl0cyIgOiBjcmVkaXRzIH0gKQogb09PTzAwTzBPME9PbyAuIHNldFByb3BlcnR5ICggIkZhbmFydF9JbWFnZSIgLCBmYW5hcnQgKQogaWYgc2hvd2NvbnRleHQgOgogIElJaUlpaUkxaSA9IFsgXQogIGlmIHNob3djb250ZXh0ID09ICdzb3VyY2UnIDoKICAgaWYgbmFtZSBpbiBzdHIgKCBPTzAwTzBPME8wME9vICkgOgogICAgSUlpSWlpSTFpIC4gYXBwZW5kICggKCAnUmVtb3ZlIGZyb20gU291cmNlcycgLCAnWEJNQy5SdW5QbHVnaW4oJXM/bW9kZT04Jm5hbWU9JXMpJyAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKICBlbGlmIHNob3djb250ZXh0ID09ICdkb3dubG9hZCcgOgogICBJSWlJaWlJMWkgLiBhcHBlbmQgKCAoICdEb3dubG9hZCcgLCAnWEJNQy5SdW5QbHVnaW4oJXM/dXJsPSVzJm1vZGU9OSZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogIGVsaWYgc2hvd2NvbnRleHQgPT0gJ2ZhdicgOgogICBJSWlJaWlJMWkgLiBhcHBlbmQgKCAoICdSZW1vdmUgZnJvbSBOSk1Tb2NjZXIgRmF2b3JpdGVzJyAsICdYQk1DLlJ1blBsdWdpbiglcz9tb2RlPTYmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKICAgaWYgNDkgLSA0OTogSTExaSAuIEkxaTFpSTFpIC4gaTFJSWkgKiBvTzBvICUgaUlpaTFJMTFJMUlJMQogIGlmIG5vdCBuYW1lIGluIG8wb09vME9vbzBPIDoKICAgSUlpSWlpSTFpIC4gYXBwZW5kICggKCAnQWRkIHRvIE5KTVNvY2NlciBGYXZvcml0ZXMnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NSZuYW1lPSVzJnVybD0lcyZpY29uaW1hZ2U9JXMmZmFuYXJ0PSVzJmZhdl9tb2RlPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpY29uaW1hZ2UgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgKSAsIG1vZGUgKSApICkKICBvT09PMDBPME8wT09vIC4gYWRkQ29udGV4dE1lbnVJdGVtcyAoIElJaUlpaUkxaSApCiBPT28wME8gPSB4Ym1jcGx1Z2luIC4gYWRkRGlyZWN0b3J5SXRlbSAoIGhhbmRsZSA9IGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHVybCA9IG9PMDAgLCBsaXN0aXRlbSA9IG9PT08wME8wTzBPT28gLCBpc0ZvbGRlciA9IFRydWUgKQogaWYgMzUgLSAzNTogSTExaSArIElJIC0gb08wbyAlIElpMUkgJSBPT29vT09vICUgb08wbwogcmV0dXJuIE9PbzAwTwpkZWYgaWkxSUlpSUkxMTFJICggdXJsICwgdGl0bGUgLCBtZWRpYV90eXBlID0gJ3ZpZGVvJyApIDoKIGlmIDg3IC0gODc6IE8wb28wT08wIC0gSTExaSAlIEkxMWkgLiBJaTFJIC8gSTExaQogaWYgNiAtIDY6IG9PMG8gLyBpSWlpMUkxMUkxSUkxICogT29vb29vb29PTyAqIGkxMWlJaWlJaWkKIGltcG9ydCB5b3V0dWJlZGwKIGlmIG5vdCB1cmwgPT0gJycgOgogIGlmIG1lZGlhX3R5cGUgPT0gJ2F1ZGlvJyA6CiAgIHlvdXR1YmVkbCAuIHNpbmdsZV9ZRCAoIHVybCAsIGRvd25sb2FkID0gVHJ1ZSAsIGF1ZGlvID0gVHJ1ZSApCiAgZWxzZSA6CiAgIHlvdXR1YmVkbCAuIHNpbmdsZV9ZRCAoIHVybCAsIGRvd25sb2FkID0gVHJ1ZSApCiBlbGlmIHhibWMgLiBQbGF5ZXIgKCApIC4gaXNQbGF5aW5nICggKSA9PSBUcnVlIDoKICBpbXBvcnQgWURTdHJlYW1FeHRyYWN0b3IKICBpZiBZRFN0cmVhbUV4dHJhY3RvciAuIGlzRG93bmxvYWRpbmcgKCApID09IFRydWUgOgogICBpZiA3OSAtIDc5OiBJMWkxaUkxaSAlIEkxaWkxMWlJaTExaQogICBZRFN0cmVhbUV4dHJhY3RvciAuIG1hbmFnZURvd25sb2FkcyAoICkKICBlbHNlIDoKICAgT28wb09PID0geGJtYyAuIFBsYXllciAoICkgLiBnZXRQbGF5aW5nRmlsZSAoICkKICAgaWYgODYgLSA4NjogaUlpaTFJMTFJMUlJMSAvIE8wCiAgIE9vMG9PTyA9IE9vMG9PTyAuIHNwbGl0ICggJ3xVc2VyLUFnZW50PScgKSBbIDAgXQogICBJMTExSTFJID0geyAndXJsJyA6IE9vMG9PTyAsICd0aXRsZScgOiB0aXRsZSAsICdtZWRpYV90eXBlJyA6IG1lZGlhX3R5cGUgfQogICB5b3V0dWJlZGwgLiBzaW5nbGVfWUQgKCAnJyAsIGRvd25sb2FkID0gVHJ1ZSAsIGRsX2luZm8gPSBJMTExSTFJICkKIGVsc2UgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihET1dOTE9BRCxGaXJzdCBQbGF5IFtDT0xPUiB5ZWxsb3ddV0hJTEUgcGxheWluZyBkb3dubG9hZFsvQ09MT1JdICwxMDAwMCkiICkKICBpZiAxNyAtIDE3OiBvTzBPb29Pb08KZGVmIGlpSWlpaSAoIHNpdGVfbmFtZSAsIHNlYXJjaF90ZXJtID0gTm9uZSApIDoKIE8wb29vb09Pb28wTyA9ICcnCiBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBvT28wb29vbzAwbyApID09IEZhbHNlIG9yIElpMUlJaWkxMSAuIGdldFNldHRpbmcgKCAnY2xlYXJzZWFjaGhpc3RvcnknICkgPT0gJ3RydWUnIDoKICBPbzBvT29vT29PbyAoIG9PbzBvb29vMDBvICwgJycgKQogIElpMUlJaWkxMSAuIHNldFNldHRpbmcgKCAiY2xlYXJzZWFjaGhpc3RvcnkiICwgImZhbHNlIiApCiBpZiBzaXRlX25hbWUgPT0gJ2hpc3RvcnknIDoKICBvT29vTyA9IE9PMG8gKCBvT28wb29vbzAwbyApCiAgaTEgPSByZSAuIGNvbXBpbGUgKCAnKC4rPyk6KC4qPykoPzpccnxcbiknICkgLiBmaW5kYWxsICggb09vb08gKQogIGlmIDM5IC0gMzk6IG8wT28gKyBvT28wTzBPb28KICBmb3IgaUkxaTExaUlJMTExICwgc2VhcmNoX3Rlcm0gaW4gaTEgOgogICBpZiAncGx1Z2luOi8vJyBpbiBzZWFyY2hfdGVybSA6CiAgICBvT29PbzBPME9PT29PICggc2VhcmNoX3Rlcm0gLCBpSTFpMTFpSUkxMTEgLCBPMG9vb29PT29vME8gLCAnJyAsICcnICwgJycgLCAnJyAsICcnICwgTm9uZSAsICcnICwgdG90YWwgPSBpbnQgKCBsZW4gKCBpMSApICkgKQogICBlbHNlIDoKICAgIGlJSUlJaWkxICggaUkxaTExaUlJMTExICsgJzonICsgc2VhcmNoX3Rlcm0gLCBpSTFpMTFpSUkxMTEgLCAyNiAsIG9PICwgaTFpaUlJaWlJMTExICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgbm90IHNlYXJjaF90ZXJtIDoKICBvMG8wbzBvTzBvT08gPSB4Ym1jIC4gS2V5Ym9hcmQgKCAnJyAsICdFbnRlciBTZWFyY2ggVGVybScgKQogIG8wbzBvMG9PMG9PTyAuIGRvTW9kYWwgKCApCiAgaWYgKCBvMG8wbzBvTzBvT08gLiBpc0NvbmZpcm1lZCAoICkgPT0gRmFsc2UgKSA6CiAgIHJldHVybgogIHNlYXJjaF90ZXJtID0gbzBvMG8wb08wb09PIC4gZ2V0VGV4dCAoICkKICBpZiBsZW4gKCBzZWFyY2hfdGVybSApID09IDAgOgogICByZXR1cm4KIHNlYXJjaF90ZXJtID0gc2VhcmNoX3Rlcm0gLiByZXBsYWNlICggJyAnICwgJysnICkKIHNlYXJjaF90ZXJtID0gc2VhcmNoX3Rlcm0gLiBlbmNvZGUgKCAndXRmLTgnICkKIGlmICd5b3V0dWJlJyBpbiBzaXRlX25hbWUgOgogIGlmIDgzIC0gODM6IGkxSUlpCiAgaW1wb3J0IF95dHBsaXN0CiAgaWYgNzYgLSA3NjogTzBvbzBPTzAgKyBpSWlpMUkxMUkxSUkxICsgb08wbyAuIEkxaWkxMWlJaTExaQogIGkxaTEgPSB7IH0KICBpMWkxID0gX3l0cGxpc3QgLiBZb1VUdWJlICggJ3NlYXJjaFlUJyAsIHlvdXR1YmUgPSBzZWFyY2hfdGVybSAsIG1heF9wYWdlID0gNCAsIG5vc2F2ZSA9ICdub3NhdmUnICkKICBJSUlJaUkxMUkxMSA9IGxlbiAoIGkxaTEgKQogIGZvciBJSTFpIGluIGkxaTEgOgogICB0cnkgOgogICAgaUkxaTExaUlJMTExID0gaTFpMSBbIElJMWkgXSBbICd0aXRsZScgXQogICAgSTEgPSBpMWkxIFsgSUkxaSBdIFsgJ2RhdGUnIF0KICAgIHRyeSA6CiAgICAgbzBvT29PbzAgPSBpMWkxIFsgSUkxaSBdIFsgJ2Rlc2MnIF0KICAgIGV4Y2VwdCBFeGNlcHRpb24gOgogICAgIG8wb09vT28wID0gJ1VOQVZBSUFCTEUnCiAgICAgaWYgMzggLSAzODogT09vb09PbyAlIElJICsgaTExaUlpaUlpaSArIE9vMG9vTzBvbzBvTyArIGkxMUlpMTFJMUlpMWkgLyBpMTFpSWlpSWlpCiAgICBJaTFJMUlpID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvP3ZpZGVvX2lkPScgKyBpMWkxIFsgSUkxaSBdIFsgJ3VybCcgXQogICAgTzBvb29vT09vbzBPID0gJ2h0dHA6Ly9pbWcueW91dHViZS5jb20vdmkvJyArIGkxaTEgWyBJSTFpIF0gWyAndXJsJyBdICsgJy8wLmpwZycKICAgIG9Pb09vME8wT09Pb08gKCBJaTFJMUlpICwgaUkxaTExaUlJMTExICwgTzBvb29vT09vbzBPICwgJycgLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCAnJyAsIElJSUlpSTExSTExICkKICAgZXhjZXB0IEV4Y2VwdGlvbiA6CiAgICBJSUkxaWkxaUlJICggJ1RoaXMgaXRlbSBpcyBpZ25vcmVkOjonICkKICBvME9PT09PbzAgPSBzaXRlX25hbWUgKyAnOicgKyBzZWFyY2hfdGVybSArICdcbicKICBPbzBvT29vT29PbyAoIG9zIC4gcGF0aCAuIGpvaW4gKCBpMTEgLCAnaGlzdG9yeScgKSAsIG8wT09PT09vMCAsIGFwcGVuZCA9IFRydWUgKQogZWxpZiAnZG1vdGlvbicgaW4gc2l0ZV9uYW1lIDoKICBvb29Pb08gPSAiaHR0cHM6Ly9hcGkuZGFpbHltb3Rpb24uY29tIgogIGlmIDYyIC0gNjI6IGlpaTFJMUkgLyBvTzBPb29Pb08gKyBvTzBvICUgaTExSWkxMUkxSWkxaSAvIG9PMG8gKyBJMTFpCiAgaW1wb3J0IF9ETXNlYXJjaAogIElpSTExSTExMSA9IHN0ciAoIElpMUlJaWkxMSAuIGdldFNldHRpbmcgKCAnZmFtaWx5RmlsdGVyJyApICkKICBfRE1zZWFyY2ggLiBsaXN0VmlkZW9zICggb29vT29PICsgIi92aWRlb3M/ZmllbGRzPWRlc2NyaXB0aW9uLGR1cmF0aW9uLGlkLG93bmVyLnVzZXJuYW1lLHRha2VuX3RpbWUsdGh1bWJuYWlsX2xhcmdlX3VybCx0aXRsZSx2aWV3c190b3RhbCZzZWFyY2g9IiArIHNlYXJjaF90ZXJtICsgIiZzb3J0PXJlbGV2YW5jZSZsaW1pdD0xMDAmZmFtaWx5X2ZpbHRlcj0iICsgSWlJMTFJMTExICsgIiZsb2NhbGl6YXRpb249ZW5fRU4mcGFnZT0xIiApCiAgaWYgNTQgLSA1NDogTzAgLSBPbzBvb08wb28wb08gLiBpaWkxSTFJICUgT28wb29PMG9vMG9PICsgT28wb29PMG9vMG9PCiAgbzBPT09PT28wID0gc2l0ZV9uYW1lICsgJzonICsgc2VhcmNoX3Rlcm0gKyAnXG4nCiAgT28wb09vb09vT28gKCBvcyAuIHBhdGggLiBqb2luICggaTExICwgJ2hpc3RvcnknICkgLCBvME9PT09PbzAgLCBhcHBlbmQgPSBUcnVlICkKIGVsaWYgJ0lNREJpZHBsYXknIGluIHNpdGVfbmFtZSA6CiAgb29vT29PID0gImh0dHA6Ly93d3cub21kYmFwaS5jb20vP3Q9IgogIElpMUkxSWkgPSBvb29Pb08gKyBzZWFyY2hfdGVybQogIGlmIDM2IC0gMzY6IGlpaTFJMUkgJSBpMTFpSWlpSWlpCiAgb28gPSBkaWN0ICggeyAnVXNlci1BZ2VudCcgOiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4zOyBydjozMy4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzMzLjAnICwgJ1JlZmVyZXInIDogJ2h0dHA6Ly9qb2tlci5vcmcvJyAsICdBY2NlcHQtRW5jb2RpbmcnIDogJ2d6aXAsIGRlZmxhdGUnICwgJ0NvbnRlbnQtVHlwZScgOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04JyAsICdBY2NlcHQnIDogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKicgfSApCiAgaWYgNDcgLSA0NzogaTFJSWkgKyBvTzBPb29Pb08gLiBvT28wTzBPb28gKiBJaTFJIC4gTzAwb09vT29PMG8wTyAvIGkxSUlpCiAgSTFpaWkxMSA9IHJlcXVlc3RzIC4gZ2V0ICggSWkxSTFJaSAsIGhlYWRlcnMgPSBvbyApCiAgaUlpaTExSSA9IEkxaWlpMTEgLiBqc29uICggKQogIGkxMWlpID0gaUlpaTExSSBbICdSZXNwb25zZScgXQogIGlmIGkxMWlpID09ICdUcnVlJyA6CiAgIG9PT09PTzBPb29vbyA9IGlJaWkxMUkgWyAnaW1kYklEJyBdCiAgIGlJMWkxMWlJSTExMSA9IGlJaWkxMUkgWyAnVGl0bGUnIF0gKyBpSWlpMTFJIFsgJ1JlbGVhc2VkJyBdCiAgIGlJSUlpaUkxaTFpID0geGJtY2d1aSAuIERpYWxvZyAoICkKICAgb09Pb09vbzBPMCA9IGlJSUlpaUkxaTFpIC4geWVzbm8gKCAnQ2hlY2sgTW92aWUgVGl0bGUnICwgJ1BMQVkgOjogJXMgPycgJSBpSTFpMTFpSUkxMTEgKQogICBpZiBvT09vT29vME8wIDoKICAgIElpMUkxSWkgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnB1bHNhci9tb3ZpZS8nICsgb09PT09PME9vb29vICsgJy9wbGF5JwogICAgbzBPT09PT28wID0gaUkxaTExaUlJMTExICsgJzonICsgSWkxSTFJaSArICdcbicKICAgIE9vMG9Pb29Pb09vICggb09vMG9vb28wMG8gLCBvME9PT09PbzAgLCBhcHBlbmQgPSBUcnVlICkKICAgIHJldHVybiBJaTFJMUlpCiAgZWxzZSA6CiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihOSk1Tb2NjZXIsTm8gSU1EQiBtYXRjaCBmb3VuZCAsNzAwMCwiICsgb08gKyAiKSIgKQogICBpZiA1NyAtIDU3OiBPMG9vME9PMCAtIE9vb29vb29vT08KZGVmIE9Pb09PME8wbzAgKCBzdHJpbmcgKSA6CiBpZiBpc2luc3RhbmNlICggc3RyaW5nICwgYmFzZXN0cmluZyApIDoKICBpZiBpc2luc3RhbmNlICggc3RyaW5nICwgdW5pY29kZSApIDoKICAgc3RyaW5nID0gc3RyaW5nIC4gZW5jb2RlICggJ2FzY2lpJyAsICdpZ25vcmUnICkKIHJldHVybiBzdHJpbmcKZGVmIEkxSUkxb09Pb28gKCBzdHJpbmcgLCBlbmNvZGluZyA9ICd1dGYtOCcgKSA6CiBpZiBpc2luc3RhbmNlICggc3RyaW5nICwgYmFzZXN0cmluZyApIDoKICBpZiBub3QgaXNpbnN0YW5jZSAoIHN0cmluZyAsIHVuaWNvZGUgKSA6CiAgIHN0cmluZyA9IHVuaWNvZGUgKCBzdHJpbmcgLCBlbmNvZGluZyAsICdpZ25vcmUnICkKIHJldHVybiBzdHJpbmcKZGVmIEkxb28gKCBzICkgOiByZXR1cm4gIiIgLiBqb2luICggZmlsdGVyICggbGFtYmRhIGlpSTFJSUlpaSA6IG9yZCAoIGlpSTFJSUlpaSApIDwgMTI4ICwgcyApICkKaWYgMjQgLSAyNDogbzBPbyAuIElJICUgTzBvbzBPTzAKZGVmIE9Pb29vbzBvbyAoIGNvbW1hbmQgKSA6CiBpSWlpMTFJID0gJycKIHRyeSA6CiAgaUlpaTExSSA9IHhibWMgLiBleGVjdXRlSlNPTlJQQyAoIEkxSUkxb09Pb28gKCBjb21tYW5kICkgKQogZXhjZXB0IFVuaWNvZGVFbmNvZGVFcnJvciA6CiAgaUlpaTExSSA9IHhibWMgLiBleGVjdXRlSlNPTlJQQyAoIE9Pb09PME8wbzAgKCBjb21tYW5kICkgKQogIGlmIDkyIC0gOTI6IElpMUkgLyBpaWkxSTFJIC4gSTExaQogcmV0dXJuIEkxSUkxb09Pb28gKCBpSWlpMTFJICkKIGlmIDMwIC0gMzA6IE8wb28wT08wIC4gSTExaSAvIGlpaTFJMUkKIGlmIDIgLSAyOiBJMWkxaUkxaSAlIG8wT28gLSBJSQpkZWYgbzAwT28wb29vb29vICggKSA6CiBvb29PbyA9IHhibWMgLiBnZXRTa2luRGlyICggKQogaWYgb29vT28gPT0gJ3NraW4uY29uZmx1ZW5jZScgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICdDb250YWluZXIuU2V0Vmlld01vZGUoNTAwKScgKQogZWxpZiBvb29PbyA9PSAnc2tpbi5hZW9uLm5veCcgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICdDb250YWluZXIuU2V0Vmlld01vZGUoNTExKScgKQogZWxzZSA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggJ0NvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDApJyApCiAgaWYgNzkgLSA3OTogSWkxSSAtIG9PME9vb09vTwogIGlmIDQzIC0gNDM6IGkxSUlpICsgTzAgJSBJMWlpMTFpSWkxMWkgLyBPMG9vME9PMCAqIG8wT28KZGVmIE9vTyAoIHVybCApIDoKIGkxaUkxMUlpaSA9IEkxSUkxb09Pb28gKCAneyJqc29ucnBjIjoiMi4wIiwibWV0aG9kIjoiRmlsZXMuR2V0RGlyZWN0b3J5IiwicGFyYW1zIjp7ImRpcmVjdG9yeSI6IiVzIiwibWVkaWEiOiJ2aWRlbyIsInByb3BlcnRpZXMiOlsidGh1bWJuYWlsIiwidGl0bGUiLCJ5ZWFyIiwiZGF0ZWFkZGVkIiwiZmFuYXJ0IiwicmF0aW5nIiwic2Vhc29uIiwiZXBpc29kZSIsInN0dWRpbyJdfSwiaWQiOjF9JyApICUgdXJsCiBpZiA5MSAtIDkxOiBpaWkxSTFJICsgaTExSWkxMUkxSWkxaSAlIG8wT28gLSBpMTFJaTExSTFJaTFpIC0gSWkxSQogaTFpaWlpaSA9IGpzb24gLiBsb2FkcyAoIE9Pb29vbzBvbyAoIGkxaUkxMUlpaSApICkKIGZvciBPMGkxSUkxSWlpaTFJMTEgaW4gaTFpaWlpaSBbICdyZXN1bHQnIF0gWyAnZmlsZXMnIF0gOgogIHVybCA9IE8waTFJSTFJaWlpMUkxMSBbICdmaWxlJyBdCiAgaUkxaTExaUlJMTExID0gSTFvbyAoIE8waTFJSTFJaWlpMUkxMSBbICdsYWJlbCcgXSApCiAgTzBvb29vT09vbzBPID0gSTFvbyAoIE8waTFJSTFJaWlpMUkxMSBbICd0aHVtYm5haWwnIF0gKQogIHRyeSA6CiAgIG8wTzBPT08wT29vID0gSTFvbyAoIE8waTFJSTFJaWlpMUkxMSBbICdmYW5hcnQnIF0gKQogIGV4Y2VwdCBFeGNlcHRpb24gOgogICBvME8wT09PME9vbyA9ICcnCiAgdHJ5IDoKICAgSTEgPSBPMGkxSUkxSWlpaTFJMTEgWyAneWVhcicgXQogIGV4Y2VwdCBFeGNlcHRpb24gOgogICBJMSA9ICcnCiAgdHJ5IDoKICAgbzBvMG9vME9vbyA9IE8waTFJSTFJaWlpMUkxMSBbICdlcGlzb2RlJyBdCiAgIGlJMWkgPSBPMGkxSUkxSWlpaTFJMTEgWyAnc2Vhc29uJyBdCiAgIGlmIG8wbzBvbzBPb28gPT0gLSAxIG9yIGlJMWkgPT0gLSAxIDoKICAgIG8wb09vT28wID0gJycKICAgZWxzZSA6CiAgICBvMG9Pb09vMCA9ICdbQ09MT1IgeWVsbG93XSBTJyArIHN0ciAoIGlJMWkgKSArICdbL0NPTE9SXVtDT0xPUiBob3RwaW5rXSBFJyArIHN0ciAoIG8wbzBvbzBPb28gKSArICdbL0NPTE9SXScKICBleGNlcHQgRXhjZXB0aW9uIDoKICAgbzBvT29PbzAgPSAnJwogIHRyeSA6CiAgIGkxMUkgPSBPMGkxSUkxSWlpaTFJMTEgWyAnc3R1ZGlvJyBdCiAgIGlmIGkxMUkgOgogICAgbzBvT29PbzAgKz0gJ1xuIFN0dWRpbzpbQ09MT1Igc3RlZWxibHVlXSAnICsgaTExSSBbIDAgXSArICdbL0NPTE9SXScKICBleGNlcHQgRXhjZXB0aW9uIDoKICAgaTExSSA9ICcnCiAgIGlmIDU2IC0gNTY6IE9vMG9vTzBvbzBvTyAuIElJCiAgaWYgTzBpMUlJMUlpaWkxSTExIFsgJ2ZpbGV0eXBlJyBdID09ICdmaWxlJyA6CiAgIG9Pb09vME8wT09Pb08gKCB1cmwgLCBpSTFpMTFpSUkxMTEgLCBPMG9vb29PT29vME8gLCBvME8wT09PME9vbyAsIG8wb09vT28wICwgJycgLCBJMSAsICcnICwgTm9uZSAsICcnICwgdG90YWwgPSBsZW4gKCBpMWlpaWlpIFsgJ3Jlc3VsdCcgXSBbICdmaWxlcycgXSApICkKICAgaWYgMyAtIDM6IE8wb28wT08wICsgSUkgLiBpMUlJaSAvIGlpaTFJMUkgJSBJSQogICBpZiA5OCAtIDk4OiBJMWkxaUkxaSAqIGlJaWkxSTExSTFJSTEgLiBPMG9vME9PMCAqIG9PbzBPME9vbyAvIEkxMWkgKyBpMTFJaTExSTFJaTFpCiAgZWxzZSA6CiAgIGlJSUlJaWkxICggaUkxaTExaUlJMTExICwgdXJsICwgNTMgLCBPMG9vb29PT29vME8gLCBvME8wT09PME9vbyAsIG8wb09vT28wICwgJycgLCBJMSAsICcnICkKICAgaWYgMjUgLSAyNTogSWkxSQogICBpZiAxOSAtIDE5OiBvME9vICUgTzBvbzBPTzAgLiBJMWkxaUkxaSAqIGkxMUlpMTFJMUlpMWkKZGVmIG9Pb09vME8wT09Pb08gKCB1cmwgLCBuYW1lICwgaWNvbmltYWdlICwgZmFuYXJ0ICwgZGVzY3JpcHRpb24gLCBnZW5yZSAsIGRhdGUgLCBzaG93Y29udGV4dCAsIHBsYXlsaXN0ICwgcmVnZXhzICwgdG90YWwgLCBzZXRDb29raWUgPSAiIiApIDoKIElJaUlpaUkxaSA9IFsgXQogdHJ5IDoKICBuYW1lID0gbmFtZSAuIGVuY29kZSAoICd1dGYtOCcgKQogZXhjZXB0IDogcGFzcwogT09vMDBPID0gVHJ1ZQogaWYgODkgLSA4OTogb08wbyAuIGlpaTFJMUkKIGlmIHJlZ2V4cyA6CiAgSUlJSUlpSTExSWkgPSAnMTcnCiAgaWYgNDEgLSA0MTogaTExaUlpaUlpaSAtIGkxSUlpIC8gb09vME8wT29vICogSTFpMWlJMWkgLyBJSSAtIG9PbzBPME9vbwogIElJaUlpaUkxaSAuIGFwcGVuZCAoICggJ1tDT0xPUiB3aGl0ZV0hIURvd25sb2FkIEN1cnJlbnRseSBQbGF5aW5nISFbL0NPTE9SXScgLCAnWEJNQy5SdW5QbHVnaW4oJXM/dXJsPSVzJm1vZGU9MjEmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKIGVsaWYgYW55ICggeCBpbiB1cmwgZm9yIHggaW4gaTFJaUkxSTExICkgYW5kIHVybCAuIHN0YXJ0c3dpdGggKCAnaHR0cCcgKSA6CiAgSUlJSUlpSTExSWkgPSAnMTknCiAgaWYgNTYgLSA1NjogTzAKICBJSWlJaWlJMWkgLiBhcHBlbmQgKCAoICdbQ09MT1Igd2hpdGVdISFEb3dubG9hZCBDdXJyZW50bHkgUGxheWluZyEhWy9DT0xPUl0nICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTIxJm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiBlbGlmIHVybCAuIGVuZHN3aXRoICggJyZtb2RlPTE4JyApIDoKICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyZtb2RlPTE4JyAsICcnICkKICBJSUlJSWlJMTFJaSA9ICcxOCcKICBpZiA0NSAtIDQ1OiBvTzBvIC0gSTFpaTExaUlpMTFpIC0gb08wbwogIElJaUlpaUkxaSAuIGFwcGVuZCAoICggJ1tDT0xPUiB3aGl0ZV0hIURvd25sb2FkISFbL0NPTE9SXScgLCAnWEJNQy5SdW5QbHVnaW4oJXM/dXJsPSVzJm1vZGU9MjMmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKICBpZiBJaTFJSWlpMTEgLiBnZXRTZXR0aW5nICggJ2RsYXVkaW9vbmx5JyApID09ICd0cnVlJyA6CiAgIElJaUlpaUkxaSAuIGFwcGVuZCAoICggJyEhRG93bmxvYWQgW0NPTE9SIHNlYWJsdWVdQXVkaW8hIVsvQ09MT1JdJyAsICdYQk1DLlJ1blBsdWdpbiglcz91cmw9JXMmbW9kZT0yNCZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogZWxpZiB1cmwgLiBzdGFydHN3aXRoICggJ21hZ25ldDo/eHQ9JyApIG9yICcudG9ycmVudCcgaW4gdXJsIDoKICBpZiA0MSAtIDQxOiBvT28wTzBPb28gLyBpMUlJaSAvIG9PbzBPME9vbyAtIE9vMG9vTzBvbzBvTyAuIE9Pb29PT28KICBpZiAnJicgaW4gdXJsIGFuZCBub3QgJyZhbXA7JyBpbiB1cmwgOgogICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyYnICwgJyZhbXA7JyApCiAgdXJsID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5wdWxzYXIvcGxheT91cmk9JyArIHVybAogIElJSUlJaUkxMUlpID0gJzEyJwogIGlmIDY1IC0gNjU6IE8wICogaTExaUlpaUlpaSAuIE9vb29vb29vT08gLyBvME9vIC8gT28wb29PMG9vMG9PCiBlbHNlIDoKICBJSUlJSWlJMTFJaSA9ICcxMicKICBpZiA2OSAtIDY5OiBpMTFJaTExSTFJaTFpICUgaTExSWkxMUkxSWkxaQogIElJaUlpaUkxaSAuIGFwcGVuZCAoICggJ1tDT0xPUiB3aGl0ZV0hIURvd25sb2FkIEN1cnJlbnRseSBQbGF5aW5nISFbL0NPTE9SXScgLCAnWEJNQy5SdW5QbHVnaW4oJXM/dXJsPSVzJm1vZGU9MjEmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKIG9PMDAgPSBzeXMgLiBhcmd2IFsgMCBdICsgIj8iCiBPb28wME9PT09PTzAgPSBGYWxzZQogaWYgMTUgLSAxNTogTzAwb09vT29PMG8wTyAvIE9Pb29PT28gKyBPMG9vME9PMAogaWYgcGxheWxpc3QgOgogIGlmIElpMUlJaWkxMSAuIGdldFNldHRpbmcgKCAnYWRkX3BsYXlsaXN0JyApID09ICJmYWxzZSIgOgogICBvTzAwICs9ICJ1cmw9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSArICImbW9kZT0iICsgSUlJSUlpSTExSWkKICBlbHNlIDoKICAgb08wMCArPSAibW9kZT0xMyZuYW1lPSVzJnBsYXlsaXN0PSVzIiAlICggdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBzdHIgKCBwbGF5bGlzdCApIC4gcmVwbGFjZSAoICcsJyAsICd8fCcgKSApICkKICAgbmFtZSA9IG5hbWUgKyAnW0NPTE9SIG1hZ2VudGFdICgnICsgc3RyICggbGVuICggcGxheWxpc3QgKSApICsgJyBpdGVtcyApWy9DT0xPUl0nCiAgIE9vbzAwT09PT09PMCA9IFRydWUKIGVsc2UgOgogIG9PMDAgKz0gInVybD0iICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICsgIiZtb2RlPSIgKyBJSUlJSWlJMTFJaQogaWYgcmVnZXhzIDoKICBvTzAwICs9ICImcmVnZXhzPSIgKyByZWdleHMKIGlmIG5vdCBzZXRDb29raWUgPT0gJycgOgogIG9PMDAgKz0gIiZzZXRDb29raWU9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBzZXRDb29raWUgKQogIGlmIDc2IC0gNzY6IE8wb28wT08wICsgT29vb29vb29PTyAvIGlpaTFJMUkgJSBJMWlpMTFpSWkxMWkgLyBJMTFpCiBpZiBkYXRlID09ICcnIDoKICBkYXRlID0gTm9uZQogZWxzZSA6CiAgZGVzY3JpcHRpb24gKz0gJ1xuXG5EYXRlOiAlcycgJSBkYXRlCiBvT09PMDBPME8wT09vID0geGJtY2d1aSAuIExpc3RJdGVtICggbmFtZSAsIGljb25JbWFnZSA9ICJEZWZhdWx0VmlkZW8ucG5nIiAsIHRodW1ibmFpbEltYWdlID0gaWNvbmltYWdlICkKIG9PT08wME8wTzBPT28gLiBzZXRJbmZvICggdHlwZSA9ICJWaWRlbyIgLCBpbmZvTGFiZWxzID0geyAiVGl0bGUiIDogbmFtZSAsICJQbG90IiA6IGRlc2NyaXB0aW9uICwgIkdlbnJlIiA6IGdlbnJlICwgImRhdGVhZGRlZCIgOiBkYXRlIH0gKQogb09PTzAwTzBPME9PbyAuIHNldFByb3BlcnR5ICggIkZhbmFydF9JbWFnZSIgLCBmYW5hcnQgKQogaWYgMzggLSAzODogSUkgLiBPbzBvb08wb28wb08gLiBvME9vICogSTFpaTExaUlpMTFpCiBpZiAoIG5vdCBPb28wME9PT09PTzAgKSBhbmQgbm90IGFueSAoIHggaW4gdXJsIGZvciB4IGluIElJaUlpSUkxMWkgKSA6CiAgaWYgcmVnZXhzIDoKICAgaWYgJyRweUZ1bmN0aW9uOnBsYXltZWRpYSgnIG5vdCBpbiB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCByZWdleHMgKSBhbmQgJ25vdHBsYXlhYmxlJyBub3QgaW4gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggcmVnZXhzICkgOgogICAgb09PTzAwTzBPME9PbyAuIHNldFByb3BlcnR5ICggJ0lzUGxheWFibGUnICwgJ3RydWUnICkKICBlbHNlIDoKICAgb09PTzAwTzBPME9PbyAuIHNldFByb3BlcnR5ICggJ0lzUGxheWFibGUnICwgJ3RydWUnICkKIGVsc2UgOgogIElJSTFpaTFpSUkgKCAnTk9UIHNldHRpbmcgaXNwbGF5YWJsZScgKyB1cmwgKQogIGlmIDY5IC0gNjk6IE9Pb29PT28gJSBpMTFpSWlpSWlpIC8gTzBvbzBPTzAKIGlmIHNob3djb250ZXh0IDoKICBJSWlJaWlJMWkgPSBbIF0KICBpZiBzaG93Y29udGV4dCA9PSAnZmF2JyA6CiAgIElJaUlpaUkxaSAuIGFwcGVuZCAoCiAoICdSZW1vdmUgZnJvbSBOSk1Tb2NjZXIgRmF2b3JpdGVzJyAsICdYQk1DLlJ1blBsdWdpbiglcz9tb2RlPTYmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApCiApCiAgZWxpZiBub3QgbmFtZSBpbiBvMG9PbzBPb28wTyA6CiAgIG9vT09PMDBvT09vb08gPSAoCiAnJXM/bW9kZT01Jm5hbWU9JXMmdXJsPSVzJmljb25pbWFnZT0lcyZmYW5hcnQ9JXMmZmF2X21vZGU9MCcKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpY29uaW1hZ2UgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgKSApCiApCiAgIGlmIHBsYXlsaXN0IDoKICAgIG9vT09PMDBvT09vb08gKz0gJ3BsYXlsaXN0PScgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggc3RyICggcGxheWxpc3QgKSAuIHJlcGxhY2UgKCAnLCcgLCAnfHwnICkgKQogICBpZiByZWdleHMgOgogICAgb29PT08wMG9PT29vTyArPSAiJnJlZ2V4cz0iICsgcmVnZXhzCiAgIElJaUlpaUkxaSAuIGFwcGVuZCAoICggJ0FkZCB0byBOSk1Tb2NjZXIgRmF2b3JpdGVzJyAsICdYQk1DLlJ1blBsdWdpbiglcyknICUgb29PT08wMG9PT29vTyApICkKICBvT09PMDBPME8wT09vIC4gYWRkQ29udGV4dE1lbnVJdGVtcyAoIElJaUlpaUkxaSApCiAgaWYgNDYgLSA0NjogaUlpaTFJMTFJMUlJMSAuIGkxMWlJaWlJaWkgLSBvTzBvICUgTzAgLyBvTzBPb29Pb08gKiBpMUlJaQogaWYgbm90IHBsYXlsaXN0IGlzIE5vbmUgOgogIGlmIElpMUlJaWkxMSAuIGdldFNldHRpbmcgKCAnYWRkX3BsYXlsaXN0JyApID09ICJmYWxzZSIgOgogICBvT0lpaUlJaSA9IG5hbWUgLiBzcGxpdCAoICcpICcgKSBbIDEgXQogICBPb09vME9PMG9vb28gPSBbCiAoICdQbGF5ICcgKyBvT0lpaUlJaSArICcgUGxheUxpc3QnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9MTMmbmFtZT0lcyZwbGF5bGlzdD0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBvT0lpaUlJaSApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHN0ciAoIHBsYXlsaXN0ICkgLiByZXBsYWNlICggJywnICwgJ3x8JyApICkgKSApCiBdCiAgIG9PT08wME8wTzBPT28gLiBhZGRDb250ZXh0TWVudUl0ZW1zICggT29PbzBPTzBvb29vICkKICAgaWYgNDAgLSA0MDogSUkgLSBvTzBvICogTzAwb09vT29PMG8wTyAtIEkxaTFpSTFpIC8gb08wbwogT09vMDBPID0geGJtY3BsdWdpbiAuIGFkZERpcmVjdG9yeUl0ZW0gKCBoYW5kbGUgPSBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB1cmwgPSBvTzAwICwgbGlzdGl0ZW0gPSBvT09PMDBPME8wT09vICwgdG90YWxJdGVtcyA9IHRvdGFsICkKIHJldHVybiBPT28wME8KIGlmIDcxIC0gNzE6IElpMUkgLyBPb29vb29vb09PICUgSTFpMWlJMWkgLyBvTzBvICUgSUkKZGVmIEkxaTFpSSAoIHVybCAsIG5hbWUgLCBpY29uaW1hZ2UgLCBzZXRyZXNvbHZlZCA9IFRydWUgKSA6CiBpZiBzZXRyZXNvbHZlZCA6CiAgb09PTzAwTzBPME9PbyA9IHhibWNndWkgLiBMaXN0SXRlbSAoIG5hbWUgLCBpY29uSW1hZ2UgPSBpY29uaW1hZ2UgKQogIG9PT08wME8wTzBPT28gLiBzZXRJbmZvICggdHlwZSA9ICdWaWRlbycgLCBpbmZvTGFiZWxzID0geyAnVGl0bGUnIDogbmFtZSB9ICkKICBvT09PMDBPME8wT09vIC4gc2V0UHJvcGVydHkgKCAiSXNQbGF5YWJsZSIgLCAidHJ1ZSIgKQogIG9PT08wME8wTzBPT28gLiBzZXRQYXRoICggc3RyICggdXJsICkgKQogIHhibWNwbHVnaW4gLiBzZXRSZXNvbHZlZFVybCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIFRydWUgLCBvT09PMDBPME8wT09vICkKIGVsc2UgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICdYQk1DLlJ1blBsdWdpbignICsgdXJsICsgJyknICkKICBpZiAzMCAtIDMwOiBPMDBvT29Pb08wbzBPICUgb08wbyAvIEkxMWkgKiBPMCAqIE8wb28wT08wIC4gbzBPbwogIGlmIDQ2IC0gNDY6IG9PMG8gLSBPMAogIGlmIDcwIC0gNzA6IE8wMG9Pb09vTzBvME8gKyBvT28wTzBPb28gKiBpSWlpMUkxMUkxSUkxIC4gbzBPbyAqIE8wMG9Pb09vTzBvME8KICBpZiA0OSAtIDQ5OiBPT29vT09vCmRlZiBpSWkxICggbGluayApIDoKIElpMUkxSWkgPSB1cmxsaWIgLiB1cmxvcGVuICggbGluayApCiBJMTFpaUkgPSBJaTFJMUlpIC4gcmVhZCAoICkKIElpMUkxSWkgLiBjbG9zZSAoICkKIGkxaUlpaTFpMTExID0gSTExaWlJIC4gc3BsaXQgKCAiSmV0enQiICkKIE9Pb29vMDAwT29vTyA9IGkxaUlpaTFpMTExIFsgMSBdIC4gc3BsaXQgKCAncHJvZ3JhbW0vZGV0YWlsLnBocD9jb25zdF9pZD0nICkKIG8wbzBPb09vID0gT09vb28wMDBPb29PIFsgMSBdIC4gc3BsaXQgKCAnPGJyIC8+PGEgaHJlZj0iLycgKQogSWlJMSA9IG8wbzBPb09vIFsgMCBdIFsgNDAgOiBsZW4gKCBvMG8wT29PbyBbIDAgXSApIF0KIGlpSWlJSSA9IE9Pb29vMDAwT29vTyBbIDIgXSAuIHNwbGl0ICggIjwvYT48L3A+PC9kaXY+IiApCiBJSWlpaUkxaUkgPSBpaUlpSUkgWyAwIF0gWyAxNyA6IGxlbiAoIGlpSWlJSSBbIDAgXSApIF0KIElJaWlpSTFpSSA9IElJaWlpSTFpSSAuIGVuY29kZSAoICd1dGYtOCcgKQogcmV0dXJuICIgIC0gIiArIElJaWlpSTFpSSArICIgLSAiICsgSWlJMQogaWYgMTAwIC0gMTAwOiBpMTFJaTExSTFJaTFpIC8gaTExSWkxMUkxSWkxaSAtIGlpaTFJMUkgJSBpaWkxSTFJICogSWkxSSAvIEkxaTFpSTFpCiBpZiAzMiAtIDMyOiBvME9vICsgSTExaSAtIElpMUkgKyBJMTFpIC8gaTFJSWkgKiBJaTFJCmRlZiBPT28wME9vTyAoIHVybCAsIHJlZ2V4ICkgOgogaUlpaTExSSA9IE9vME8wT09Pb28gKCB1cmwgKQogdHJ5IDoKICBJSTFpID0gcmUgLiBmaW5kYWxsICggcmVnZXggLCBpSWlpMTFJICkgWyAwIF0KICByZXR1cm4gSUkxaQogZXhjZXB0IDoKICBJSUkxaWkxaUlJICggJ3JlZ2V4IGZhaWxlZCcgKQogIElJSTFpaTFpSUkgKCByZWdleCApCiAgcmV0dXJuCiAgaWYgOTAgLSA5MDogTzBvbzBPTzAgJSBJaTFJCiAgaWYgNiAtIDY6IE9vb29vb29vT08gLyBpMTFpSWlpSWlpIC8gSUkKeGJtY3BsdWdpbiAuIHNldENvbnRlbnQgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCAnbW92aWVzJyApCmlmIDYwIC0gNjA6IG8wT28gJSBJaTFJIC8gT09vb09PbyAlIElpMUkgKiBpMTFpSWlpSWlpIC8gT28wb29PMG9vMG9PCnRyeSA6CiB4Ym1jcGx1Z2luIC4gYWRkU29ydE1ldGhvZCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHhibWNwbHVnaW4gLiBTT1JUX01FVEhPRF9VTlNPUlRFRCApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiB4Ym1jcGx1Z2luIC4gYWRkU29ydE1ldGhvZCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHhibWNwbHVnaW4gLiBTT1JUX01FVEhPRF9MQUJFTCApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiB4Ym1jcGx1Z2luIC4gYWRkU29ydE1ldGhvZCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHhibWNwbHVnaW4gLiBTT1JUX01FVEhPRF9EQVRFICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIHhibWNwbHVnaW4gLiBhZGRTb3J0TWV0aG9kICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgeGJtY3BsdWdpbiAuIFNPUlRfTUVUSE9EX0dFTlJFICkKZXhjZXB0IDoKIHBhc3MKIGlmIDM0IC0gMzQ6IElJIC0gaWlpMUkxSQpPT29vT29vbzBPT28wID0gaWkxSUkxSUkgKCApCmlmIDI1IC0gMjU6IElpMUkgJSBvME9vICsgaTExaUlpaUlpaSArIE8wICogT29vb29vb29PTwpJaTFJMUlpID0gTm9uZQppSTFpMTFpSUkxMTEgPSBOb25lCklJSUlJaUkxMUlpID0gTm9uZQpJMWkxMWlpMTEgPSBOb25lCm9PbzAgPSBOb25lCm8wTzBPT08wT29vID0gaTFpaUlJaWlJMTExCkkxaTExaWkxMSA9IE5vbmUKb29PMCA9IE5vbmUKTzBvID0gTm9uZQppZiA5NCAtIDk0OiBPMDBvT29Pb08wbzBPIC4gbzBPbwp0cnkgOgogSWkxSTFJaSA9IHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIE9Pb29Pb29vME9PbzAgWyAidXJsIiBdICkgLiBkZWNvZGUgKCAndXRmLTgnICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIGlJMWkxMWlJSTExMSA9IHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIE9Pb29Pb29vME9PbzAgWyAibmFtZSIgXSApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiBvT28wID0gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggT09vb09vb28wT09vMCBbICJpY29uaW1hZ2UiIF0gKQpleGNlcHQgOgogcGFzcwp0cnkgOgogbzBPME9PTzBPb28gPSB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBPT29vT29vbzBPT28wIFsgImZhbmFydCIgXSApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiBJSUlJSWlJMTFJaSA9IGludCAoIE9Pb29Pb29vME9PbzAgWyAibW9kZSIgXSApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiBJMWkxMWlpMTEgPSBldmFsICggdXJsbGliIC4gdW5xdW90ZV9wbHVzICggT09vb09vb28wT09vMCBbICJwbGF5bGlzdCIgXSApIC4gcmVwbGFjZSAoICd8fCcgLCAnLCcgKSApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiBvb08wID0gaW50ICggT09vb09vb28wT09vMCBbICJmYXZfbW9kZSIgXSApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiBPMG8gPSBPT29vT29vbzBPT28wIFsgInJlZ2V4cyIgXQpleGNlcHQgOgogcGFzcwogaWYgNzMgLSA3MzogaTFJSWkgLyBvTzBPb29Pb08KSUlJMWlpMWlJSSAoICJNb2RlOiAiICsgc3RyICggSUlJSUlpSTExSWkgKSApCmlmIG5vdCBJaTFJMUlpIGlzIE5vbmUgOgogSUlJMWlpMWlJSSAoICJVUkw6ICIgKyBzdHIgKCBJaTFJMUlpIC4gZW5jb2RlICggJ3V0Zi04JyApICkgKQpJSUkxaWkxaUlJICggIk5hbWU6ICIgKyBzdHIgKCBpSTFpMTFpSUkxMTEgKSApCmlmIDQ1IC0gNDU6IE8wb28wT08wIC8gaTExSWkxMUkxSWkxaSAuIE9vb29vb29vT08gKyBJMWlpMTFpSWkxMWkKaWYgSUlJSUlpSTExSWkgPT0gTm9uZSA6CiBJSUkxaWkxaUlJICggIkluZGV4IiApCiBvT29vT09vMDBPbzBPICggKQogaWYgNTEgLSA1MTogT28wb29PMG9vMG9PICUgaTExaUlpaUlpaSAlIEkxaTFpSTFpICsgSUkgJSBJMTFpCiBpZiAxNiAtIDE2OiBvTzBvIC8gb09vME8wT29vICsgTzAgLSBvTzBvIC4gT29vb29vb29PTwplbGlmIElJSUlJaUkxMUlpID09IDEgOgogSUlJMWlpMWlJSSAoICJnZXREYXRhIiApCiBPT09Pb09vbzBPME8wICggSWkxSTFJaSAsIG8wTzBPT08wT29vICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiAxOSAtIDE5OiBPT29vT09vCmVsaWYgSUlJSUlpSTExSWkgPT0gMiA6CiBJSUkxaWkxaUlJICggImdldENoYW5uZWxJdGVtcyIgKQogaUlJMWkxMUlJaTFpICggaUkxaTExaUlJMTExICwgSWkxSTFJaSAsIG8wTzBPT08wT29vICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiA3MyAtIDczOiBJSSAqIG9PbzBPME9vbyAqIG9PMG8KZWxpZiBJSUlJSWlJMTFJaSA9PSAzIDoKIElJSTFpaTFpSUkgKCAiZ2V0U3ViQ2hhbm5lbEl0ZW1zIiApCiBJMTFJaWlpMUkgKCBpSTFpMTFpSUkxMTEgLCBJaTFJMUlpICwgbzBPME9PTzBPb28gKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDY1IC0gNjU6IGkxMWlJaWlJaWkgKyBvT28wTzBPb28gKiBPb29vb29vb09PIC0gSTFpaTExaUlpMTFpCmVsaWYgSUlJSUlpSTExSWkgPT0gNCA6CiBJSUkxaWkxaUlJICggImdldEZhdm9yaXRlcyIgKQogT29vT28gKCApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgMjYgLSAyNjogT09vb09PbyAlIGlpaTFJMUkgKyBpaWkxSTFJICUgTzAwb09vT29PMG8wTyAqIGkxMWlJaWlJaWkgLyBPbzBvb08wb28wb08KZWxpZiBJSUlJSWlJMTFJaSA9PSA1IDoKIElJSTFpaTFpSUkgKCAiYWRkRmF2b3JpdGUiICkKIHRyeSA6CiAgaUkxaTExaUlJMTExID0gaUkxaTExaUlJMTExIC4gc3BsaXQgKCAnXFwgJyApIFsgMSBdCiBleGNlcHQgOgogIHBhc3MKIHRyeSA6CiAgaUkxaTExaUlJMTExID0gaUkxaTExaUlJMTExIC4gc3BsaXQgKCAnICAtICcgKSBbIDAgXQogZXhjZXB0IDoKICBwYXNzCiBpMWlJSUlJMWlpSUlpICggaUkxaTExaUlJMTExICwgSWkxSTFJaSAsIG9PbzAgLCBvME8wT09PME9vbyAsIG9vTzAgKQogaWYgNjQgLSA2NDogSWkxSSAlIG9PMG8gLyBvTzBPb29Pb08gJSBpMTFJaTExSTFJaTFpIC0gT28wb29PMG9vMG9PCmVsaWYgSUlJSUlpSTExSWkgPT0gNiA6CiBJSUkxaWkxaUlJICggInJtRmF2b3JpdGUiICkKIHRyeSA6CiAgaUkxaTExaUlJMTExID0gaUkxaTExaUlJMTExIC4gc3BsaXQgKCAnXFwgJyApIFsgMSBdCiBleGNlcHQgOgogIHBhc3MKIHRyeSA6CiAgaUkxaTExaUlJMTExID0gaUkxaTExaUlJMTExIC4gc3BsaXQgKCAnICAtICcgKSBbIDAgXQogZXhjZXB0IDoKICBwYXNzCiBpaTFJICggaUkxaTExaUlJMTExICkKIGlmIDIgLSAyOiBJSSAtIEkxMWkgKyBPT29vT09vICogSTFpaTExaUlpMTFpIC8gT28wb29PMG9vMG9PCmVsaWYgSUlJSUlpSTExSWkgPT0gNyA6CiBJSUkxaWkxaUlJICggImFkZFNvdXJjZSIgKQogSTFJMTEgKCBJaTFJMUlpICkKIGlmIDI2IC0gMjY6IGlpaTFJMUkgKiBvT28wTzBPb28KZWxpZiBJSUlJSWlJMTFJaSA9PSA4IDoKIElJSTFpaTFpSUkgKCAicm1Tb3VyY2UiICkKIGlJaUlJaTEgKCBpSTFpMTFpSUkxMTEgKQogaWYgMzEgLSAzMTogTzAwb09vT29PMG8wTyAqIElpMUkgLiBPMG9vME9PMAplbGlmIElJSUlJaUkxMUlpID09IDkgOgogSUlJMWlpMWlJSSAoICJkb3dubG9hZF9maWxlIiApCiBJaWkxSUlJSUlJSSAoIGlJMWkxMWlJSTExMSAsIElpMUkxSWkgKQogaWYgMzUgLSAzNTogTzAwb09vT29PMG8wTwplbGlmIElJSUlJaUkxMUlpID09IDEwIDoKIElJSTFpaTFpSUkgKCAiZ2V0Q29tbXVuaXR5U291cmNlcyIgKQogb09vb08wICggKQogaWYgOTQgLSA5NDogaTExSWkxMUkxSWkxaSAvIGkxMWlJaWlJaWkgJSBPMAplbGlmIElJSUlJaUkxMUlpID09IDExIDoKIElJSTFpaTFpSUkgKCAiYWRkU291cmNlIiApCiBJMUkxMSAoIElpMUkxSWkgKQogaWYgNzAgLSA3MDogTzAwb09vT29PMG8wTyAtIG9PbzBPME9vbyAvIE9vb29vb29vT08gJSBPb29vb29vb09PCmVsaWYgSUlJSUlpSTExSWkgPT0gMTIgOgogSUlJMWlpMWlJSSAoICJzZXRSZXNvbHZlZFVybCIgKQogaWYgbm90IElpMUkxSWkgLiBzdGFydHN3aXRoICggInBsdWdpbjovL3BsdWdpbiIgKSBvciBub3QgYW55ICggeCBpbiBJaTFJMUlpIGZvciB4IGluIElJaUlpSUkxMWkgKSA6CiAgSUkxaSA9IHhibWNndWkgLiBMaXN0SXRlbSAoIHBhdGggPSBJaTFJMUlpICkKICB4Ym1jcGx1Z2luIC4gc2V0UmVzb2x2ZWRVcmwgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCBUcnVlICwgSUkxaSApCiBlbHNlIDoKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAnWEJNQy5SdW5QbHVnaW4oJyArIElpMUkxSWkgKyAnKScgKQogIGlmIDk1IC0gOTU6IE9vb29vb29vT08gJSBPb29vb29vb09PIC4gTzBvbzBPTzAKICBpZiAyNiAtIDI2OiBJaTFJICsgSTFpMWlJMWkgLSBvTzBPb29Pb08gLiBvTzBPb29Pb08gKyBJMTFpICsgb08wbwplbGlmIElJSUlJaUkxMUlpID09IDEzIDoKIElJSTFpaTFpSUkgKCAicGxheV9wbGF5bGlzdCIgKQogT29PME9Pb08wT28wICggaUkxaTExaUlJMTExICwgSTFpMTFpaTExICkKIGlmIDY4IC0gNjg6IE8wCmVsaWYgSUlJSUlpSTExSWkgPT0gMTQgOgogSUlJMWlpMWlJSSAoICJnZXRfeG1sX2RhdGFiYXNlIiApCiBPbzBvTzAwbyAoIElpMUkxSWkgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDc2IC0gNzY6IEkxMWkKZWxpZiBJSUlJSWlJMTFJaSA9PSAxNSA6CiBJSUkxaWkxaUlJICggImJyb3dzZV94bWxfZGF0YWJhc2UiICkKIE9vMG9PMDBvICggSWkxSTFJaSAsIFRydWUgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDk5IC0gOTk6IE9Pb29PT28KZWxpZiBJSUlJSWlJMTFJaSA9PSAxNiA6CiBJSUkxaWkxaUlJICggImJyb3dzZV9jb21tdW5pdHkiICkKIG9Pb29PMCAoIFRydWUgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDEgLSAxOiBPMG9vME9PMCAqIG9PMG8gKiBJMWlpMTFpSWkxMWkgKyBvT28wTzBPb28KZWxpZiBJSUlJSWlJMTFJaSA9PSAxNyA6CiBJSUkxaWkxaUlJICggImdldFJlZ2V4UGFyc2VkIiApCiBJaTFJMUlpICwgT09vID0gSTExSSAoIE8wbyAsIElpMUkxSWkgKQogaWYgSWkxSTFJaSA6CiAgSTFpMWlJICggSWkxSTFJaSAsIGlJMWkxMWlJSTExMSAsIG9PbzAgLCBPT28gKQogZWxzZSA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKE5KTVNvY2NlcixGYWlsZWQgdG8gZXh0cmFjdCByZWdleC4gLSAiICsgInRoaXMiICsgIiw0MDAwLCIgKyBvTyArICIpIiApCmVsaWYgSUlJSUlpSTExSWkgPT0gMTggOgogSUlJMWlpMWlJSSAoICJ5b3V0dWJlZGwiICkKIHRyeSA6CiAgaW1wb3J0IHlvdXR1YmVkbAogZXhjZXB0IEV4Y2VwdGlvbiA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKE5KTVNvY2NlcixQbGVhc2UgW0NPTE9SIHllbGxvd11pbnN0YWxsIFlvdXR1YmUtZGxbL0NPTE9SXSBtb2R1bGUgLDEwMDAwLCIgIikiICkKIE9Pb09PMG9vbyA9IHlvdXR1YmVkbCAuIHNpbmdsZV9ZRCAoIElpMUkxSWkgKQogSTFpMWlJICggT09vT08wb29vICwgaUkxaTExaUlJMTExICwgb09vMCApCmVsaWYgSUlJSUlpSTExSWkgPT0gMTkgOgogSUlJMWlpMWlJSSAoICJHZW5lc2lzY29tbW9ucmVzb2x2ZXJzIiApCiBJMWkxaUkgKCBPb29PT09PICggSWkxSTFJaSApICwgaUkxaTExaUlJMTExICwgb09vMCAsIFRydWUgKQogaWYgOTAgLSA5MDogSUkgJSBvT28wTzBPb28gLSBvT28wTzBPb28gLiBpSWlpMUkxMUkxSUkxIC8gaWlpMUkxSSArIE8wMG9Pb09vTzBvME8KZWxpZiBJSUlJSWlJMTFJaSA9PSAyMSA6CiBJSUkxaWkxaUlJICggImRvd25sb2FkIGN1cnJlbnQgZmlsZSB1c2luZyB5b3V0dWJlLWRsIHNlcnZpY2UiICkKIGlpMUlJaUlJMTExSSAoICcnICwgaUkxaTExaUlJMTExICwgJ3ZpZGVvJyApCmVsaWYgSUlJSUlpSTExSWkgPT0gMjMgOgogSUlJMWlpMWlJSSAoICJnZXQgaW5mbyB0aGVuIGRvd25sb2FkIiApCiBpaTFJSWlJSTExMUkgKCBJaTFJMUlpICwgaUkxaTExaUlJMTExICwgJ3ZpZGVvJyApCmVsaWYgSUlJSUlpSTExSWkgPT0gMjQgOgogSUlJMWlpMWlJSSAoICJBdWRpbyBvbmx5IHlvdXR1YmUgZG93bmxvYWQiICkKIGlpMUlJaUlJMTExSSAoIElpMUkxSWkgLCBpSTFpMTFpSUkxMTEgLCAnYXVkaW8nICkKZWxpZiBJSUlJSWlJMTFJaSA9PSAyNSA6CiBJSUkxaWkxaUlJICggIllvdVR1YmUvRE1vdGlvbiIgKQogaWlJaWlpICggSWkxSTFJaSApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQplbGlmIElJSUlJaUkxMUlpID09IDI2IDoKIElJSTFpaTFpSUkgKCAiWW91VHViZS9ETW90aW9uIEZyb20gU2VhcmNoIEhpc3RvcnkiICkKIGlJMWkxMWlJSTExMSA9IGlJMWkxMWlJSTExMSAuIHNwbGl0ICggJzonICkKIGlpSWlpaSAoIElpMUkxSWkgLCBzZWFyY2hfdGVybSA9IGlJMWkxMWlJSTExMSBbIDEgXSApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQplbGlmIElJSUlJaUkxMUlpID09IDI3IDoKIElJSTFpaTFpSUkgKCAiVXNpbmcgSU1EQiBpZCB0byBwbGF5IGluIFB1bHNhciIgKQogbzBvMDBPT09PID0gaWlJaWlpICggSWkxSTFJaSApCiB4Ym1jIC4gUGxheWVyICggKSAuIHBsYXkgKCBvMG8wME9PT08gKQplbGlmIElJSUlJaUkxMUlpID09IDMwIDoKIElpICggaUkxaTExaUlJMTExICwgSWkxSTFJaSAsIG9PbzAgLCBvME8wT09PME9vbyApCiBpZiA0MiAtIDQyOiBpMTFJaTExSTFJaTFpICogT28wb29PMG9vMG9PCmVsaWYgSUlJSUlpSTExSWkgPT0gMzUgOgogTzAwMDBvTzBvMDAgPSBPbzBPME9PT29vICggSWkxSTFJaSApCiBPT29PMDAwTzBPTyAoIE8wMDAwb08wbzAwICkKIGlmIDIgLSAyOiBPbzBvb08wb28wb08gLiBJMWlpMTFpSWkxMWkgLyBJaTFJCmVsaWYgSUlJSUlpSTExSWkgPT0gMzYgOgogSUlPMDAwb29vT08wT28wID0gSTFJMWkxaSAoICkKIElJTzAwMG9vb09PME9vMCAuIGRvTW9kYWwgKCApCiBkZWwgSUlPMDAwb29vT08wT28wCiBpZiAzMSAtIDMxOiBJMWkxaUkxaSAtIEkxaWkxMWlJaTExaSAvIGlpaTFJMUkgLiBpMUlJaSAvIE8wb28wT08wCiBpZiA2NiAtIDY2OiBJMWlpMTFpSWkxMWkKZWxpZiBJSUlJSWlJMTFJaSA9PSA0MCA6CiBPT09PTzBPMDAgKCApCiBvMDBPbzBvb29vb28gKCApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgNzIgLSA3MjogSUkKZWxpZiBJSUlJSWlJMTFJaSA9PSA1MyA6CiBJSUkxaWkxaUlJICggIlJlcXVlc3RpbmcgSlNPTi1SUEMgSXRlbXMiICkKIE9vTyAoIElpMUkxSWkgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDkxIC0gOTE6IG9PME9vb09vTyAvIEkxaTFpSTFpICsgaUlpaTFJMTFJMUlJMSAuIE8wMG9Pb09vTzBvME8gLSBPMAplbGlmIElJSUlJaUkxMUlpID09IDUzIDoKIE1vdmllczEyMyAoICkKIGlmIDcwIC0gNzA6IE8wb28wT08wICogSWkxSSAtIE8wMG9Pb09vTzBvME8gKyBvT28wTzBPb28gJSBJMTFpIC0gSTFpMWlJMWkKIyBkZDY3OGZhYWU5YWMxNjdiYzgzYWJmNzhlNWNiMmYzZjA2ODhkM2EzCg==]')